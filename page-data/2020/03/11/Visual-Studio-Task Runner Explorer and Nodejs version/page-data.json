{"componentChunkName":"component---src-templates-page-js","path":"/2020/03/11/Visual-Studio-Task Runner Explorer and Nodejs version/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Visual Studio - Task Runner Explorer 和 Node 版本","date":"11 March 2020","author":"Sky Chang","excerpt":null,"tags":["Visual Studio","Node.js","Gulp"],"coverImage":null},"id":"7c3fa839-30a7-50ff-abdf-652b7b0a10ff","html":"<h2>前言</h2>\n<p>如果很早就開始玩 JS 打包的 Visual Studio 工程師，一定對於 Task Runner Explorer 有很深刻的印象，在某些情境，Task Runner Explorer 是很方便的，他可以透過整合 Visual Studio，讓你在 Visual Studio 裡面寫完 JS 後，透過 Task Runner Exploere 的點擊，就可以執行 Gulp 等等的行為。隨然在這個時代，前端大概都是透過 VS Code，和搭配指令的方式處理了，但早期的一些專案，還是有用 Task Runner Explorer 來處理。</p>\n<h2>問題 gulp 3.9 和 Node.js 12.x</h2>\n<p>首先，在看 Task Runner Explorer 和 node 關係前，其實是在解決另外一個問題的，這個問題主要是 gulp 3.9 和 Node.js 12.x 的問題。\n如下圖..</p>\n<p>發生了底下的錯誤</p>\n<p><code class=\"language-text\">fs.js:27\nconst { Math, Object } = primordials;\n                         ^\nReferenceError: primordials is not defined</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c2c215620d947b311a4cb5c376d7d2f/e16f3/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABWUlEQVQY01WQXU/iUBCG+/9/gfHGmGyiN37sJsZsNLrqdmkLAiJFpNLtdzlQyloUqW72ceiqiSd58mTmYs47oyEvns5x1ZzRfYlnX+EY30lsXTgnG5jkfotZ1EG5TaJBHf/GIB22KpI3v6PtfNNZ2zhkY+uE9W2d/c2vtI6O6eq/sHUdz7JIOh0SpQj8EOfOpd8f4PkRvh9XrvAifnshmrN7QHvvkPqXHU4vmvR+mHRPTrFrJv16A+enTtRqE08y0nREqsYk4jhJCaO4IpZ61UtHCq18eqEoFkwn92R5gUonWDKkdn6BufLZGZYhn9g9gjAiihNJFOA4d1xfd+nd9LkdOAxdFz+QhH/lhstnmD9B+QJjuWej2caUdFbjEkNcMywal01Zd/h/aJUuIZThKwdh/IH2uJCEDyV/ipLF8p94yUjN3shlxRw1njHJCqb5Q0WWzz/x3l/xCh2QrvdAtGyAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/1c2c215620d947b311a4cb5c376d7d2f/78d47/01.png\"\n        srcset=\"/static/1c2c215620d947b311a4cb5c376d7d2f/56d15/01.png 200w,\n/static/1c2c215620d947b311a4cb5c376d7d2f/d9f49/01.png 400w,\n/static/1c2c215620d947b311a4cb5c376d7d2f/78d47/01.png 800w,\n/static/1c2c215620d947b311a4cb5c376d7d2f/64756/01.png 1200w,\n/static/1c2c215620d947b311a4cb5c376d7d2f/e16f3/01.png 1315w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>解決 gulp 3.9 和 Node.js 12.x</h2>\n<p>至於這個，其實算是容易解的，網路上也很容易查到，簡單的說，就是 gulp 3.9 不支援 Node.js 12.x，所以 Node.js 降版到 10.x 就可以了..\n( Node.js 單號是短期支援，所以用偶數為主 )</p>\n<h2>真正的問題</h2>\n<p>但真正的問題很妙，因為配合這個專案，小弟其實已經裝了 Node.js 10.x 的版本。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 706px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4359161aaa0b3906aa45b8b1aa0b4d1e/190d7/02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABTUlEQVQoz62P2VLCQBBFBxAwkLCGxWhRsgkBBbIg+g++KEuAAGEp//8Trp0BIUhJYZUPp+50T/qkh2VuCsgrt1DuCkjJOQTDAoSIiLraRLf3Cs0woek7jC5ld1dvU6eeF5bTp5A7Y+QNG1nKQPENfkKofSCqDij7EBtDSESk3uc9keBJvVD1/QimvHxCNtZIGytkzA0S2hKxtsMz3nEQfZxDNtfIPW8gtRZIUj+lr5DoLGlmDVaxwMqjA2l9SZcLJNoLCI0pCWxITzN+jjRtiFSLVLv9WGuGUH0Mdt8HKw3AigP4ykP4KgfYt8wdTNJG7tlNiYbTus0FgarF8VdH8FdGNHgM49LdWeltkDVXfKuU5iDenoNvTeJgzdoPePkpOZJfPVi0xQRhdcKf6D71Wt3WXsFvG53c7f9cOsUrOCc5EZ794ELRxcK/8u/CL7waTBH+FAWjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"02\"\n        title=\"02\"\n        src=\"/static/4359161aaa0b3906aa45b8b1aa0b4d1e/190d7/02.png\"\n        srcset=\"/static/4359161aaa0b3906aa45b8b1aa0b4d1e/56d15/02.png 200w,\n/static/4359161aaa0b3906aa45b8b1aa0b4d1e/d9f49/02.png 400w,\n/static/4359161aaa0b3906aa45b8b1aa0b4d1e/190d7/02.png 706w\"\n        sizes=\"(max-width: 706px) 100vw, 706px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>但結果 Task Runner Explorer 還是拼命地出現不相容 Node.js 12.x 的這個錯誤 ( 怒 )</p>\n<h2>真正的結果</h2>\n<p>後來查閱後才發現，原來 Visual Studio 裡面是有內建 Node.js，而且會依據底下的順序尋找...</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 744px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aed3423c26bb931c35cce13f30188629/134e0/03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB6klEQVQoz5VTyY7TQBD1/38DJ45wQ+ICQijigERCRiMNE8c43u24vbb3NfOmqlFGMGIOY+mpu6uqX9erKmuWZaHregzDgHEcn9D3PaZpwjzP6sz+l9B1HZqmQVVV0DzXg2XZEEmqiNu2U8iyHL7vQ9ePSJJEBTMkQ0qFpm5g+TaMwx1+Hw04jgNNxDFM04QfBKjrWr3Uti08IvM8TwX5no8ojMjXYl1XXC4XrARe52XGTEqWZUFD97SyLBFFEfb7PUJaWQITuq4Lj2CdLKSUfVmUCs9Lw1ClmWaVjJblBc6xwI/tlrIM0XI9iDAhEkmP1SSxpcyudWIVDJZ/XVk67wt6UBvbCiJw4JgGHqYOWAZgHYisoIYseM3H2Wofbny8+arj3XcT728E3m7PCron8LDOryf8cmvh408Lt0GFb2aOT4cEn/UUzjmDLAoE1KwwDF8E+3kaCorNsgza0EjUWYzT8R5LX5PcUUmuK4mUAjgoTVOF7K8zjxKD97vdDpvNBoZhQEvVvAW4+3WPoqT5ogLLqlYXeWyuo+M6rsqIz7Ztq8v8U7jks2llu2oKv5JTp6/DykYepTzPn2zPUVH2SS5xOPk42iT9nChiIcQfQm49k0hZ/nORbf8Dx4msgE5khhMhjBMEVEfmegSlv4hKsXfZ2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"03\"\n        title=\"03\"\n        src=\"/static/aed3423c26bb931c35cce13f30188629/134e0/03.png\"\n        srcset=\"/static/aed3423c26bb931c35cce13f30188629/56d15/03.png 200w,\n/static/aed3423c26bb931c35cce13f30188629/d9f49/03.png 400w,\n/static/aed3423c26bb931c35cce13f30188629/134e0/03.png 744w\"\n        sizes=\"(max-width: 744px) 100vw, 744px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>沒錯，他會先收尋專案目錄底下的 nod_modules 位置。\n然後會搜尋 $(VisualStudioExternalTool) 這個變數路徑...</p>\n<p>而重點就是這個變數路徑...</p>\n<p>他會指向到 <code class=\"language-text\">C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Microsoft\\VisualStudio</code></p>\n<p>然後裡面藏著 Node.js ..... 而且是 v12.x 版本 ( 翻桌 )</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/864d5849641db5c8e87ddb06de26c918/7e04b/04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQoz22RS08TYRSG5w9UqlSE3mZ6v8j0wtBSFUHDQk1k48oY/4Fb/4NuTJQUEiqsTNy5MmHtyo0bI4adJYZSi0htS2lNL/N4mAFJ1C958p3NPN973lFuPHyEMZUmq/lZLMyz/PgZDxYWSbjHyagqKZ+PpNeLKrPD4WCp+ILDwxaVyi4HBwc0Gg3q9Trtdptut4syEbqM5vUw5/NgeNxMe8flniDn8TAjsrlwmBm3m6Cm4Rw5R7G4TK9v0my2aLUORXTEUadLR2S9Xg8lMpkhMakzNurC0GPcvJYnHooQFkFQ1UinUuhp2SCXQwuFWFpZodWo82PvGwx6NidnOByipKdniMZinL9wgYyR5dad2yQTSeaTcRaEe1cL3J+fFa5zN5Pi1dMnbH6psLVdY6fe5et+m22h1vxlC2evTDJtpKUjjZAk0HWdeDxOJBgkIin1aJSUPJhOxAlMjFN8vsTGxyqv323x5sMOG5vfeftpn/flJpgizGYSpFLSoxawivdJb36/H7/Mx/hk9gqaPOAYGWG1VJLlTDqtOn+fwWCAEs0WiMaTXHS58MrfDAQCItdOUP/MYUnvdDpZW1+3Px6aDEzTvo8ZDC2UZMYQYYJLY2NWujPZGapm12EJ19ZsYb9ndWZjWun6fUkY0acIR2O4XKNWQkugqv9IT4Wll+scmVD72ZFkw5NlTSSsdRQjXyCXzxOUjk5lp/xPuLpa4ljTaDSp7NX5XK5SqdaoVncpl8v8Bse51WAXVNe3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"04\"\n        title=\"04\"\n        src=\"/static/864d5849641db5c8e87ddb06de26c918/78d47/04.png\"\n        srcset=\"/static/864d5849641db5c8e87ddb06de26c918/56d15/04.png 200w,\n/static/864d5849641db5c8e87ddb06de26c918/d9f49/04.png 400w,\n/static/864d5849641db5c8e87ddb06de26c918/78d47/04.png 800w,\n/static/864d5849641db5c8e87ddb06de26c918/7e04b/04.png 1197w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>那解決方案呢，就是回到上上圖，Visual Studio 的設定，讓他的搜尋順序改變，讓 PATH 先抓到，就可以吃到我們自己裝的 Node.js 了....</p>\n<h2>後記</h2>\n<p>好吧，我承認，我都是用 CMD 和自己裝，所以踩到這個冷坑....但如果有需要的朋友，可能要注意一下...</p>\n<h2>參考資料</h2>\n<p>*<a href=\"https://stackoverflow.com/questions/55921442/how-to-fix-referenceerror-primordials-is-not-defined-in-node\">https://stackoverflow.com/questions/55921442/how-to-fix-referenceerror-primordials-is-not-defined-in-node</a></p>\n<ul>\n<li><a href=\"https://developercommunity.visualstudio.com/content/problem/388612/node-npm-using-different-architecture-32-vs-64-bit.html\">https://developercommunity.visualstudio.com/content/problem/388612/node-npm-using-different-architecture-32-vs-64-bit.html</a></li>\n<li><a href=\"https://stackoverflow.com/questions/46582442/visual-studio-2017-task-runner-explorer-not-loading-module\">https://stackoverflow.com/questions/46582442/visual-studio-2017-task-runner-explorer-not-loading-module</a></li>\n</ul>","excerpt":"前言 如果很早就開始玩 JS 打包的 Visual Studio 工程師，一定對於 Task Runner Explorer 有很深刻的印象，在某些情境，Task Runner Explorer 是很方便的，他可以透過整合 Visual Studio，讓你在 Visual…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"npm - 處理 node-gyp 和 canvas 的相依性","tags":["npm","GTK","Python","JavaScript","Node.js"]},"fields":{"slug":"/2020/03/10/npm-Fix node-gyp and canvas dependence/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/npm-Fix node-gyp and canvas dependence/npm-Fix node-gyp and canvas dependence.md"},"previous":{"frontmatter":{"path":null,"title":"Dapr - Hello Dapr","tags":["Dapr","K8S","AKS","ASP.NET Core","Microservice"]},"fields":{"slug":"/2020/03/13/Dapr-Hello_Dapr/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Dapr-Hello_Dapr/Dapr-Hello_Dapr.md"}}}}