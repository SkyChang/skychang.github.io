{"componentChunkName":"component---src-templates-page-js","path":"/2011/11/26/Team-Foundation-Server-TF252031、TF250001、TF249031-和-安裝TFS的權限注意事項/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Team Foundation Server - TF252031、TF250001、TF249031 和 安裝TFS的權限注意事項","date":"26 November 2011","author":"Sky Chang","excerpt":null,"tags":["Reporting Services","SharePoint","SQL Server","TFS"],"coverImage":null},"id":"9f25b89f-7e54-573a-9693-2013af474ae5","html":"<p>最近因為記憶體現在實在是太便宜了，所以就買了一堆記憶體，也因此可以重新去調整伺服器的架構，希望能讓SQL Server、TFS、SharePoint分成三台主機來處理，安裝的過程中，也遠遠比全部塞在一台複雜得多QQ，而這次遇到的一個問題，就是跨越三台所產生的問題。</p>\n<h4>權限</h4>\n<p>在開始之前，有件事情也必須要先提，雖然TFS的功能超級強大，但別忘了，TFS裡面的報表是整合了Reporting Services，而那些團隊網頁，則是整合了SharePoint，這代表甚麼?，簡單的說，就是各自有各自的帳號啦!也因此，這三台主機的服務帳號設定是非常複雜的，也沒辦法從單一的TFS裡面，就去控管所有服務的帳號，換言之，這些帳號都要分開建立!!不過現在的TFS已經幫忙處理很多事情了，安裝上也簡單多了，只不過，這個觀念必須要清楚，才能了解錯誤的含意。</p>\n<h4>開始之前</h4>\n<p>我先說說小弟我的環境吧，基本上和一般並無多大差異，SQL Server有自己的服務帳號，SharePoint也有自己的服務帳號，但是TFS我使用的是NT AUTHORITY\\NETWORK SERVICE這個網路服務帳號，至於為什麼只有TFS使用了NT AUTHORITY\\NETWORK SERVICE這個帳號，是因為我看到了MSDN的這句話</p>\n<blockquote>\n<p>內建帳戶並未使用密碼，並且已經擁有 [以服務方式登入] 使用權限，這讓它們更易於管理，尤其是在網域環境中。 </p>\n</blockquote>\n<p>也因此，我想說，反正MSDN都說這是秘訣了，那我就直接使用NETWORK SERVICE來當服務帳號吧，至於是不是我會錯意我就不知道了XDD。( <a href=\"http://msdn.microsoft.com/zh-tw/library/dd578625.aspx\" title=\"http://msdn.microsoft.com/zh-tw/library/dd578625.aspx\">http://msdn.microsoft.com/zh-tw/library/dd578625.aspx</a> )</p>\n<p>如果想知道哪裡可以看到TFS的服務帳號，可以進TFS管理主控台，就可以看到。</p>\n<p><a href=\"http://lh5.ggpht.com/-oY8ey212Uic/TtBGP3upHOI/AAAAAAAABC4/dltvW1N0zjg/s1600-h/image%25255B3%25255D.png\"><img src=\"http://lh3.ggpht.com/-y61cdcmXynQ/TtBGQ6grDaI/AAAAAAAABC8/mpe_xismrsw/image_thumb%25255B1%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<h4>第一次設定的驗證警告</h4>\n<p>接下來我們要開始慢慢地進入主題了；如同前面所說，因為三台主機的權限帳號的因素，所以如果SharePoint和TFS不是同一台時，第一次設定時，到驗證完成後，一定會有一個警告的訊息。</p>\n<blockquote>\n<p>您指定的SharePoint Web應用程式與Team Foundation Server的應用程式層裝載在不同伺服器。Web應用程式裝載在下列伺服器<a href=\"http://xxx:xxxx%E3%80%82%E9%80%99%E6%98%AF%E6%94%AF%E6%8F%B4%E7%9A%84%E7%B5%84%E6%85%8B%EF%BC%8C%E4%BD%86%E5%8F%AF%E8%83%BD%E9%9C%80%E8%A6%81%E5%85%B6%E4%BB%96%E6%AD%A5%E9%A9%9F%E4%B9%8B%E5%BE%8C%EF%BC%8C%E9%83%A8%E7%BD%B2%E6%89%8D%E8%83%BD%E6%AD%A3%E5%B8%B8%E9%81%8B%E4%BD%9C%E3%80%82%E7%B9%BC%E7%BA%8C%E4%B9%8B%E5%89%8D%EF%BC%8C%E6%82%A8%E6%87%89%E8%A9%B2%E6%AA%A2%E9%96%B1%E8%88%87%E9%81%A0%E7%AB%AFSharePoint\">http://xxx:xxxx。這是支援的組態，但可能需要其他步驟之後，部署才能正常運作。繼續之前，您應該檢閱與遠端SharePoint</a> Web應用程式整合的所有需求。如需詳細資訊，請參閱 Microsoft 網站 (<a href=\"http://go.microsoft.com/fwlink/?LinkId=161206\">http://go.microsoft.com/fwlink/?LinkId=161206</a>)。 </p>\n</blockquote>\n<p>如果之前驗證設定的時候，又有勾選建立新的Team專案集合，就會出錯，雖然TFS也算設定完成，但Team專案集合則建立不起來。</p>\n<p>所以，要先處理權限的步驟，才能在設定TFS的時候去勾選建立新的Team專案集合，要不然就是先不要勾選，也是可以順利設定完成，最後再把權限加進去，然後再來建立新的專案集合。</p>\n<h4>所以TF252031、TF250001、TF249031 是?</h4>\n<p>沒錯，就是權限問題，如果權限沒設定好，又去建立Team專案集合，就會發生TF252031、TF250001的錯誤，如下。</p>\n<blockquote>\n<p>TF252031: 無法為 Team 專案集合建立 SharePoint 網站。發生下列錯誤: TF250001: 下列帳戶的驗證檢查失敗: [網域名稱][TFS主機名稱]。帳戶必須是下列 SharePoint Web 應用程式的 Farm Administrators 群組成員: http://<font color=\"#5e5e5e\">[SharePoint位置]</font>/。如需詳細資訊，請參閱 Microsoft 網站 (<a href=\"http://go.microsoft.com/fwlink/?LinkId=161206\">http://go.microsoft.com/fwlink/?LinkId=161206</a>)。 </p>\n</blockquote>\n<p>而TF249031是Reporting Services的權限錯誤。</p>\n<blockquote>\n<p>TF249031: 無法建立含有下列名稱的資料夾: /TfsReports/Team專案名稱。使用者帳戶沒有在裝載報告之伺服器上建立資料夾的使用權限。 </p>\n</blockquote>\n<h4>解決TF252031、TF250001</h4>\n<p>其實很簡單，把帳號加入到SharePoint裡面就可以了；進入SharePoint的管理中心，並選擇安全性，再選擇管理伺服器陣列管理員群組。如果不知道怎樣進去，可以到安裝SharePoint的那台主機上，開始程式集裡面有一個SharePoint管理中心。</p>\n<p><a href=\"http://lh6.ggpht.com/-jlRkJYwgDBU/TtBGRW9A92I/AAAAAAAABDE/YkLYQTeky30/s1600-h/image%25255B14%25255D.png\"><img src=\"http://lh4.ggpht.com/-31oW0rck_AA/TtBGSZwqmLI/AAAAAAAABDQ/uEJcYo-ARTM/image_thumb%25255B6%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p><a href=\"http://lh6.ggpht.com/-9pB-ddQI00Y/TtBGTCuB_3I/AAAAAAAABDU/97ePugFemeY/s1600-h/image%25255B7%25255D.png\"><img src=\"http://lh3.ggpht.com/-U9EzXFqsRic/TtBGTsz4S_I/AAAAAAAABDc/lKfh-lJZtag/image_thumb%25255B3%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來在Farm Administrators群組裡面新增帳號，因為我的TFS服務帳號是使用NETWORK SERVICE，所以這邊新增服務帳號，就要選擇MyDomain\\TFSTest$，沒錯有錢字符號喔!(假設我的網域名稱為MyDomain，而主機名稱為TFSTest)。</p>\n<p><a href=\"http://lh3.ggpht.com/-ttSNBcTWaQw/TtBGUiRMiYI/AAAAAAAABDk/fx3Qa-jXliI/s1600-h/image%25255B11%25255D.png\"><img src=\"http://lh5.ggpht.com/-1QfG8B2xC4M/TtBGVUV79mI/AAAAAAAABDs/jihxwyDTYws/image_thumb%25255B5%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這樣就解決了權限不足的問題，如果有自己設定TFS的服務帳號，也可以在這邊選擇自己的服務帳號。</p>\n<h4>解決TF249031</h4>\n<p>這個是Reporting Service的問題，也滿簡單的，反正就加入進去就可以了；如果不知道Reporting Service管理的網址，可以這樣做，進入安裝SQL Server的那台電腦，並啟動Reporting Service 組態管理員。</p>\n<p><a href=\"http://lh4.ggpht.com/-xW49loU_iXc/TtBGWCnnJII/AAAAAAAABD0/I7oUfHavUXU/s1600-h/image%25255B17%25255D.png\"><img src=\"http://lh4.ggpht.com/-WzPz2W5rVlY/TtBGWlo9vTI/AAAAAAAABD8/bwvAbYWgSSk/image_thumb%25255B7%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>然後可以從報表管理員URL裡面看到。</p>\n<p><a href=\"http://lh5.ggpht.com/-u_8_imlNrkQ/TtBGXlJWcSI/AAAAAAAABEI/AIvlrtxDOE0/s1600-h/image%25255B22%25255D.png\"><img src=\"http://lh4.ggpht.com/-TMOhbbnKxiM/TtBGY1KsvpI/AAAAAAAABEM/IgoQ6Vsdlnw/image_thumb%25255B10%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>進入Reporting Service的報表管理員網站後，選擇資料夾設定。</p>\n<p><a href=\"http://lh5.ggpht.com/-q-_5pMzoQss/TtBGa7pxmzI/AAAAAAAABEY/XfhSUaP6HAU/s1600-h/image%25255B26%25255D.png\"><img src=\"http://lh5.ggpht.com/-YMIkkgOaagg/TtBGbblnrcI/AAAAAAAABEc/hUcinkWS9AA/image_thumb%25255B12%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>然後新增角色指派。</p>\n<p><a href=\"http://lh3.ggpht.com/-hprzgRryP38/TtBGbzGD5UI/AAAAAAAABEk/R60bn5uaftM/s1600-h/image%25255B30%25255D.png\"><img src=\"http://lh3.ggpht.com/-wTV2znPwC-w/TtBGc4FL1oI/AAAAAAAABEs/3B4yUtltZa4/image_thumb%25255B14%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這裡要勾選Team Foundation內容管理員，同樣的如果TFS使用的是NETWORK SERVICE當作服務帳號，就必須要使用MyDomain\\TFSTest$(假設我的網域名稱為MyDomain，而主機名稱為TFSTest)，如果TFS自己有設定服務帳號，就Key那組服務帳號。</p>\n<p><a href=\"http://lh5.ggpht.com/-sK3m7Og63ls/TtBGdgzWOEI/AAAAAAAABE0/SEtuAOot-5E/s1600-h/image%25255B35%25255D.png\"><img src=\"http://lh5.ggpht.com/-n1gDeYqB9kE/TtBGef_39rI/AAAAAAAABFA/ApXkzo_prGs/image_thumb%25255B17%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>以上就完成了!。</p>\n<h4>參考資料</h4>\n<ul>\n<li><a href=\"http://msdn.microsoft.com/zh-tw/library/dd631908.aspx\" title=\"http://msdn.microsoft.com/zh-tw/library/dd631908.aspx\">http://msdn.microsoft.com/zh-tw/library/dd631908.aspx</a></li>\n<li><a href=\"http://msdn.microsoft.com/zh-tw/library/ms253149.aspx\" title=\"http://msdn.microsoft.com/zh-tw/library/ms253149.aspx\">http://msdn.microsoft.com/zh-tw/library/ms253149.aspx</a></li>\n</ul>","excerpt":"最近因為記憶體現在實在是太便宜了，所以就買了一堆記憶體，也因此可以重新去調整伺服器的架構，希望能讓SQL Server、TFS、SharePoint分成三台主機來處理，安裝的過程中，也遠遠比全部塞在一台複雜得多QQ…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Team Foundation Service Preview - 刪除Team專案","tags":["TFS","Visual Studio"]},"fields":{"slug":"/2011/11/21/Team-Foundation-Service-Preview-刪除Team專案/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Team-Foundation-Service-Preview-刪除Team專案.md"},"previous":{"frontmatter":{"path":null,"title":"Team Foundation Server - 安裝SCRUM 1.0流程範本","tags":["Scrum","SharePoint","TFS","Visual Studio"]},"fields":{"slug":"/2011/11/30/Team-Foundation-Server-安裝SCRUM-1-0流程範本/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Team-Foundation-Server-安裝SCRUM-1-0流程範本.md"}}}}