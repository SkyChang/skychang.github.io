{"componentChunkName":"component---src-templates-page-js","path":"/2011/08/25/ASP-NET-MVC-將所有的View包成DLL/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"ASP.NET MVC 將所有的View包成DLL","date":"25 August 2011","author":"Sky Chang","excerpt":null,"tags":["ASP.NET MVC","NuGet","Visual Studio"],"coverImage":null},"id":"16f2a3bf-f955-551d-a576-2a099d0d4aa4","html":"<p>有的時候開發ASP.NET MVC專案時，我們會將Model獨立出來進行開發，另外成立一個專案來進行處理，那View呢??是否View也有可能獨立成一個專案??</p>\n<p>我們從@helper開始，把常用的東西抽離；到把整個@helper當成一個專案來開發，做成DLL；那既然@helper都能包成DLL了，感覺上View預先編譯成DLL也不遠了，但其實David和Chris早就想到了，而且各自有各自的做法，既然前面都是介紹David，我們就繼續延續下去吧。</p>\n<p><font color=\"#ff0000\">當然，這些都是實驗性質的技術，所以請大家酌量使用。</font></p>\n<p>當然，第一步還是要先把Razor Generator裝起來，位置在工具=>擴充管理員。</p>\n<p><a href=\"http://lh3.ggpht.com/-ZdSNfshRYlA/TldNtOc7x5I/AAAAAAAAAdY/qlJjgn7PPnk/s1600-h/image%25255B4%25255D.png\"><img src=\"http://lh5.ggpht.com/-HYS5qrMaVCk/TldNtqqLpPI/AAAAAAAAAdc/PfC7VgeMt_E/image_thumb%25255B2%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>裝好後，我們可以先建立一個新的ASP.NET MVC 3應用程式專案，然後選擇\"網際網路應用程式\"。</p>\n<p><a href=\"http://lh4.ggpht.com/-D4NVLlmiWpA/TldNuHVQp4I/AAAAAAAAAdg/JdMU3OlA9Xw/s1600-h/image%25255B9%25255D.png\"><img src=\"http://lh6.ggpht.com/-FnQs5sn7Igw/TldNuinkPjI/AAAAAAAAAdk/2N3y-FuiyQQ/image_thumb%25255B5%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，因為我們要將View獨立出來一個專案，所以必須再加入一個類別庫專案。</p>\n<p><a href=\"http://lh4.ggpht.com/-f7lt0cRjSLo/TldNvC0sa8I/AAAAAAAAAdo/QmTBXxchws0/s1600-h/image%25255B14%25255D.png\"><img src=\"http://lh4.ggpht.com/-WtcGvnt0cik/TldNv_2F4VI/AAAAAAAAAds/f0aD5JImMyU/image_thumb%25255B8%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p><a href=\"http://lh5.ggpht.com/-s4RYQv0wGh4/TldNwsg_BzI/AAAAAAAAAdw/qOXUhoXF8Vk/s1600-h/image%25255B19%25255D.png\"><img src=\"http://lh5.ggpht.com/-EL2r8hJrNYc/TldNxbQwxlI/AAAAAAAAAd0/5PHGqGjOyG8/image_thumb%25255B11%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，我們要使用NuGet取得PreCompiledMvcViewEngine Package，選擇剛剛加上去的類別庫，然後選擇Add Library Package Reference。</p>\n<p><a href=\"http://lh6.ggpht.com/-Qxh2cUp-UaQ/TldNxmPAApI/AAAAAAAAAd4/DwZ5knRB1eU/s1600-h/image%25255B24%25255D.png\"><img src=\"http://lh3.ggpht.com/-bADmtnI0ld8/TldNyWQekyI/AAAAAAAAAd8/HjtnEa-60So/image_thumb%25255B14%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p><a href=\"http://lh6.ggpht.com/-vFLlDjoBj7M/TldNzL6WALI/AAAAAAAAAeA/OvUIDE0Me5s/s1600-h/image%25255B29%25255D.png\"><img src=\"http://lh5.ggpht.com/-V62fh1yGneA/TldNzt1_A7I/AAAAAAAAAeE/kYcXZ-r3xR8/image_thumb%25255B17%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>然後，勇敢的按下去安裝，完成後，他預設會幫你裝上一些樣板如下。</p>\n<p><a href=\"http://lh5.ggpht.com/-QivbnTSmZCw/TldN0Bq9hwI/AAAAAAAAAeI/lYXtd2_3SbA/s1600-h/image%25255B34%25255D.png\"><img src=\"http://lh4.ggpht.com/-nezuaRz6fm8/TldN00DJZdI/AAAAAAAAAeM/qwo2aGKVg2g/image_thumb%25255B20%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>因為我們要把所有的View搬移過來，所以先把類別庫專案的View資料夾砍掉，也順便把Class1.cs砍掉，並且將MVCApplication專案的View剪下，貼到類別庫專案裡面去。</p>\n<p><a href=\"http://lh4.ggpht.com/-xfr0py1VUco/TldN1vCaQvI/AAAAAAAAAeQ/ug_ABZDD5N8/s1600-h/image%25255B39%25255D.png\"><img src=\"http://lh4.ggpht.com/-PJltXJs7JTE/TldN2NBsyPI/AAAAAAAAAeU/FZxxRPGZHJQ/image_thumb%25255B23%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，要設定這些View的屬性，將這些View的屬性設定如下，自訂工具請輸入\"RazorGenerator\"，建置動作選擇\"無\"，如果成功的話，會發現.cshtml下面，會出現一個.cs檔案的樣板。</p>\n<p><a href=\"http://lh4.ggpht.com/-zl9jiAqE1Tk/TldN2k2eRLI/AAAAAAAAAeY/QFX6GXyMOQM/s1600-h/image%25255B44%25255D.png\"><img src=\"http://lh5.ggpht.com/-H6caqlqxZ7Q/TldN3AplIhI/AAAAAAAAAec/XGYptDUGCF8/image_thumb%25255B26%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，因為View的部分會使用到MvcApplication的Model，所以要讓View的這部分參考到MvcApplication。</p>\n<p><a href=\"http://lh3.ggpht.com/-Iiqz3eGRjeg/TldN3r6NDiI/AAAAAAAAAeg/_nsRZ1cIvgw/s1600-h/image%25255B53%25255D.png\"><img src=\"http://lh6.ggpht.com/-kvtk5JW_x0g/TldN4AfyFAI/AAAAAAAAAek/DkvT6_qhMzo/image_thumb%25255B31%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>此時，就可以先將View做個編譯了，編譯完成後，回到MVCApplication裡面，既然MvcApplication需要用到View，自然也需要參考到View，但是如果選取專案的話，會形成循環，所以這邊我們只能參考到View的DLL檔案，也就是說，如果未來View有改過東西，就必須要先將View的部分先編譯一次，MVCApplication的部分才會改變。</p>\n<p><a href=\"http://lh4.ggpht.com/--N4d4UK8d0A/TldN4kjCOcI/AAAAAAAAAeo/ZPluUuD-b9I/s1600-h/image%25255B57%25255D.png\"><img src=\"http://lh3.ggpht.com/-6tvIKT5sPYw/TldN5VN2hjI/AAAAAAAAAes/2EqLfos_2sM/image_thumb%25255B33%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這樣就完成了。</p>\n<p>基本上，如果能讓View打包成DLL，是有許多好處的，除了可以讓發佈的檔案更加單純，甚至可以進行View的Unit Test，如果大家有興趣的話，可以來試試看喔!!</p>\n<p>參考資料</p>\n<ol>\n<li><a href=\"http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html\" title=\"http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html\">http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html</a>  <li><a href=\"http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/\" title=\"http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/\">http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/</a></li>\n</ol>","excerpt":"有的時候開發ASP.NET MVC專案時，我們會將Model獨立出來進行開發，另外成立一個專案來進行處理，那View呢??是否View也有可能獨立成一個專案?? 我們從@helper開始，把常用的東西抽離；到把整個@helper當成一個專案來開發，做成DLL；那既然@helper…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"ASP.NET MVC 將Razor的@helper包成DLL重複使用","tags":["ASP.NET MVC","Visual Studio"]},"fields":{"slug":"/2011/08/25/ASP-NET-MVC-將Razor的-helper包成DLL重複使用/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/ASP-NET-MVC-將Razor的-helper包成DLL重複使用.md"},"previous":{"frontmatter":{"path":null,"title":"相容!?","tags":["Sky的IT碎碎念"]},"fields":{"slug":"/2011/09/08/相容/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/相容.md"}}}}