{"componentChunkName":"component---src-templates-page-js","path":"/2011/01/25/ASP-NET-MVC-Area與Controller之Routing問題/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"ASP.NET MVC - Area與Controller之Routing問題","date":"25 January 2011","author":"Sky Chang","excerpt":null,"tags":["ASP.NET MVC"],"coverImage":null},"id":"fee659e5-3e5f-5738-a721-fb6851fb02e4","html":"<p>今天在測試MVC的Area的時候，發現了一個問題，目錄的層級大概是這樣\nArea - Test -Controllers - AAController.cs\n-Views - AA - Index.cshtml\nControllers - 無東西\nViews - 無東西\n此時跑測試的時候。\n<a href=\"http://xxx/Test/AA\">http://xxx/Test/AA</a> 這是正常沒問題的。\n<a href=\"http://xxx/AA\">http://xxx/AA</a> 顯示的卻是一個例外，找不到Index.cshtml這個View，可見如果根目錄下的Controller如果沒有任何Controller的話，<a href=\"http://xxx/AA\">http://xxx/AA</a>也會直接到Area -> Test -> Controller這個目錄下讀取AAController。</p>\n<p>對我來說，這是一個很奇怪的現象，而且未來很容易出錯，假設，今天我在根目錄也建立了一個AAController和的Views，未來刪除掉根目錄的AAController但又忘記刪除Views，此時就會讀到Test這個Area的AAController，並且順利執行。( 但實際上我是不要順利執行的 .... )</p>\n<p>會產生這個原因是因為，如果在當下之NameSpace找不到Controller，會自動的去搜尋別的Controller，本來以為在Routing設定的時候，加上NameSpace就可以了，但實際上不然，整個要改寫成這樣，才會正常</p>\n<pre class=\"brush: csharp\">routes.MapRoute(\n  \"Default\" , // 路由名稱\n  \"{controller}/{action}/{id}\" , // URL 及參數\n  new  { action = \"Index\" , id = UrlParameter .Optional }, new  string [] { \"MVC.Controllers\"  }\n).DataTokens[\"UseNamespaceFallback\" ] = false ;\n</pre>\n<p>必須加上DataTokens[\"UseNamespaceFallback\" ] = false ; 告訴路由，只要抓取這個NameSpace底下的Controller就好，不要再去找整個目錄的Controller。 </p>","excerpt":"今天在測試MVC的Area的時候，發現了一個問題，目錄的層級大概是這樣\nArea - Test -Controllers - AAController.cs\n-Views - AA - Index.cshtml\nControllers - 無東西\nViews…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"ASP.NET MVC 、AJAX、img標籤當button的問題","tags":["ASP.NET MVC","HTML","JavaScript"]},"fields":{"slug":"/2011/01/25/ASP-NET-MVC-、AJAX、img標籤當button的問題/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/ASP-NET-MVC-、AJAX、img標籤當button的問題.md"},"previous":{"frontmatter":{"path":null,"title":"ASP.NET MVC 3 RTM","tags":["ASP.NET MVC"]},"fields":{"slug":"/2011/01/26/ASP-NET-MVC-3-RTM/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/ASP-NET-MVC-3-RTM.md"}}}}