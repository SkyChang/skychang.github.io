{"componentChunkName":"component---src-templates-page-js","path":"/2012/04/06/SQL-Azure-使用SQL-Azure-Migration-Wizard將本地的資料庫搬移到SQL-Azure/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"SQL Azure - 使用SQL Azure Migration Wizard將本地的資料庫搬移到SQL Azure","date":"06 April 2012","author":"Sky Chang","excerpt":null,"tags":["Azure","SQL Server","Tools"],"coverImage":null},"id":"f4f985b7-254a-5fff-b705-fe6d727c2f14","html":"<p>這篇沒甚麼技術可言，也只是記錄一下小弟我把本地端的資料庫搬到雲端的過程，小弟我這邊使用的是<a href=\"http://sqlazuremw.codeplex.com/\">SQL Azure Migration Wizard</a>，這個工具也是各個神人推薦的好工具，SQL Azure Migration Wizard可以幫我們執行搬移，分析，和維修!( Maintenace目前小弟也沒用過，未來有機會用到在介紹吧 )，而因為SQL Azure並非所有SQL Server的SQL都可以使用，所以也可以用這個工具來檢查SQL File；總之，SQL Azure Migration Wizard是SQL Azure必備的工具之一!</p>\n<p>開啟的畫面如下。</p>\n<p><a href=\"http://lh4.ggpht.com/-VjBVB0f0V80/T33ODdhxzRI/AAAAAAAACIA/HqAyKcJ1GR0/s1600-h/image%25255B5%25255D.png\"><img src=\"http://lh6.ggpht.com/-070DaI9WLOU/T33OEo56tRI/AAAAAAAACII/BS1Y-0hAPLU/image_thumb%25255B3%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>因為我們這次要執行的是從本地端搬資料到雲端，所以要選擇這個。( 如要搬移，必須要是db擁有者 )</p>\n<p><a href=\"http://lh4.ggpht.com/-Ce0w2vtfiFU/T33OFzV3EJI/AAAAAAAACIQ/zxCmqpfczWM/s1600-h/image%25255B12%25255D.png\"><img src=\"http://lh3.ggpht.com/-guq6slFUua8/T33OHRXYvgI/AAAAAAAACIY/nhOI1kVnHQ4/image_thumb%25255B8%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這時候會需要連接到本地端的資料庫，基本上熟悉SQL Server的人，這部分應該沒有甚麼問題。</p>\n<p><a href=\"http://lh4.ggpht.com/-O5njZunqyGU/T33OIlUImvI/AAAAAAAACIg/z6QMcJsYf8s/s1600-h/image%25255B17%25255D.png\"><img src=\"http://lh6.ggpht.com/-v9LyPinDbe4/T33OJnC-OcI/AAAAAAAACIo/4sqohpTX4u8/image_thumb%25255B11%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>然後選擇要搬移的資料庫，因為機密的關係，這裡全部都被我塗白了..</p>\n<p><a href=\"http://lh6.ggpht.com/-NC3bSFTp1i0/T33OLAKkZkI/AAAAAAAACIw/hhLus6jmll8/s1600-h/image%25255B21%25255D.png\"><img src=\"http://lh5.ggpht.com/-Y1b6XvLsUO0/T33OMZAKSkI/AAAAAAAACI4/Dw0xDZYVO4c/image_thumb%25255B13%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>選擇所有DB物件，如果有需要，也可以進Advanced去做調整。</p>\n<p><a href=\"http://lh4.ggpht.com/-yYKdSvAL9WI/T33ONUnhzsI/AAAAAAAACJA/CjQiXfnS3MI/s1600-h/image%25255B26%25255D.png\"><img src=\"http://lh3.ggpht.com/-QeEEMvtC0eo/T33OOhNHvkI/AAAAAAAACJI/gwjDdyQ0r2o/image_thumb%25255B16%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>就做個檢視一下，看看有沒有問題。</p>\n<p><a href=\"http://lh4.ggpht.com/-uUXSN4PqYUU/T33OPsL0tWI/AAAAAAAACJQ/A2cRVI1gkUA/s1600-h/image%25255B31%25255D.png\"><img src=\"http://lh3.ggpht.com/-yqZbSMlxiHY/T33ORXWURBI/AAAAAAAACJY/bGp3WTZAFiM/image_thumb%25255B19%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這邊可以看一下訊息，雖然這邊可以看到一堆亂碼，但其實是SQL Azure Migration Wizard利用BCP工具，將目前資料庫的內容打包成dat檔案，以方便後續將資料給上傳上去。</p>\n<p><a href=\"http://lh5.ggpht.com/-E0LkC8dnRuM/T33OSeo2OeI/AAAAAAAACJg/0KCP8wdCOug/s1600-h/image%25255B37%25255D.png\"><img src=\"http://lh5.ggpht.com/-n2c5T8j6LVs/T33OUKwD1JI/AAAAAAAACJo/LDGaNqkfa0o/image_thumb%25255B23%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這邊可以選擇目標位置，也就是建立SQL Azure的連線。</p>\n<p><a href=\"http://lh5.ggpht.com/-Y6VgSIPQ994/T33OVStud1I/AAAAAAAACJw/49-eXyRUpqY/s1600-h/image%25255B43%25255D.png\"><img src=\"http://lh4.ggpht.com/-CyQxOjpIX4E/T33OWgswPfI/AAAAAAAACJ4/MuiIMcO3ukA/image_thumb%25255B27%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>填入SQL Azure的資料庫資訊，但要注意SQL Azure的防火牆是否開啟了。</p>\n<p><a href=\"http://lh5.ggpht.com/-b_H_enzKlYo/T33OXYYe8EI/AAAAAAAACKA/KTkN6tMOyM8/s1600-h/image%25255B47%25255D.png\"><img src=\"http://lh4.ggpht.com/-Pro_tAz5ctY/T33OYVG9iXI/AAAAAAAACKI/0KuaeTuvar0/image_thumb%25255B29%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>連線上後，因為我還沒建立Database，所以選擇Create Database。</p>\n<p><a href=\"http://lh6.ggpht.com/-HM_oPD4xQV4/T33OZgNKCzI/AAAAAAAACKQ/OlzK7CUbZKA/s1600-h/image%25255B57%25255D.png\"><img src=\"http://lh5.ggpht.com/-p2trnBd0Eys/T33OankBupI/AAAAAAAACKY/TK2-vM8Ci0o/image_thumb%25255B35%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這邊會要求填入資訊，但別忘記，這是要算錢的，如果使用別人的信用卡，就開到最大吧。</p>\n<p><a href=\"http://lh6.ggpht.com/-wZrWAX77T2g/T33OcE58mlI/AAAAAAAACKg/V-Po5oDYexg/s1600-h/image%25255B58%25255D.png\"><img src=\"http://lh4.ggpht.com/-rZFCZdSUOdE/T33OdTTNKQI/AAAAAAAACKk/hg750mzMMiY/image_thumb%25255B36%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>最後，到了這步驟的時候，SQL Azure上面的Table就會幫你建立好了，不過此時資料並沒有過去。</p>\n<p><a href=\"http://lh4.ggpht.com/--NqLOSuaXiw/T33OeJhyyAI/AAAAAAAACKw/ZldS-fDuQ-8/s1600-h/image%25255B67%25255D.png\"><img src=\"http://lh4.ggpht.com/-WqslqMElfo8/T33Ofg7Q5fI/AAAAAAAACK4/4ibvvcaPUjs/image_thumb%25255B41%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，我們要使用BCP工具，將剛剛SQL Azure Migration Wizard幫我們封裝的資料傳上去，預設下，SQL Azure Migration Wizard會把SQL Server裡面的資料封裝到C:\\SQLAzureMW\\BCPData\\底下，我們可以輸入以下指令，就會將資料搬到SQL Azure上面去。</p>\n<blockquote>\n<p>C:\\SQLAzureMW\\BCPData>bcp Table名稱 in c:\\SQLAzureMW\\BCPData\\檔案名.d\nat –S SQL Azure資料庫Dns -U 使用者名稱@xxxxxxx -P 密碼 -d 資料庫名 –n </p>\n</blockquote>\n<p>其中使用者名稱後面的xxxxx是SQL Azure DNS的前面亂碼，例如:你的SQL Azure的DNS是asdfghj.database.windows.net，那你就要輸入\"使用者名稱@asdfghj”，執行的畫面如下。</p>\n<p><a href=\"http://lh4.ggpht.com/-jxRLTe9UMvc/T35itIDB-SI/AAAAAAAACLE/lEPae6w4ZW0/s1600-h/image%25255B4%25255D.png\"><img src=\"http://lh3.ggpht.com/-OPVJKAE8FLw/T35iu_GlBFI/AAAAAAAACLM/bDYz3MPgTys/image_thumb%25255B1%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這樣子資料就傳上去了。</p>\n<p>其實這個工具真的就那麼簡單，就介紹到這邊了，如果有使用SQL Azure的人，一定要用用看!!</p>\n<p>參考資料</p>\n<ul>\n<li><a href=\"http://blogs.uuu.com.tw/Articles/post/2011/05/30/SQL-Azure-%E7%B0%A1%E4%BB%8B%28%E4%B8%AD%29.aspx\" title=\"http://blogs.uuu.com.tw/Articles/post/2011/05/30/SQL-Azure-%E7%B0%A1%E4%BB%8B%28%E4%B8%AD%29.aspx\">http://blogs.uuu.com.tw/Articles/post/2011/05/30/SQL-Azure-%E7%B0%A1%E4%BB%8B%28%E4%B8%AD%29.aspx</a>  <li><a href=\"http://technet.microsoft.com/en-us/library/ms162802.aspx\" title=\"http://technet.microsoft.com/en-us/library/ms162802.aspx\">http://technet.microsoft.com/en-us/library/ms162802.aspx</a></li>\n</ul>","excerpt":"這篇沒甚麼技術可言，也只是記錄一下小弟我把本地端的資料庫搬到雲端的過程，小弟我這邊使用的是SQL Azure Migration Wizard，這個工具也是各個神人推薦的好工具，SQL Azure Migration Wizard…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"SQL Server Data Tools 與 Visual Studio Achievements的Bug","tags":["NuGet","SQL Server","Tools","Visual Studio"]},"fields":{"slug":"/2012/04/05/SQL-Server-Data-Tools-與-Visual-Studio-Achievements的Bug/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/SQL-Server-Data-Tools-與-Visual-Studio-Achievements的Bug.md"},"previous":{"frontmatter":{"path":null,"title":"第8次 Study4.TW 120422","tags":["Sky的IT碎碎念","Study4"]},"fields":{"slug":"/2012/04/17/第8次-Study4-TW-120422/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/第8次-Study4-TW-120422.md"}}}}