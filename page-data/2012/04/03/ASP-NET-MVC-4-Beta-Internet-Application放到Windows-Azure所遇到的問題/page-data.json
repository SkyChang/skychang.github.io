{"componentChunkName":"component---src-templates-page-js","path":"/2012/04/03/ASP-NET-MVC-4-Beta-Internet-Application放到Windows-Azure所遇到的問題/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"ASP.NET MVC 4 Beta - Internet Application放到Windows Azure所遇到的問題","date":"03 April 2012","author":"Sky Chang","excerpt":null,"tags":["ASP.NET MVC","Azure"],"coverImage":null},"id":"ab201add-0f9f-55fc-a41c-eb60f3143ca7","html":"<p>最近將開始寫Study4的網站，而因為沒有強大設計人力的支援下，想說先利用ASP.NET MVC預設的Internet Application樣板來修改，在編輯時期，Local模擬後，都沒有甚麼問題，於是就很放心的佈署上去了!然後就出現下面這個畫面。</p>\n<p><a href=\"http://lh6.ggpht.com/-L42NlyFY6-I/T3pbObyacLI/AAAAAAAAB6Q/zaXeHKfEDrM/s1600-h/image%25255B3%25255D.png\"><img src=\"http://lh6.ggpht.com/-sXUnvdn9rF4/T3pbQQTGCsI/AAAAAAAAB6Y/Q9ta4eWFykA/image_thumb%25255B1%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這個畫面是ASP.NET MVC Internet Application預設的錯誤畫面，當有錯誤的時候，會導到這頁，代表著有錯誤，而這邊，我們就利用<a href=\"http://blog.sanc.idv.tw/2012/04/windows-azure-intellitrace.html\">這篇</a>所教的IntelliTrace的方式，來看看錯在哪邊，我們可以發現解析的時候發生錯誤，但老實說，還是找不到錯在哪邊…<a href=\"http://lh6.ggpht.com/-g8MbtID-MPI/T3pbRrL92dI/AAAAAAAAB6c/pQ3VsaW-FaI/s1600-h/image%25255B11%25255D.png\"><img src=\"http://lh6.ggpht.com/-NJOB1FixDrI/T3pbS8sYBGI/AAAAAAAAB6o/1S4p6HRGfcg/image_thumb%25255B5%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>後來心一橫，直接把Error.cshtml 更名掉，並在Web.Config加上CustomErrors Mode =”off”，讓畫面顯示錯誤報告，如下圖，看到這，大家應該就恍然大悟了吧，沒錯，就是檔案存檔的編碼有問題!!</p>\n<p><a href=\"http://lh5.ggpht.com/-ruUl3R-mmYI/T3pbULHSXlI/AAAAAAAAB6w/u0yMP_AqwEE/s1600-h/image%25255B15%25255D.png\"><img src=\"http://lh5.ggpht.com/-OXkopCKaB3k/T3pbVbcl9dI/AAAAAAAAB64/n8oLWUyYRvs/image_thumb%25255B7%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>於是我使用NotePad++打開Index.cshtml檔案，發現是ANSI編碼!</p>\n<p><a href=\"http://lh5.ggpht.com/--QbsxnOX1_0/T3pbWgCMDlI/AAAAAAAAB68/hm_cg0u4Y24/s1600-h/image%25255B18%25255D.png\"><img src=\"http://lh3.ggpht.com/-Fb3SJZ_ci1Y/T3pbXyVdVsI/AAAAAAAAB7I/siOmj_ar-1A/image_thumb%25255B8%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>但如果是其他檔案的話，卻是UTF-8。</p>\n<p><a href=\"http://lh3.ggpht.com/-rxQnF8nupxY/T3pbY8nJkaI/AAAAAAAAB7Q/eskKM_XGrjg/s1600-h/image%25255B21%25255D.png\"><img src=\"http://lh3.ggpht.com/-Tvvb7em6pvU/T3pbZ77JZRI/AAAAAAAAB7Y/DdALkaJ51g0/image_thumb%25255B9%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>小弟發現，_Layout.cshtml和index.cshtml是ANSI編碼，其他的檔案就是UTF-8編碼，而在本機上測試的時候，是不會有任何問題的，但如果發布到Windows Azure，就會出現  > System.Web.HttpParseException，訊息為\"¦\" is not valid at the start of a code block.  Only identifiers, keywords, comments, \"(\" and \"{\" are valid. <p>其次，也會連帶的出現以下的例外訊息。</p>\n<blockquote>\n<p>Microsoft.CSharp.RuntimeBinder.RuntimeBinderException 訊息為 System.Dynamic.DynamicObject’ does not contain a definition for ‘Message’ </p>\n</blockquote>\n<p>所以解決辦法，就是利用NotePad++的編碼，並選擇轉換至UTF-8碼格式，就可以了。</p>\n<p><a href=\"http://lh6.ggpht.com/-FUxG9rgumIc/T3pba3Us3_I/AAAAAAAAB7g/qUFTyZ5yIDQ/s1600-h/image%25255B29%25255D.png\"><img src=\"http://lh5.ggpht.com/-bRU30JsuKIE/T3pbc9ZfbhI/AAAAAAAAB7o/M1honhhipck/image_thumb%25255B13%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<h4>後記</h4>\n<p>老實說，不知道這屬不屬於ASP.NET MVC 4 Beta的Bug，我後來有開ASP.NET MVC 3的專案來看，存檔的內容也是UTF-8，並非ANSI，畢竟對於英文語系的使用者來說，這是完全沒有甚麼影響的，但如果是我們亞洲語系的使用者，可能就會造成不便，所以這部份小弟在回報看看，希望正式版能改善=V=。</p>","excerpt":"最近將開始寫Study4的網站，而因為沒有強大設計人力的支援下，想說先利用ASP.NET MVC預設的Internet Application樣板來修改，在編輯時期，Local模擬後，都沒有甚麼問題，於是就很放心的佈署上去了!然後就出現下面這個畫面。 image 這個畫面是ASP…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Windows Azure - 使用Visual Studio發行Windows Azure程式","tags":["Azure","Visual Studio"]},"fields":{"slug":"/2012/04/02/Windows-Azure-使用Visual-Studio發行Windows-Azure程式/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Windows-Azure-使用Visual-Studio發行Windows-Azure程式.md"},"previous":{"frontmatter":{"path":null,"title":"Windows Azure -  開啟雲上的IntelliTrace，以利偵錯!","tags":["Azure","Visual Studio"]},"fields":{"slug":"/2012/04/03/Windows-Azure-開啟雲上的IntelliTrace，以利偵錯/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Windows-Azure-開啟雲上的IntelliTrace，以利偵錯.md"}}}}