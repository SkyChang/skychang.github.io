{"componentChunkName":"component---src-templates-page-js","path":"/2012/10/10/Windows-Azure-刪除VHD時，產生There-is-currently-a-lease-on-the-blob-and-no-lease-ID-was-specified-in-the-request-錯誤/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Windows Azure - 刪除VHD時，產生There is currently a lease on the blob and no lease ID was specified in the request 錯誤","date":"10 October 2012","author":"Sky Chang","excerpt":null,"tags":["Azure"],"coverImage":null},"id":"8ccc90f4-6c31-5a63-aaaf-b8d6496466e8","html":"<p>好，前篇介紹了<a href=\"http://blog.sanc.idv.tw/2012/10/windows-azure-diskvma-lease-conflict.html\">刪除VHD</a>的一些問題，但老實說，還是沒有辦法解決小弟我目前碰到的問題XDD ( 所以上一篇是做爽的… )，但也因為上一篇的經驗，得到了一些啟示，我先來把問題列出來吧。</p>\n<p>其實是，昨天在將做VM轉Image的練習，當作完刪除Disk後，準備要刪除Blob裡面的VHD，卻出現這個錯誤</p>\n<blockquote>\n<p>There is currently a lease on the blob and no lease ID was specified in the request </p>\n</blockquote>\n<p><a href=\"http://lh6.ggpht.com/-T0eY9FoWk4k/UHRNeJ8ZxoI/AAAAAAAAFD4/FhHg7_9AMaM/s1600-h/image_thumb%25255B1%25255D%25255B2%25255D.png\"><img src=\"http://lh3.ggpht.com/-gpJycl7Z-FQ/UHRNfBAi-vI/AAAAAAAAFEA/RrE2I7zk6gk/image_thumb%25255B1%25255D_thumb.png?imgmax=800\" alt=\"image_thumb[1]\" title=\"image_thumb[1]\"></a></p>\n<p>從字面上來解釋，就是這個Blob的ID還在被使用中，所以無法刪除；而這個時候，第一個當然就是會想到VM裡面的Image或是Disk，但是進去看，都是空空的= =… ( 如果Image或是Disk，又或是VM有掛載的話，通常只要移除就可以順利解決問題了，但這邊是很不幸的，完全沒掛載的狀況下…還是不能刪除 )</p>\n<p><a href=\"http://lh4.ggpht.com/-meiXSiqOvpg/UHRNgETT_EI/AAAAAAAAFEI/2ZR9PzOn5yQ/s1600-h/image_thumb%25255B4%25255D%25255B2%25255D.png\"><img src=\"http://lh6.ggpht.com/--fwq9rJJMAA/UHRNhnk3EeI/AAAAAAAAFEM/CG9PxHNn3Ic/image_thumb%25255B4%25255D_thumb.png?imgmax=800\" alt=\"image_thumb[4]\" title=\"image_thumb[4]\"></a></p>\n<p>Disk裡面一樣找不到。</p>\n<p><a href=\"http://lh6.ggpht.com/-40vBi_2oZqg/UHRNi4S-XII/AAAAAAAAFEY/mDr4JgAhTTo/s1600-h/image_thumb%25255B5%25255D%25255B2%25255D.png\"><img src=\"http://lh6.ggpht.com/-eQjrO7fgbqg/UHRNkK-JdEI/AAAAAAAAFEg/_L7OTJU_Lsk/image_thumb%25255B5%25255D_thumb.png?imgmax=800\" alt=\"image_thumb[5]\" title=\"image_thumb[5]\"></a></p>\n<p>本來想說，這種問題，大概只有官方那邊能解決，正打算用中文信和印度工程師溝通的時候，剛好翻到<a href=\"http://social.msdn.microsoft.com/Forums/pl-PL/WAVirtualMachinesforWindows/thread/cc9bacfc-2c11-4010-b535-f1b0a141d317\">MSDN</a>有解決的方式，但做完發現，恩，官方的狀況，和我的狀況是不同的XDDD，但還是給了我一盞明燈，沒錯，就還是要使用Windows Azure PowerShell來處理，如果不知道Windows Azure PowerShell的人，或是不知道如何設定的人，可以參考一下<a href=\"http://blog.sanc.idv.tw/2012/10/windows-azure-diskvma-lease-conflict.html\">上一篇</a>。</p>\n<p>好，那到底該如何解決這個問題呢?，其實如果管理畫面看不到，那我們就使用Windows Azure Powshell來處理吧!!</p>\n<p>其實我們只要下Remove-AzureVMImage –ImageNmae image的名稱 就可以順利刪除了，如下圖；刪除之後，就可以回到Windows Azure管理介面進行刪除Blob的處理了。</p>\n<p><a href=\"http://lh6.ggpht.com/-DOnzb4ol69k/UHRNkyDuxwI/AAAAAAAAFEk/YPgpQHH6BVY/s1600-h/image%25255B3%25255D.png\"><img src=\"http://lh5.ggpht.com/-2mGpoBoHaEw/UHRNl9EBMxI/AAAAAAAAFEw/-NXNBb2Lsq4/image_thumb%25255B2%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>喔，如果你忘記當初Image的名稱，還可以使用Get-AzureVMImage來取得目前Image的名稱!!</p>\n<p>沒錯就是這麼簡單…</p>\n<h4>後記</h4>\n<p>其實從這次體會到Windows Azure Powshell的強大，未來有機會再持續研究看看吧!</p>\n<h4>參考資料</h4>\n<ul>\n<li><a href=\"https://www.windowsazure.com/en-us/manage/linux/how-to-guides/powershell-cmdlets/\" title=\"https://www.windowsazure.com/en-us/manage/linux/how-to-guides/powershell-cmdlets/\">https://www.windowsazure.com/en-us/manage/linux/how-to-guides/powershell-cmdlets/</a></li>\n</ul>","excerpt":"好，前篇介紹了刪除VHD的一些問題，但老實說，還是沒有辦法解決小弟我目前碰到的問題XDD ( 所以上一篇是做爽的… )，但也因為上一篇的經驗，得到了一些啟示，我先來把問題列出來吧。 其實是，昨天在將做VM轉Image的練習，當作完刪除Disk後，準備要刪除Blob裡面的VHD…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Windows Azure - 錯誤!! 當使用現有的Disk來建立新VM時產生A lease conflict occurred with the blob","tags":["Azure"]},"fields":{"slug":"/2012/10/10/Windows-Azure-錯誤-當使用現有的Disk來建立新VM時產生A-lease-conflict-occurred-with-the-blob/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Windows-Azure-錯誤-當使用現有的Disk來建立新VM時產生A-lease-conflict-occurred-with-the-blob.md"},"previous":{"frontmatter":{"path":null,"title":"GitHub - GitHub初體驗","tags":["Git"]},"fields":{"slug":"/2012/10/23/GitHub-GitHub初體驗/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/GitHub-GitHub初體驗.md"}}}}