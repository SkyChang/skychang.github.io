{"componentChunkName":"component---src-templates-page-js","path":"/2012/11/27/Windows-Azure-升級Cloud-Service到Windows-Server-2012/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Windows Azure - 升級Cloud Service到Windows Server 2012","date":"27 November 2012","author":"Sky Chang","excerpt":null,"tags":["Azure","Windows Server"],"coverImage":null},"id":"684d4a9c-7962-5f6b-b870-10921c3bda06","html":"<p>前一段時間，看到Cloud Service已經開始支援Windows Server 2012的時候，很開心的就準備要去升級，所以小弟就到了下圖的畫面，選了Windows Server 2012。</p>\n<p><a href=\"http://lh3.ggpht.com/-gLMlEeMeWSU/ULTcFVstFEI/AAAAAAAAFeM/w1iYJehYcNc/s1600-h/image%25255B3%25255D.png\"><img src=\"http://lh3.ggpht.com/-xu2803M6ybU/ULTcGsokehI/AAAAAAAAFeU/yG4Le8dSL_c/image_thumb%25255B1%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>然後悲劇就發生了… ( 好啦，也沒那麼悽慘，只是單純的錯誤。 )</p>\n<p>錯誤訊息如下，簡單的說，就是不可以將Windows Server 2008 SP1直接升級到Windows Server 2012。</p>\n<p><a href=\"http://lh6.ggpht.com/-Hl9ez0nFgDM/ULTcHmBjaUI/AAAAAAAAFec/_jT9bO7ytVM/s1600-h/Image.png\"><img src=\"http://lh4.ggpht.com/-S-LjZBmKGno/ULTcJGs_dOI/AAAAAAAAFek/vrXNyjo70pU/Image.png?imgmax=800\" alt=\"圖片 1\" title=\"圖片 1\"></a></p>\n<blockquote>\n<p>The Upgrade from OS family 1 to OS family 3 is not allowed </p>\n</blockquote>\n<p>據說，Windows Server 2008 R2 升級 Windows Server 2012也會出錯。</p>\n<blockquote>\n<p>The Upgrade from OS family 2 to OS family 3 is not allowed </p>\n</blockquote>\n<p>這個案例，只要是發生在當Cloud Service上，已經使用Windows Server 2008或是Windows Server 2008 R2，而想升級成Windows Server 2012時，會發生的錯誤訊息；無論是使用如最上圖的升級方式，或是透過<a href=\"http://blog.sanc.idv.tw/2012/11/windows-azure-cloud-serviceos.html\">前篇</a>，利用ServiceConfiguration.Cloud.cscfg改OSFamily，都會發生錯誤；只要目前Cloud Service上，還存在著Windows Server 2008或是R2。</p>\n<p>所以要怎樣解決呢??</p>\n<h4>第一種方式</h4>\n<p>刪除現有的Cloud Service，然後透過<a href=\"http://blog.sanc.idv.tw/2012/11/windows-azure-cloud-serviceos.html\">前篇</a>的方式，先設定ServiceConfiguration.Cloud.cscfg的OSFamily，最後佈署一個新的Cloud Service；不過，當刪除Cloud Service，建立新的Cloud Service的時候，IP位置，就會換了…所以不是很建議使用這種方式。</p>\n<h4>第二種方式 SWAP VIP</h4>\n<p>是的，SWAP VIP是最好的方式，大家可以參考<a href=\"http://blog.sanc.idv.tw/2012/11/windows-azure-cloud-service.html\">這篇</a>了解SWAP VIP，我們可以把修改過ServiceConfiguration.Cloud.cscfg的專案，佈署到Staging，然後再利用SWAP VIP進行切換；這樣就可以順利解決；當然，如果Staging目前上面已經在執行，也別忘記要先砍掉，在建立一個新的Staging；如下圖。</p>\n<p><a href=\"http://lh6.ggpht.com/-AHENxdSqcn0/ULTcKij7HaI/AAAAAAAAFes/mGVH5eNR55I/s1600-h/image%25255B8%25255D.png\"><img src=\"http://lh3.ggpht.com/-CD77jTYJUog/ULTcL4dDvQI/AAAAAAAAFe0/jZtpSau4w94/image_thumb%25255B4%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>然後在UPDATE上新的Cloud Service到Staging，最後，再利用SWAP切換到Production，就可以順利升級到Windows Server 2012了 ( 也不算是升級了XDD，根本就是重新產生了… )</p>\n<h4>後記</h4>\n<p>相信未來會有越來越多人遇到這個問題，所以在這邊寫出來，希望能幫助到大家。</p>\n<h4>參考網址</h4>\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/windowsazure/gg433101.aspx\" title=\"http://msdn.microsoft.com/en-us/library/windowsazure/gg433101.aspx\">http://msdn.microsoft.com/en-us/library/windowsazure/gg433101.aspx</a></li>\n</ul>","excerpt":"前一段時間，看到Cloud Service已經開始支援Windows Server 2012的時候，很開心的就準備要去升級，所以小弟就到了下圖的畫面，選了Windows Server 2012。 image…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Windows Azure -  佈署Cloud Service時，直接選擇想要的OS","tags":["Azure"]},"fields":{"slug":"/2012/11/27/Windows-Azure-佈署Cloud-Service時，直接選擇想要的OS/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Windows-Azure-佈署Cloud-Service時，直接選擇想要的OS.md"},"previous":{"frontmatter":{"path":null,"title":"ASP.NET MVC - 使用ASP.NET MVC 4的原始碼進行除錯","tags":["ASP.NET MVC"]},"fields":{"slug":"/2012/12/02/ASP-NET-MVC-使用ASP-NET-MVC-4的原始碼進行除錯/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/ASP-NET-MVC-使用ASP-NET-MVC-4的原始碼進行除錯.md"}}}}