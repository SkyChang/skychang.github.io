{"componentChunkName":"component---src-templates-page-js","path":"/2012/11/27/ASP-NET-MVC-將舊專案升級成-NET-4-5時，發生MSB3247錯誤/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"ASP.NET MVC - 將舊專案升級成.NET 4.5時，發生MSB3247錯誤","date":"27 November 2012","author":"Sky Chang","excerpt":null,"tags":["ASP.NET MVC","Visual Studio"],"coverImage":null},"id":"82e16ad3-8e47-5659-becd-b60b37657e83","html":"<p>最近因為將ASP.NET MVC專案升級成.NET4.5，結果就發生了以下這個錯誤，主要原因是因為有組件使用了不同版本的.NET而造成衝突。</p>\n<p><a href=\"http://lh6.ggpht.com/-zSS8_TaELCQ/ULRGcPb5akI/AAAAAAAAFVY/hfFuvupEmwM/s1600-h/image%25255B3%25255D.png\"><img src=\"http://lh4.ggpht.com/-JtATwU1UfgU/ULRGdE8nXzI/AAAAAAAAFVg/-2n9cAlAXqM/image_thumb%25255B1%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>詳細的錯誤如下 : </p>\n<blockquote>\n<p>C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Microsoft.Common.targets(1578,5): warning MSB3247: 在同一個相依組件的不同版本之間發現衝突。 </p>\n</blockquote>\n<p>那這個到底怎麼發生的呢?，我們稍微還原一下案發現場 ( 學一下黑暗大XDD )。</p>\n<p>這個專案，原本是架構在.NET Framework 4之下，也是從ASP.NET MVC 3升級上來的，而我們希望，將此專案改成.NET Framework 4，也就是大算把目標Framework改成，.NET Framework 4.5。</p>\n<p><a href=\"http://lh5.ggpht.com/-tOOWn8IRIUg/ULRGgSDHk6I/AAAAAAAAFVo/95RRE1Y3XjU/s1600-h/image%25255B8%25255D.png\"><img src=\"http://lh6.ggpht.com/-Av3XJKPYbqg/ULRGhnLv5qI/AAAAAAAAFVw/Kb6HecEuatw/image_thumb%25255B4%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>當然，改完後，沒出現甚麼問題，但是按下編譯的時候，第一次，就會出現如下圖錯誤。( 第二次以後就不會出現警告了… )</p>\n<p><a href=\"http://lh3.ggpht.com/-4nTAsIQC_Zw/ULRGjJ-aNTI/AAAAAAAAFV0/MK9devBPMnk/s1600-h/image%25255B12%25255D.png\"><img src=\"http://lh3.ggpht.com/-Zm5daeXRj7c/ULRGkLNu-JI/AAAAAAAAFWA/8BkEdQEa4EI/image_thumb%25255B5%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>但老實說，這個錯誤訊息，真的看不出個所以然，所以我們要先改一下，讓這個錯誤訊息輸出多一點的資訊，我們使用選擇Visual Studio的工具，選項，就可以打開下面的視窗；之後我們在MSBuild 專案組建輸出詳細等級，從最小改成詳細。</p>\n<p><a href=\"http://lh3.ggpht.com/-FFLV3JW0CAQ/ULRGkyQTe7I/AAAAAAAAFWI/oUnCkvQDR7w/s1600-h/image%25255B17%25255D.png\"><img src=\"http://lh3.ggpht.com/-OrPixzRMVq8/ULRGmXTlFVI/AAAAAAAAFWQ/oZ5xKHnHAd8/image_thumb%25255B8%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>在一次的建置後( 記得要改回.net 4.0再改回.net 4.5才會再次出現警告 )，就可以發現，原來是system.net.http這個組件的關係。</p>\n<p><a href=\"http://lh4.ggpht.com/-BaqfEN7u0Mk/ULRGn83IFnI/AAAAAAAAFWY/_L1sGVK_-6Q/s1600-h/image%25255B21%25255D.png\"><img src=\"http://lh5.ggpht.com/-QXEah9_mveo/ULRGo7ulRaI/AAAAAAAAFWc/MeiM50bStpA/image_thumb%25255B10%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>知道後就好處理了，接下來，我們請出Google做查詢，結果果然查到，已經有人回報這個問題。</p>\n<p><a href=\"http://lh4.ggpht.com/-qHu6Pf8gKok/ULRGpu3926I/AAAAAAAAFWk/5uZA3aDjDo8/s1600-h/image%25255B26%25255D.png\"><img src=\"http://lh6.ggpht.com/-Dx5YIO77rHU/ULRGrD-FIBI/AAAAAAAAFWw/rT5olp-qyNc/image_thumb%25255B13%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，我們當然就是去看一下專案檔的內容，我們選擇了要升級.NET 4.5出錯的專案，並選擇卸載專案。</p>\n<p><a href=\"http://lh4.ggpht.com/-GT3ylIECCBU/ULRGsdxugMI/AAAAAAAAFW4/Dg-nzomL0Eg/s1600-h/image%25255B33%25255D.png\"><img src=\"http://lh6.ggpht.com/-5uWN4CKhpyg/ULRGtGuZdxI/AAAAAAAAFXA/ccrW7bwNtJQ/image_thumb%25255B16%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來在選擇編輯。</p>\n<p><a href=\"http://lh3.ggpht.com/-86ZC7AmqCjI/ULRGusswSaI/AAAAAAAAFXE/gwqIapMntm0/s1600-h/image%25255B40%25255D.png\"><img src=\"http://lh6.ggpht.com/-xgh7yb_IkAs/ULRGvQHEKiI/AAAAAAAAFXM/mAlJ_3s19ms/image_thumb%25255B19%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>我們就可以找到目前System.Net.Http是2.0.0.0。</p>\n<p><a href=\"http://lh4.ggpht.com/-69sYvG8vJJc/ULRGwCXDpKI/AAAAAAAAFXU/EEv5H27v5GA/s1600-h/image%25255B48%25255D.png\"><img src=\"http://lh4.ggpht.com/-K3M3adoV8xI/ULRGxKWn36I/AAAAAAAAFXc/rbMtL7Tl0Vo/image_thumb%25255B23%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>而今天，剛好<a href=\"http://www.microsoft.com/visualstudio/cht/downloads#d-visual-studio-2012-update\">Visual Studio 2012 update 1</a>已經正式釋出，所以小弟也順便開一個新的ASP.NET MVC 4專案，來比對看看，目前新的專案，是如何參考的，如下。</p>\n<p><a href=\"http://lh6.ggpht.com/-l5_v_u0vqC8/ULRGye4EvRI/AAAAAAAAFXo/R25DBLCa0XU/s1600-h/image%25255B52%25255D.png\"><img src=\"http://lh3.ggpht.com/-4bSqZ7xPX3k/ULRGzj0QOSI/AAAAAAAAFXs/3ai8oHhfhH8/image_thumb%25255B25%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>既然新版的寫法都不一樣了，我們當然就使用新版的吧XDD，所以我們就把參照改成如下。</p>\n<pre class=\"brush: xml;\">&lt;Reference Include=\"System.Net.Http\"&gt;\n&lt;/Reference&gt;\n&lt;Reference Include=\"System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL\"&gt;\n  &lt;HintPath&gt;..\\packages\\Microsoft.AspNet.WebApi.Client.4.0.20710.0\\lib\\net40\\System.Net.Http.Formatting.dll&lt;/HintPath&gt;\n&lt;/Reference&gt;\n&lt;Reference Include=\"System.Net.Http.WebRequest\"&gt;\n&lt;/Reference&gt;\n</pre>\n<p>這樣，就不會有任何問題了~~</p>\n<h4>參考網址</h4>\n<ul>\n<li><a href=\"http://connect.microsoft.com/VisualStudio/feedback/details/733213/warning-generated-for-default-asp-net-mvc-4-project\" title=\"http://connect.microsoft.com/VisualStudio/feedback/details/733213/warning-generated-for-default-asp-net-mvc-4-project\">http://connect.microsoft.com/VisualStudio/feedback/details/733213/warning-generated-for-default-asp-net-mvc-4-project</a></li>\n</ul>","excerpt":"最近因為將ASP.NET MVC專案升級成.NET4.5，結果就發生了以下這個錯誤，主要原因是因為有組件使用了不同版本的.NET而造成衝突。 image 詳細的錯誤如下 :  C:\\Windows\\Microsoft.NET\\Framework\\v4.0.3031…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"ASP.NET MVC – ASP.NET MVC 4 2012 Fall Update","tags":["ASP.NET","ASP.NET MVC","Azure"]},"fields":{"slug":"/2012/11/08/ASP-NET-MVC-–-ASP-NET-MVC-4-2012-Fall-Update/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/ASP-NET-MVC-–-ASP-NET-MVC-4-2012-Fall-Update.md"},"previous":{"frontmatter":{"path":null,"title":"TFS -  刪除不需要的使用者","tags":["TFS"]},"fields":{"slug":"/2012/11/27/TFS-刪除不需要的使用者/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/TFS-刪除不需要的使用者.md"}}}}