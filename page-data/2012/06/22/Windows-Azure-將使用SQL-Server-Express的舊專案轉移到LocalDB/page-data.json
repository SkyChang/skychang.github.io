{"componentChunkName":"component---src-templates-page-js","path":"/2012/06/22/Windows-Azure-將使用SQL-Server-Express的舊專案轉移到LocalDB/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Windows Azure -  將使用SQL Server Express的舊專案轉移到LocalDB","date":"22 June 2012","author":"Sky Chang","excerpt":null,"tags":["Azure","SQL Server","Visual Studio"],"coverImage":null},"id":"4333849b-16dd-5d48-90ef-c559d29d7d20","html":"<p>最近因為太愛用Visual Studio 2012 RC了( 主要是因為他的黑色介面XDD )，再加上Azure SDK可以正常的支援了，所以也將很多專案慢慢地轉到Visual Studio 2012 RC上來 ( 其實是一兩個實驗用的專案… )，而新的Windows Azure，預設會使用IIS Express，而資料庫呢，則會使用LocalDB，所以第一次開啟使用SQL Server Express的舊專案的時候，又沒裝SQL Server Express的話，他會跳出這個視窗。</p>\n<p><a href=\"http://lh6.ggpht.com/-tdBNsZvcjCQ/T-SNCxDiruI/AAAAAAAADSw/uDRCXnMbDVo/s1600-h/Image.png\"><img src=\"http://lh4.ggpht.com/-YjCaKoSv9bg/T-SND3YgLsI/AAAAAAAADS4/XWgJ1MKczHU/Image.png?imgmax=800\" alt=\"圖片 1\" title=\"圖片 1\"></a></p>\n<blockquote>\n<p>Web 專案 'xxx' 需要SQL Server Express，該程式未安裝這部電腦上。Vistual Studio 2012的建議資料庫引擎為SQL Server LocalDB Express。… </p>\n</blockquote>\n<h4>如何解決</h4>\n<p>首先，如果對於LocalDB不了解的話，可以看Rico大的這篇<a href=\"http://www.dotblogs.com.tw/ricochen/archive/2011/10/23/45675.aspx\">文章</a>和這篇<a href=\"http://www.dotblogs.com.tw/ricochen/archive/2011/10/24/46094.aspx\">文章</a>；然後我們就開始進行轉換的步驟吧!</p>\n<h4>從伺服器總管匯入資料庫!</h4>\n<p>雖然上圖的說明說，可以點兩下進行升級，但小弟沒試過就是了，小弟是參考MSDN的升級流程；首先，我們在Visual Studio 2012開啟伺服器總管。</p>\n<p><a href=\"http://lh4.ggpht.com/-7lHdYYHca34/T-SNEhLpOoI/AAAAAAAADTA/YRKC9bFUJcY/s1600-h/image%25255B4%25255D.png\"><img src=\"http://lh4.ggpht.com/-34Vl9TUxCpU/T-SNF2fsSQI/AAAAAAAADTI/3zpEndr9Xj0/image_thumb%25255B2%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，我們在伺服器總管的地方，按下下圖的按鈕，來連接到資料庫。</p>\n<p><a href=\"http://lh6.ggpht.com/-Z_XMbEGqUgc/T-SNHOB5lcI/AAAAAAAADTQ/8tDngK7deqE/s1600-h/image%25255B8%25255D.png\"><img src=\"http://lh3.ggpht.com/-T9y_nzMIkqk/T-SNIPLmerI/AAAAAAAADTY/jo0SNnui39o/image_thumb%25255B4%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>我們選擇如下圖的設定。</p>\n<p><a href=\"http://lh5.ggpht.com/-Ks24nrr6uDs/T-SNI6116FI/AAAAAAAADTg/NOH6rWzykYA/s1600-h/image%25255B13%25255D.png\"><img src=\"http://lh3.ggpht.com/-RLBDiTzHSqc/T-SNJ6Tnx5I/AAAAAAAADTo/4XIhniqNeu8/image_thumb%25255B7%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，我們需要加入連線，伺服器名稱是(localdb)\\xx，localdb是連接到LocalDB的字串，後面的XX，可以依據需要使用自己創建Instance，而預設的Instance為v11.0，然後選擇Windows 驗證，再選擇mdf的檔案，最後要Key上邏輯名稱。( 這個mdf檔案，是從SQL Server Express 拷貝出來的，原本預設的目錄，應該會在C:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.SQLEXPRESS\\MSSQL\\DATA\\ 底下，而拷貝出來的時候，別忘記也要把副檔名為log的檔案，一併拷貝出來喔!! )，這時，我們可以按下測試連接試試看。</p>\n<p><a href=\"http://lh3.ggpht.com/-oOgM56zVYcw/T-SNK5j321I/AAAAAAAADTs/4eJasmvRXG4/s1600-h/image%25255B24%25255D.png\"><img src=\"http://lh5.ggpht.com/-K9duBu1cA_0/T-SNMA3k1yI/AAAAAAAADT4/iKeDU-Pun1Q/image_thumb%25255B14%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>如果發生如下圖問題，通常是因為LocalDB沒有啟動。</p>\n<p><a href=\"http://lh4.ggpht.com/-fc_0YrtuXhk/T-SNNMJ_wRI/AAAAAAAADUA/DlU3K4q3SKw/s1600-h/image%25255B28%25255D.png\"><img src=\"http://lh5.ggpht.com/-lzcJS9HSQTo/T-SNOLmMuTI/AAAAAAAADUI/cMuY7jxBJXQ/image_thumb%25255B16%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>而如果出現下圖，是正常的，那我們只要回到加入連線的畫面( 也就是上上圖 )，然後按下確定，就可以升級了；但我們這邊先假設LocalDB沒啟動，所以我們來看看LocalDB怎樣啟動吧。</p>\n<p><a href=\"http://lh3.ggpht.com/-2ipEKfqVWrI/T-SNO4R3f-I/AAAAAAAADUQ/pGRDaqmgbbo/s1600-h/image%25255B32%25255D.png\"><img src=\"http://lh3.ggpht.com/-aGsyrHZunNw/T-SNPkHgT3I/AAAAAAAADUY/HWIPy_d7OVE/image_thumb%25255B18%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<h4>啟動LocalDB</h4>\n<p>首先，我們必需進入命令模式來啟動LocalDB，可以使用CMD，或是PowerShell；指令在C:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\底下的sqllocaldb，我們可以鍵入sqllocaldb info來看看目前有哪些Instance，如下圖，目前有Study4TwAzure和v11.0，如果你想要建立一個xxxx的Instance，可以用create指令。</p>\n<p><a href=\"http://lh6.ggpht.com/-DepN7giYEiU/T-SNQtXnbKI/AAAAAAAADUg/vF-kOzOO-JA/s1600-h/image%25255B36%25255D.png\"><img src=\"http://lh3.ggpht.com/--X701ks2-_Y/T-SNRwYz2DI/AAAAAAAADUo/zG97okLxk3U/image_thumb%25255B20%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>如果要起啟動，我們可以下sqllocaldb s “xxx”來進行啟動。</p>\n<p><a href=\"http://lh4.ggpht.com/-ODTNLdv2RQw/T-SNSWQKZUI/AAAAAAAADUw/gb58awX3DPo/s1600-h/image%25255B40%25255D.png\"><img src=\"http://lh4.ggpht.com/-6_fNYqXgfNg/T-SNTiK9SdI/AAAAAAAADU4/hxje6QJkBQo/image_thumb%25255B22%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>我們也可以用sqlllocaldb i “xxx”來查看目前Instance是否已經啟動了。</p>\n<p><a href=\"http://lh5.ggpht.com/-WtTGJlG0Dr0/T-SNUn4CGbI/AAAAAAAADVA/ZLlEc4yf1LM/s1600-h/image%25255B44%25255D.png\"><img src=\"http://lh5.ggpht.com/-CfQNA4ih8dY/T-SNWGTEoxI/AAAAAAAADVI/wnxQCXWp1Sc/image_thumb%25255B24%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<h4>回到加入連線並完成升級</h4>\n<p>我們可以在按按看測試連接按鈕，如果出現下圖，雖然是錯誤，但只少可以確定LocalDB已經啟動起來了。</p>\n<p><a href=\"http://lh6.ggpht.com/-yQQhnBTp3ls/T-SNW1PGVaI/AAAAAAAADVQ/C0KljO5DXUI/s1600-h/image%25255B52%25255D.png\"><img src=\"http://lh6.ggpht.com/-DETV0GmwVhk/T-SNaAZtdcI/AAAAAAAADVY/z1nPcC_Cb9I/image_thumb%25255B28%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，我們只要回到加入連線的畫面，並按下確定，就會出現下圖，問我們是否要立即升級資料庫檔案。</p>\n<p><a href=\"http://lh4.ggpht.com/-knWliYTCa0s/T-SNbNWPxpI/AAAAAAAADVg/Wwz-ovLoQjM/s1600-h/image%25255B53%25255D.png\"><img src=\"http://lh5.ggpht.com/-yHZHKAp4MV0/T-SNcKckGFI/AAAAAAAADVo/9wKatuue3WM/image_thumb%25255B29%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>最後，我們就可以從伺服器總管看到資料庫被掛上去了，當然，程式的連線字串，也別忘記調整喔!!</p>\n<p><a href=\"http://lh5.ggpht.com/-aJ_CTo3Tb1w/T-SNc0fRLFI/AAAAAAAADVs/ewJoaRXoLIg/s1600-h/image%25255B57%25255D.png\"><img src=\"http://lh5.ggpht.com/-I7JaYK59g3M/T-SNecZTEKI/AAAAAAAADV4/smNWA667V6I/image_thumb%25255B31%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這樣就完成了!!</p>\n<h4>後記</h4>\n<p>使用LocalDB的好處非常多!但因為還有像<a href=\"http://www.dotblogs.com.tw/ricochen/Default.aspx\">Rico</a>、<a href=\"http://caryhsu.blogspot.tw/\">Cary</a>、<a href=\"http://www.dotblogs.com.tw/regionbbs/\">小朱</a>、<a href=\"http://www.dotblogs.com.tw/jamesfu/\">James</a>等等，這些神人在，小弟就不多介紹LocalDB了，以免誤人子弟XDD；而這整個過程，雖然很簡單，MSDN也有中文的文件，但想說還是一邊弄一邊截圖( 也變成一種習慣了= = )，這樣大家按圖施工，速度也會比較快，也希望能幫助到需要的大家，謝謝。</p>\n<h4>參考資料</h4>\n<ul>\n<li><a href=\"http://msdn.microsoft.com/zh-tw/library/hh873188%28v=vs.110%29\" title=\"http://msdn.microsoft.com/zh-tw/library/hh873188%28v=vs.110%29\">http://msdn.microsoft.com/zh-tw/library/hh873188%28v=vs.110%29</a></li>\n<li><a href=\"http://msdn.microsoft.com/zh-tw/library/hh510202.aspx\" title=\"http://msdn.microsoft.com/zh-tw/library/hh510202.aspx\">http://msdn.microsoft.com/zh-tw/library/hh510202.aspx</a></li>\n<li><a href=\"http://www.dotblogs.com.tw/ricochen/archive/2011/10/23/45675.aspx\" title=\"http://www.dotblogs.com.tw/ricochen/archive/2011/10/23/45675.aspx\">http://www.dotblogs.com.tw/ricochen/archive/2011/10/23/45675.aspx</a></li>\n<li><a href=\"http://www.dotblogs.com.tw/ricochen/archive/2011/10/24/46094.aspx\" title=\"http://www.dotblogs.com.tw/ricochen/archive/2011/10/24/46094.aspx\">http://www.dotblogs.com.tw/ricochen/archive/2011/10/24/46094.aspx</a></li>\n</ul>","excerpt":"最近因為太愛用Visual Studio 2012 RC了( 主要是因為他的黑色介面XDD )，再加上Azure SDK可以正常的支援了，所以也將很多專案慢慢地轉到Visual Studio 2012 RC上來 ( 其實是一兩個實驗用的專案… )，而新的Windows Azure…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Visual Studio 2012 - 超好用套件VSCommands 11","tags":["Visual Studio"]},"fields":{"slug":"/2012/06/20/Visual-Studio-2012-超好用套件VSCommands-11/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Visual-Studio-2012-超好用套件VSCommands-11.md"},"previous":{"frontmatter":{"path":null,"title":"Windows Azure -  Windows Azure Cache的High Availability","tags":["Azure"]},"fields":{"slug":"/2012/07/02/Windows-Azure-Windows-Azure-Cache的High-Availability/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Windows-Azure-Windows-Azure-Cache的High-Availability.md"}}}}