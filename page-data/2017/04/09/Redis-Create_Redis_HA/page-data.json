{"componentChunkName":"component---src-templates-page-js","path":"/2017/04/09/Redis-Create_Redis_HA/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Redis - 在 Windows 上建立高可用性的 Redis","date":"09 April 2017","author":"Sky Chang","excerpt":null,"tags":["Redis","Windows"],"coverImage":null},"id":"62b8faec-5f51-543e-87fb-3e16ed66615f","html":"<h2>前言</h2>\n<p>首先，這篇要感謝公司的架構師 Harry、好友饅頭和 Jamis，提供了非常的多 Redis 經驗。</p>\n<p>其實 Redis 的相關文章已經有非常非常非常多，不光是對岸，甚至國內大家也已經有大量的文章產出了，\n也已經是一個非常成熟的 Open Source 產品，而最近，因為剛好有要建立高可用性的 Redis 的需求，\n所以就在這邊，把整個過程寫下來，畢竟人年紀大了，很容易忘東忘西...</p>\n<h2>Redis HA</h2>\n<p>在 Redis 的建置上，最簡單的，當然就是單機一台，單機一台只要去官網下載，下載完畢後，安裝，\n並且把設定檔設定完，基本上就可以進行運作。</p>\n<p>接下來比較複雜的建設，大概就是 Cluster 和 HA 了；在 Redis Cluster 指的是當資料 I/O 過於龐大，\n如果一台沒辦法處理如此龐大的資料量，這個時候，就可以透過 Cluster 的機制，將資料做切分，\n並依據 Redis 內部的機制，算出要放到哪一台 Redis Server；換言之，在 Redis 的 Cluster，\n指的是多台資料做分流，而非當作備援。</p>\n<p>說到備援，也就是今天的主題，Redis 的高可用性 ( HA )，目的是希望當我們使用 Redis 的情況下，\n當主要進行資料處理的那台 Server 掛掉的時候，可以快速的切換到備援機而不中斷\n( 其實還是可能會有短暫的中斷和出錯 )，讓服務能持續地進行，而不影響；\n其次，因為 Redis 主要是將資料存放於 Memory ，所以當整台機器服務當掉的時候，也可能會有資料遺失，\n所以透過 HA，也可以自動地將 主 ( Master ) 和 從 ( Slave ) 的資料進行同步。</p>\n<p>當然，如果要更複雜，就可以搭配 Cluster 和 HA ，這樣就可以規劃出，既可以處理大量 I/O ，\n又可以擁有高可用性的服務環境。</p>\n<p>有興趣的可以參考這篇<a href=\"http://stackoverflow.com/questions/31143072/redis-sentinel-vs-clustering\">文章</a> </p>\n<p>最後，在 Redis HA 的架構下，其實大家習慣稱為 Reids Sentinel ( 哨兵 )，為什麼稱為 Sentinel (哨兵)，\n其實原因很簡單，因為要有一台 Sentinel (哨兵) Server，來幫忙仲裁，決定目前哪台還活著，哪台可以提供服務，\n換言之，以 Redis Sentinel 的架構來說，至少需要三台 Server，Master、Slave 和 Sentinel，\n由 Sentinel 來進行 Master 與 Slave 的監控，當 Master 掛點的時候， Sentinel 會將 Slave 變更為 Master，\n而原本死翹翹的 Master 經過修復重新開機後，復活後，Sentinel 會將原本的 Master 改為 Slave。</p>\n<p>沒錯，這就是 Sentinel 的功能，監控著哪台活著，哪台死掉。</p>\n<p>看到這邊，對，聰明的你，你一定會有一個疑問，如果 Sentinel 自己偷懶，或是死掉怎麼辦!?\n所以，在官方文件裡面，官方也建議要有 \"奇數\" 的 Sentinel 來保持 Sentinel 的可用性。</p>\n<p>為何要 \"奇數\" 呢，那是因為，仲裁機制的關係，如果是 2台 Sentinel 的情況下，其中一台說 Master 死掉了，\n另外一台說，沒有，他活著好好的，那...到底要聽誰的呢 ??</p>\n<p>所以才會需要 \"奇數\" 的 Sentinel，目的就是希望可以透過表決的方式，來證明 Master 死掉了。\n( 所以如果有三台，只要兩台投 Master 掛了，那就符合了切換的程序，其實官方也建議 Sentinel 至少三台... )</p>\n<p>所以這又衍生一個問題，所以我們建立高可用性，是否至少要 5 台 Server ...\n其實也不然，就如這篇<a href=\"http://stackoverflow.com/questions/31143072/redis-sentinel-vs-clustering\">文章</a> 的發問者問的一樣，\n我們也可以把 Sentinel 裝在 Master 和 Slave 裡面，這樣只要三台 Server 一樣可以完成，\n但也如同那篇文章所敘述的，這不一定是個好主意，也可能有很多不確定的因子...\n同樣的，透過 Docker run Redis 也不失為一種手法，但無論怎樣的手法，都會有優缺點，這邊小弟就不探討此塊。</p>\n<p>而這篇文章，主要會用三台 Server 來進行 Reids Sentinel ( HA ) 的建置。\n其中兩台就是單純的 Master 和 Slave，最後一台則是只裝 Sentinel。</p>\n<p>小弟這邊使用 Azure，開了三台 VM 來完成這次的實作，分別是 </p>\n<ul>\n<li>Cache-1 - 10.0.0.4</li>\n<li>Cache-2 - 10.0.0.5</li>\n<li>Sentinel - 10.0.0.6</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/97f02c699cd30ac8021b143a9d3685c5/450ce/00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACV0lEQVQ4y01STW/TQBDNH2mT2LF3Hdvrb5u6+W5DaRAiUKkqICHgUrVC4oCokBBHLpz4x483m7jNYTS7s7Nv5s2bXlVVWK/XWCwWyLIMSikE4wBB8GTj8djGy7JEkiSYzWY2prW2795IIY4NiqJAT5I2m41NlkfXdeE4jrXuPBwOrTfGWKA5i4uX2Gg0QtF4iE24A/R9//GjeLm3kzlmizOcTE5gEoP5co3z55dQ7Eh5HnzmaXo5h4xtrwrkWYQ83wNKFU8SfQ/9oyHuf77Gx7tLTBY13n/6gC+39/j89Zq0fGS+Rh3HKMIQhn8TGVHfQRNGqMjyEbADlS7LZzHmZy0p1Hi1vcb2ZoXN1QTKJYBWaNoWOemNmC+m0wwVx1EJZRm2AHUmBQbHDpbrKUwaI01zDPsu5usWk2mByPWQpCnp5VitVhBRz67e4bSsUFLUnigloErpvSmqpwisLLjnjeB7PoJQw0QBMh1YQFFbhBEhh/0jVBxB3VG2ovSP4fKho67UbhTyrnl2HBeK95TF6qaxior6LsXUcYKKc7WUfaHsOri4fcD21z8MmCTiiKLOoI+8neHl3YMtqhkXEcwhZXa1entA2WHiOR+2337jxY+/cNx9hwLIruvzDS6+/4HHcWh2mDFuSFcoy16GpCrFqijadSifZQ5VkaOmSYJQ7cQqmVTkGRfX2P3LmNuQsnQ2GAzs/qpg/ES5WxWPgz9coW623V3OMkO7e6QrazNfLnf+zQ3aokTJwr2IrUpXhyaxmBUfY/ucmL6hnZBuS5sSTLws+oRe2PwHvMuS8BdIo+MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"00\"\n        title=\"00\"\n        src=\"/static/97f02c699cd30ac8021b143a9d3685c5/78d47/00.png\"\n        srcset=\"/static/97f02c699cd30ac8021b143a9d3685c5/56d15/00.png 200w,\n/static/97f02c699cd30ac8021b143a9d3685c5/d9f49/00.png 400w,\n/static/97f02c699cd30ac8021b143a9d3685c5/78d47/00.png 800w,\n/static/97f02c699cd30ac8021b143a9d3685c5/450ce/00.png 1171w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>安裝第一台 Redis Server</h2>\n<p>每次要安裝程式，第一步驟是甚麼?，當然就是要去官網進行下載，所以我們可以先去 Redis 的<a href=\"https://redis.io/\">官網</a>溜溜，\n而我們可以從官網的地方，找到<a href=\"https://redis.io/download\">官網下載</a>，但是大家可能會發現，\n基本上官網只提供的是 Linux 的版本；這是正確的；因為 Redis 最初的發展，就是在 Linux 上，\n而官網提供的，基本上也只有 Linux 的相關版本；甚至，如果有任何的問題與服務，官方也只 support Linux 而已喔。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4eb43c2eb706e35e1fa9135a74dec4bd/f9c26/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABFElEQVQoz32Tia6EMAhF/f//dGnrvu88D0lNR+cNSUMFerhojc7zFOw4DqmqSsqylDzPpSgK3WdZJkmSaKyua60h17SN+LMY+2VZJPJB/DAMMs+zbNumfhxHLfJGnBVaeJ5mUagwjmNVBYi4NVbVtG2rDchR03WdNtezwXnn3KdCa62OaIxRiB85TdML0CvIP1O77/ut9AUkAIiVXWuaphtoLqV9399NAPN8PkZumuYT6JwVg8oLyNiM65vwUailjmYeEgJ5vw+g01FYfFEOruuqhXgMTy4EeU/uBdSRrzEZCxAeMP5pT4UvICOijvGAkOPFk2OFkJ8KfZA7x/Xwd/Gbil+xFxAQyvgg7P9T9PxDwj/lD5qnWjOoSqPDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/4eb43c2eb706e35e1fa9135a74dec4bd/78d47/01.png\"\n        srcset=\"/static/4eb43c2eb706e35e1fa9135a74dec4bd/56d15/01.png 200w,\n/static/4eb43c2eb706e35e1fa9135a74dec4bd/d9f49/01.png 400w,\n/static/4eb43c2eb706e35e1fa9135a74dec4bd/78d47/01.png 800w,\n/static/4eb43c2eb706e35e1fa9135a74dec4bd/64756/01.png 1200w,\n/static/4eb43c2eb706e35e1fa9135a74dec4bd/42cbc/01.png 1600w,\n/static/4eb43c2eb706e35e1fa9135a74dec4bd/f9c26/01.png 2880w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>但我們今天要裝的是 Windows 版本，那 Windows 版本在哪邊勒？<a href=\"https://github.com/MSOpenTech/redis\">Windows 版本的位置在此</a></p>\n<p>其實大家也不用擔心，雖然是 Windows 版本，但是整個團隊，是 Microsoft 的 Open Tech 團隊所維護，\n甚至所有的 Redis for Windows 的 Source Code，全部都放在 GitHub 上，也是完全的 Open Source。\n相同的，如果是使用 Windows 版本的 Redis ，就必須要來此 GitHub 尋求支援了喔。</p>\n<p>我們可以從底下位置，找到 Windows 版本的下載。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ac0950d3575790fd4e1b28b60c92879/f9c26/02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABT0lEQVQoz4WTcU+DMBDF9/2/nMb4x6LRGI1uQGkpA1pK4XmvCqtx07LLrR3367vXbodlAYdtTzDGYPABvRvRDT7F4B3GMF2NeZ5T/SKccRyxW76BXT+g2t/j9uEVN49vuHv+wO3TO17KPRZ50mf5yuvgfK1nDiGcgd57lGWJQ1GgUjXcGOBDRJzjVkg1hK/zi8B8p6axUHUNJcCyUqi1kbUGWmsJAy3r1VHBKJ2KryrMgbUU00vClLHQtkPbDXDOYeh7nEyDXvxmR0lxBuTGW8ukH6XdQtouijJlmp5Z9mvkCgmnZbt8YVXItitp2aR2jSiWLKoZmwXynSJyeNu2Zw85+OLhcBQPFaxtEzCFALkZYcyEsXiaph9KOd8Uxhg3Jas/a/C3yJzNc+8uXhteykqUMXggzvntJP/y7yqQ2Vq2I1enHWH7sJ3if5H/Uz4BOTJZ40iBg9kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"02\"\n        title=\"02\"\n        src=\"/static/9ac0950d3575790fd4e1b28b60c92879/78d47/02.png\"\n        srcset=\"/static/9ac0950d3575790fd4e1b28b60c92879/56d15/02.png 200w,\n/static/9ac0950d3575790fd4e1b28b60c92879/d9f49/02.png 400w,\n/static/9ac0950d3575790fd4e1b28b60c92879/78d47/02.png 800w,\n/static/9ac0950d3575790fd4e1b28b60c92879/64756/02.png 1200w,\n/static/9ac0950d3575790fd4e1b28b60c92879/42cbc/02.png 1600w,\n/static/9ac0950d3575790fd4e1b28b60c92879/f9c26/02.png 2880w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://github.com/MSOpenTech/redis/releases\">Windows 版本 Redis 下載</a>點進去後，我們就可以看到兩個，\n一個是 msi，一個是 zip，兩個內容很雷同，唯一的差別是， msi 會自動幫你把 Redis 註冊到 Windows Service 服務，\n未來你就可以透過 UI 來停止或啟動，而 zip 裡面則是解開就可以直接執行 exe 使用\n( 當然，你也可以下載 zip ，然後自己註冊成 Windows Service )</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5d213f9122d52452b935fa09a7bc682b/f9c26/03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABJUlEQVQoz42T2U7EMAxF5/8/iC8B8cYDgkHTvWkWZ+vF7iJKCQyRrhxZ8dG13V5iSogp4+mlxnul4L2HdQRjCY6jIwJxTuTIw4ewvF/rdmWEmND1PS7gM88zHh4Nnq8O/znyfhdEW65tW1yOSZc0BqfQ64RKhSV/LM45r5ATeL8Hds8Ot8ecl3bIE8bJoGoHKDVhmiYMwwhjDI+D241xAYvOrjfgV2I/Aun7bmmhrhuO3aKu66G1XuASE8/vB3A+tSUalcKNQQ1DBL4CVoi1lpflOGdBvLC7DiUaLhyV4WL65uLeospAnk31UeH17QareespotSFSOZZWMppWzmhqUdcG4KediCKQAEUgeeWHQVoE5iVfnV3XGLR4dlp6SP+CyxR/rJP9Vxhd6JuGzIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"03\"\n        title=\"03\"\n        src=\"/static/5d213f9122d52452b935fa09a7bc682b/78d47/03.png\"\n        srcset=\"/static/5d213f9122d52452b935fa09a7bc682b/56d15/03.png 200w,\n/static/5d213f9122d52452b935fa09a7bc682b/d9f49/03.png 400w,\n/static/5d213f9122d52452b935fa09a7bc682b/78d47/03.png 800w,\n/static/5d213f9122d52452b935fa09a7bc682b/64756/03.png 1200w,\n/static/5d213f9122d52452b935fa09a7bc682b/42cbc/03.png 1600w,\n/static/5d213f9122d52452b935fa09a7bc682b/f9c26/03.png 2880w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>了解下載位置後，接下來，我們進入　Cache-1 的 VM 裡面，並且下載 msi，然後，我們將下載下來的 msi 點兩下進行安裝。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/117b1785fd6012e32d90929f56b287f8/d28e0/04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACKElEQVQ4y51U246aUBQl6ff1sX/Spkm/ZB76CfPS55k6xiY2VSdyEWSgIwoVUOSmOIyCrO5z0I7TsaktycraNxbZ5+yN0BJ1mCMbjjfHyJ7CclzOjr/AelMieyyecOSzXLJ+xCrfIn3Y8FgQLyGs8w2ACtVuh2K7wWq15PaW7DRJkKYJ5ySOEEcR5ySOOeIorO0kruPEQk5yKAuceob6EM1mE7e9W0iyDEkU0e128a3TwXA4RL/fR6/Xgywr+NpuU0yHML68hPHmNayPFzAmNmRJRqNxA8/zYVkj3DQa0OjlIAgwm83g+z7lPMzn81/+ATOKCZ33b/HplQDpwzvIholWq4Xrz7VInud0BBmyLCNeYblcItv7zGaxA5gfU/tCSgc5a39BkecvWnZsG5IkQVFkiMSsTZHaFiWRbI1yIjRNg6qq1I2FxSKE8FA+CbDLqKoKO2L2aFR4dX3FX1YUhQtqmooBxXVdx2Aw4DFVHfAadhQCu37sSi5UMdGq4mJlWdIXF1iEIW+HIU3Tl/aemR/RFNSCR0LHgqyAISTRc/FXQVZ0LHyw/4R/EjwHzwQPOCV4fsvb3ckt+W/BFS01zQsflWMURfFMKOF7ne53O6bbrZntNxtoluOD7c5DvtQRW/bfEO2LmaBpmlBp7vQ7A9q9A1GreeoHsCcTvseO40Dwgoj/TWL+10hOguXG4zFMw8D9yMJ324NqjGBOXPhBCHf6AwblXNfFT62TrvmJBNe8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"04\"\n        title=\"04\"\n        src=\"/static/117b1785fd6012e32d90929f56b287f8/78d47/04.png\"\n        srcset=\"/static/117b1785fd6012e32d90929f56b287f8/56d15/04.png 200w,\n/static/117b1785fd6012e32d90929f56b287f8/d9f49/04.png 400w,\n/static/117b1785fd6012e32d90929f56b287f8/78d47/04.png 800w,\n/static/117b1785fd6012e32d90929f56b287f8/d28e0/04.png 990w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>到這一步的時候，記得勾選 [Add the Redis Installation folder to the PATH environment variable.]，\n因為等下我們會使用到 Redis 的 Cli ，所以把 Redis 加入到環境變數 PATH 裡面，就可以不用到 Redis 底下的目錄來執行。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2f7f9b75fe6e8094e5e72ebc1fd3cb57/d28e0/05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACJ0lEQVQ4y41U247TQAzNt/KEkPg2PgEkJCRe2m13k0nSJEubmcn92qRdCvRgD6kIq+3SSEe2c/HYPsexPq89fJMJ0qrFTmeIkxxbiuO0wOH0C+P3nxgI44RhFnfjE4bjCcOPM44Aym6EVTYdXOFAODaiMIQgvypL3HSdz8b0X7/AffcGpyKD1Q5H7LZbBJRsF8dkA2itkee5sUmSoGlaE6dpioIOy/IMWZaZmC/v00d8eP8WKgphFe0eT8cDxgNhHDEMg7Fd16FtWwP25zGjmeyw30MXBXydQFIBls4rPFJm23Gw2WwQUqWu65rq5gmuoWkac9hA6AlWUtSoqwpFUaKkduq6Jr8wPr98C/gbBvumwiTRkEpBEcIogpTStL6ndm5F3/d/Eyoig9uNyfKguboDzfFAc72KZ8957iZhQvrTxOT64cGw3PGJTAqd+D8wMc3UKoNnaikSc0akpNSqCgJI38fO84xl6OmepA7UBPYlvVOTdFpmf0pmKoyDR3jLBcR6DbFawSVrL5fGitUdQmKf73sUb2wb/v09PIK7WKAk/bbT7C6sW4pWrZYxaiLkgmbm10TQNb8isXOFc8atpGz+MMSlv4LmJUxt/pOQWeYZzIf7Ejr6eM9ksO14Q3qKOxOzsFk6bC01JbyI8xpYUkIIUoKEiCTuHB9OGEPRX4n/BUK45h2zKd1sN6+tF/8kgoBYpp0N4xS2H2Gz1UiLClpJ+KwIWtff5Aqu09BXa+wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"05\"\n        title=\"05\"\n        src=\"/static/2f7f9b75fe6e8094e5e72ebc1fd3cb57/78d47/05.png\"\n        srcset=\"/static/2f7f9b75fe6e8094e5e72ebc1fd3cb57/56d15/05.png 200w,\n/static/2f7f9b75fe6e8094e5e72ebc1fd3cb57/d9f49/05.png 400w,\n/static/2f7f9b75fe6e8094e5e72ebc1fd3cb57/78d47/05.png 800w,\n/static/2f7f9b75fe6e8094e5e72ebc1fd3cb57/d28e0/05.png 990w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>預設的 Port 是 6379 ，勾選下面的按鈕，就可以順便加入防火牆。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/deb1072a2faf05a905ef77dd9dc90420/d28e0/06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACHElEQVQ4y5VU247TMBTMt/KEkPg2/gAhISHxgLSwW3Jrbk1zvzhOnZZt6Q5jb1PKsheINJqc2B4fzzmO9fGbhyjNUTQCaVEbrLISZTfg9gjs72B4uv35F+T0A2q3hzrcYQeglROsVkgEyyV8z4XrOkjiGEvfY+yZ765jI0kSPPocj4bGz5/gvHmFfVPBmvZHFEWOMAwRRhHS9doIaARBYDhOYs4p0DQNqqpGXdcmPhwORtD98B7v3r7GOgyYoVTYbbeYpglCCIzjiM1mY3iUEkopEw/DAMn4khXXKI7l3MjLC6zzHFZWtYiYWcxMPB7T8310fY9BLzotPPMMbqxZJ6Ah5YAN5+gErKLp0dcVKqrP6HiknruewVh03R9il5iFNaw0pFdXV6hZjD5N0TLTRoPxDD3W0GOhMz8JPBSdYaXLCE1ZQm13GNUGQh+P/p2hY/rYrVYQbfuy4JoZjtz50nA58+l9pPH/JdiUBUr6VNOvsqrOXPGbRsm4/VdBfeRgcQPfcRCxwu5igUg3OuMlGz1wXXh8r9mTc2Gez3CVoWMRejZ0x6Jc8uW7LpR40C6PwSpaYYzvxYB+eBq6WM8JnQXzuqPxL0/UBdI3xvAoMbEj1Pi7gPOYlVFQN2vPSj+HlEe37e9IVilu/ARfrm1ce/H934l22LZj5piboncRT5g8e6Z/Bj6LlvEmeXGGr7YPJ0xR1C3yLDPXNufYL3eAr8IX7NIWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"06\"\n        title=\"06\"\n        src=\"/static/deb1072a2faf05a905ef77dd9dc90420/78d47/06.png\"\n        srcset=\"/static/deb1072a2faf05a905ef77dd9dc90420/56d15/06.png 200w,\n/static/deb1072a2faf05a905ef77dd9dc90420/d9f49/06.png 400w,\n/static/deb1072a2faf05a905ef77dd9dc90420/78d47/06.png 800w,\n/static/deb1072a2faf05a905ef77dd9dc90420/d28e0/06.png 990w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>如果想限制 Memory 的大小，可以在這邊進行設定，在正式環境建議設定一下。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e8f9b0a47ab2dd06f024f217101e3fe1/d28e0/07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABrUlEQVQ4y5VU206DQBDlW30yJn6bn6CJiYkPPmhVWqgtFFiuLbuw1LSlHGdXSLW2xW5yMoRhz5y5Ydy/jOD4EcJ0gRmL9fPE9eFFKar1FtWqPgzyieUK8nMNuWnwCSATFYw05xiZb3BdFx9jG3meQ5+mQe/Z1toUjw8YXl1gncYwVCQW+JhOp5g6DqI4RpZlSAlJmmI+n2ts6voPX9MGHd3d4ub6Ev7kA0YmJJZVBSklqtYWRQEhCnDOyQqNzr8PWZZgFNhiIXzGYATJHA6psywLtm1rOx6PdQk4zzWpgirFMQjBUVLQgmCoZnB6qdLskLapdkQd6TH8JDcYKUziCCwMdd2CIPgmTRJNvH+hj9xgpDCji6oZiiAmu1gsSGH2R+W/CFXKKneu0DZhP51zSLVCcaDoyqmURlH0i6yXMPxBeEiVIj2L8JjC/cunxuZXl3cK/z8aJwnV2Aje/6FqVklboW0hUMkSkqxoG9n59Kbwtlan4HkeTPMd7szDq+3iaWBiYDnwwgQz2irTHOpvdin3pBvS4KvVDGhfLSfAs2ljOPEQJhn9XAK9sox8X3SouaJRb+zxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"07\"\n        title=\"07\"\n        src=\"/static/e8f9b0a47ab2dd06f024f217101e3fe1/78d47/07.png\"\n        srcset=\"/static/e8f9b0a47ab2dd06f024f217101e3fe1/56d15/07.png 200w,\n/static/e8f9b0a47ab2dd06f024f217101e3fe1/d9f49/07.png 400w,\n/static/e8f9b0a47ab2dd06f024f217101e3fe1/78d47/07.png 800w,\n/static/e8f9b0a47ab2dd06f024f217101e3fe1/d28e0/07.png 990w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>安裝完成後，我們就可以從[服務]底下看到 Redis 的服務已經註冊且已經啟動了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cde8e12c003f539012a7b5ad56ec35f1/a7fe5/08.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAB2HAAAdhwGP5fFlAAAC6ElEQVQozz2S24tVZRjGP/oHgi4Suqi7brrowtNdUOTM3JQOVCNBUdaFZoSB5AEGBRO9LC8EBUlShHZGpk0wsxV0VGpGiKw8zIz7MLP2aa2912mv815rz693rRlb8PCtw7d+7/s876cOfv0tU9fv8OOvN7gyPUt5do7yrT+4PjvPzK25QsU7eS7fvsfMnT/57eY9bs/f58tjp1HPbkI9txH1vKwvbEWdvfATvu8SxSFPtC6Pam0qzR4d08cJEhw/wfIirH6E6fq4fY90MCC/bsz9yxufHuetPcfZsGUC9eLrqO9L16hVFjFNi5qAGrpNGKe0ujbV+godo0erY9DOV72L1urQ1Hv0PY8oismyrIDvOHAO9dIO1MWfZ9CWa+i6Qc+08XyfYTrA7vvUajUc26bX6xLHMbbcB1FC21rbkyQD0mwouIzt5zXUrmnUd6Upqk8WMAz5KUlI05ThMBNgQL2+jOu4UkzHdhws26Hfd4mjkDCMig4LYJawfSpEnUE6FGBzaYlutUriujy9HD9EazTxxZphGFiWjSmyLasonnfrSJGeRBU4NpMPMt65u4oq/TJTAAZxQtjtkoqkPLYMoFKpFtCOxBGKZVMAoXwLgoCBDCaKokJZEnHyr5Av7kqXpSvTa8BBSiJ2V4dDVsVWZ7nB0sNHWPU6eqWCJbabWkNiqLOyslLIkOKmdOw5Fgd/t5mY6qJ+uFougInklwe/um7Z9gKqEkNDAJqs7YVFvJ5JJgXzyeY553vT9R+OPMz4eF4yLF1dtyzd5VPjf2DIwuISmnSlS4auTD+MBwJLCzf9QI5MmuRIUcTOcoA6l6EuXb5WADwJPx9AEPhiO5PDHtBqNTH0TiFXgl+bcl/goRx8h5v/aOy/9DeHLz/m5VNt1ORj1KuvjTM2sYdt7+5m23ufFRp5fx+jH+xn7MOvGP3oEKO7Jhn55Cgju08y+vk3jO07zfjh87yy9wLqbdH4RdSbJ3hm817+A+/8ODP/sqemAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"08\"\n        title=\"08\"\n        src=\"/static/cde8e12c003f539012a7b5ad56ec35f1/78d47/08.png\"\n        srcset=\"/static/cde8e12c003f539012a7b5ad56ec35f1/56d15/08.png 200w,\n/static/cde8e12c003f539012a7b5ad56ec35f1/d9f49/08.png 400w,\n/static/cde8e12c003f539012a7b5ad56ec35f1/78d47/08.png 800w,\n/static/cde8e12c003f539012a7b5ad56ec35f1/64756/08.png 1200w,\n/static/cde8e12c003f539012a7b5ad56ec35f1/42cbc/08.png 1600w,\n/static/cde8e12c003f539012a7b5ad56ec35f1/a7fe5/08.png 2606w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接下來，我們可以從 cmd 裡面輸入</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">redis-cli info </code></pre></div>\n<p>來查看目前 Redis 的狀況。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c54ed9529d4723d5b021de1403049d16/7c5ed/09.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABGElEQVQoz6WSy0rDQBSGJ7fJPaZJJpOkz+FaKbgQuhBfyYVgpW16sUXcu/QRf88MaagQscHFxznMkG/O/BP29PyC5brFqt1gTSxXLbb7A96O79gdjn1tt3tsdsO0xGLxio/PLzDXD2BZFkLOEdk2Auo90wBjbDTXN3dgsm6QpimkEJBZBt9xwElqGAYM0+yrSWumqgM4NIwSzuaPYGVVQxQF8rxAGEWwacqxk6nDVL29fwCrmimEIFkYIggCeJ6nIzidPlpYVk03Yd4LT/DuKqOEsp7iKkmQEFa3cY7O8Iw/hbmQWphOJogowyROdI3jmPpY9wrOHTiU75D0hzArSv2x7/twXffi3H4VCllTfpn+ddTD/PeVvwEFTfpfUoP+ZwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"09\"\n        title=\"09\"\n        src=\"/static/c54ed9529d4723d5b021de1403049d16/78d47/09.png\"\n        srcset=\"/static/c54ed9529d4723d5b021de1403049d16/56d15/09.png 200w,\n/static/c54ed9529d4723d5b021de1403049d16/d9f49/09.png 400w,\n/static/c54ed9529d4723d5b021de1403049d16/78d47/09.png 800w,\n/static/c54ed9529d4723d5b021de1403049d16/64756/09.png 1200w,\n/static/c54ed9529d4723d5b021de1403049d16/42cbc/09.png 1600w,\n/static/c54ed9529d4723d5b021de1403049d16/7c5ed/09.png 1957w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>亦可以使用 Get、Set 等指令來塞入值和取得值</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d9ae78d458ecaace0cfb7a1ad0634e6/7c5ed/10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAA7ElEQVQoz62SzWrCQBSFJ5OfyZgwmU5nEoOIT9FtkUIXhS6Kb+SiYhr7J+rKvUsf8XgTXCgUwdjF4WwuH+dwLpu+z7H4+ib9oCafzSvMqg9U9SeWqw1+V2vyy2pu6nqB7W4PJpMUPvfAGLtZD4/PYIPhCGVZIs8LJEkC3/fBeSN+4pcVRlELfHqdgNmiD2ctsiyDMQZCCHjedYk5hWh8/PIGpo2FlBIxqWvVM6DN+1TXtemUyhAd43cGKn0HrXUn0J/AVGnIOEYQBP9VuYB1DiNa2tDKKY0ibhnl3uXtu1iloHo9iDBETK/QFXgA5rP3gxBBaBUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"10\"\n        title=\"10\"\n        src=\"/static/0d9ae78d458ecaace0cfb7a1ad0634e6/78d47/10.png\"\n        srcset=\"/static/0d9ae78d458ecaace0cfb7a1ad0634e6/56d15/10.png 200w,\n/static/0d9ae78d458ecaace0cfb7a1ad0634e6/d9f49/10.png 400w,\n/static/0d9ae78d458ecaace0cfb7a1ad0634e6/78d47/10.png 800w,\n/static/0d9ae78d458ecaace0cfb7a1ad0634e6/64756/10.png 1200w,\n/static/0d9ae78d458ecaace0cfb7a1ad0634e6/42cbc/10.png 1600w,\n/static/0d9ae78d458ecaace0cfb7a1ad0634e6/7c5ed/10.png 1957w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>到這邊，最簡單的第一台算是建立完成了；但此時的設定是僅支援 Localhost 的，換言之，\n當你想從外面來存取，是會完全被擋住的。</p>\n<p>是低，Redis 的 config ，預設只開放 Localhost，所以接下來，我們要修改一下設定。</p>\n<p>我們要去 Redis 的安裝目錄下，修改 redis.windows-service.conf 這個檔案，\n並且在原本的 bind 127.0.0.1 後面加上這台的私有 ip。</p>\n<p>在預設的情況下，為了安全，Redis 只會監聽 127.0.0.1 這個 IP 位置，所以為了讓他能支援內網，\n所以我們在 127.0.0.1 後面加上這台 ( Cache-1 ) 的私有 IP。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/263c90a38dfb52d702f8064658930a45/4c1d5/11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACXUlEQVQ4y3WTCW/bMAyF/f//1YBtWDu0ado0TZsmdXzLh2T5jo+8kXJcFBsm4IG0In8m+RTrGGlIpZApjbwooXSJoqrRjxPOA2kEaULbj+iGkfZG82x+u6rtB7TdGfdOASvJFKTM0bZn1KS8qJDpCnGWE7zAMUzx4Xh4/vDw7gV0VtHZDk3bEqT71Pl8xkEQME4V4jRHGEu4YUK5RKIqeEJC0H5CYNcPEcWpOSMSSR00UPxhVVxVQuYl9oGC9f3uADeSpjpJbYs4IaUmRiIxexl1EPFzFCO8SiQZdNka2O3TCT/uj/j2YMP6ubKR5RV41XWFIAgghKCXI4RhaKIQEe370FrjcpkwjqOJvMZpwt3WBXNutg6sm8cTUjUDy7JEmqZQbFKWmZyjlNLkdV1jWZdr7MmQ1c7Hr7WD+30E6/fGpQrng1VVGUBHQx6GAf9bl8vFyADJ9fVbgNuNNwPvtj6knoFN0xggt9aSi+xcd3Vw0TRNn9AF+PQeUdsBVu8C1moXEbAxPxZFAd/3zRw5Oo5j5HmeiTwKBn6tcCDg8yHG6jXCw4GA631MV2AGcmWu4xoz2Jg4jq+mzCZxhX8vBr58JHgkzvoYw9ocyISinWdIQ09o+JoqLWmemi720j6Po21ak7M5C5yBr6cMm0OGRwJbWztDXnazy0mCxHUR2TYUVcSus5b58TxZDF1M6ynuXYUXW+LJTmHtTgq6mr9W0PUQNLuUYJryBcjiSvu+/6dlvodHP8ebq2egJ3Lz/+UKCnpR5blpmZVT/lXc9lIhR75mSmbYUYXbU4qXk8AfIhwo4zcq0xoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"11\"\n        title=\"11\"\n        src=\"/static/263c90a38dfb52d702f8064658930a45/78d47/11.png\"\n        srcset=\"/static/263c90a38dfb52d702f8064658930a45/56d15/11.png 200w,\n/static/263c90a38dfb52d702f8064658930a45/d9f49/11.png 400w,\n/static/263c90a38dfb52d702f8064658930a45/78d47/11.png 800w,\n/static/263c90a38dfb52d702f8064658930a45/64756/11.png 1200w,\n/static/263c90a38dfb52d702f8064658930a45/42cbc/11.png 1600w,\n/static/263c90a38dfb52d702f8064658930a45/4c1d5/11.png 2138w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>雖然加上上面那個步驟後，就可以從私有網域進行連線，但我們還是希望多加上一下密碼，\n所以我們可以把如下圖的地方註解掉；將 requirepass foobared 給註解掉，\n其中，foobared 就是密碼；這邊小弟就懶得改嚕。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b05015076bf21f16e610641ce4584478/4c1d5/12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACS0lEQVQ4y2WTiXLiMBBE/f+/tUelNkVICEsIJASw8S3L94ExvT3yOpVDVV26rKeeGdnaBznSNIVOM+RFiYwqqxqX4UoN6AeYcddf0F9Eg1kf98Ze9s7nMx6cHFakNOIkRdV0RmleQmUlglguybHzYuyODlZvDl4cF4rfN02LumlMP6nrOuzCAlYYa4QqhRcmsL0IMo/TEqcgIVRDLjw6Hrwggss1P0oYSQ3NS5XO/6tAkhbYuhrWz9krQYlxJ46iOKGUcZLlBZ10VMs0NCjKimvlqIJjghUvv3084NfdDj8ej7B+z/dcrCCtYRhRFBGmjJKEbjLmNs+QTHOOZa1nzqQNzOHdk0PgG2YbD9bNw97kS1peFPA8DzEPh2EI3/fhui601gTlRtfrFR/bmQW5X59w83AYgbdLG7EuzWZZltB0kdHBBJEXIPO2bU0Efd+bbydwT+CCIOHMX3xYs9XpPeSCQD8IEDJs04voVCQXCFRC/ATkU1oSNFu5+PNkw5qvfSRZPYbMYgS2jZDScfzuTiRjcTgM12/A1S7E/NnHvThcbHl73owOGa5iDjWd4UuuPjaBfQSu9zEW2wgLgq3la/QOLPksAoYX0d1UFFHAC0SS07btvjncHBWWr4S+RbBWe4W0GIFyQKqsVIyYUMlbVVWmWHVdm4JcCPjkkEV5sROs9gke6dRaH/mAy9ZsyiE5fJH/locngBRCetHXJjnduRk2doblgUAnSM3/23UtCr7DqQBaRIcimU+SS6U4UvHxmSk8Oxp/CXs6BPgHNt4rMnRSHPwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"12\"\n        title=\"12\"\n        src=\"/static/b05015076bf21f16e610641ce4584478/78d47/12.png\"\n        srcset=\"/static/b05015076bf21f16e610641ce4584478/56d15/12.png 200w,\n/static/b05015076bf21f16e610641ce4584478/d9f49/12.png 400w,\n/static/b05015076bf21f16e610641ce4584478/78d47/12.png 800w,\n/static/b05015076bf21f16e610641ce4584478/64756/12.png 1200w,\n/static/b05015076bf21f16e610641ce4584478/42cbc/12.png 1600w,\n/static/b05015076bf21f16e610641ce4584478/4c1d5/12.png 2138w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>設定完成後，我們這邊重新啟動一下 Redis 後，新的設定檔就會生效了。</p>\n<p>接下來，大家可以趕快裝一下 Cache-2 這台機器 ( 裝法同上 ) ，裝完後，我們也先不用進行任何設定，\n我們可以直接透過底下命令，連線到 Cache-1 ，並且取得剛剛送進去的 Hello。\n( 備註: Key 值的大小寫是有差的喔 )</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">redis-cli -h 10.0.0.4 -a foobared</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/742608048a993ef8c87a139cbd729259/8d416/13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAp0lEQVQoz+3OPQrCQBCG4clsNpKgZkEU8SK2io0g2Ii3sRBsJJt/k1QewNYTfi6LhUGbgIWFxcMHU7wMHY4nnHWMSCdIoxh5nOCS5laVFfamkwxl3aCoapRV86YwtNa43u6g/iBEEPhQPQ8jKSGJ4Dy5BnUwX6xBk+kMKgwxVgpD34dgBjlOC5sbs3jZNul5Nrja7s2y2+mLT4QQdpeb3XeC/A/+dvABZE/y57DKWLkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"13\"\n        title=\"13\"\n        src=\"/static/742608048a993ef8c87a139cbd729259/78d47/13.png\"\n        srcset=\"/static/742608048a993ef8c87a139cbd729259/56d15/13.png 200w,\n/static/742608048a993ef8c87a139cbd729259/d9f49/13.png 400w,\n/static/742608048a993ef8c87a139cbd729259/78d47/13.png 800w,\n/static/742608048a993ef8c87a139cbd729259/64756/13.png 1200w,\n/static/742608048a993ef8c87a139cbd729259/42cbc/13.png 1600w,\n/static/742608048a993ef8c87a139cbd729259/8d416/13.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>如果，如果，真的想讓這台開放給全世界服務(攻擊)，那必須把 bind 前面加上 # 來註解掉 ( 例: # bind 127.0.0.1 )。</p>\n<p>另外，這邊要特別注意一點，Redis 目前有一個參數為　protected-mode yes ，這是一個 Redis 預設的保護參數，\n如果把 bind 給註解掉 ( 表示開放 )，且又沒設定 Password，那外部怎樣連都會連不通喔。</p>\n<p>所以，要不就是把 protected-mode 設定 no ，要不就是乖乖地給個密碼吧。\n( 把 Protected-mode yes 給註解掉是沒用的喔～ )</p>\n<p>當然，最理想的狀況，就是只提供私有網域，真的想開放，建議還是設定一個密碼比較好喔。</p>\n<p>P.S 如果使用 Azure VM，也別忘了開 Azure VM 的 Endpoint 喔~</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a4ba6b4ce60509a6d469e1529714259/4c1d5/14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAB2HAAAdhwGP5fFlAAACRklEQVQ4y4WTh27bMBRF9f9/VaAp0haxG8dVHDtekWwtUqS2NW/fo6yMNkAJXHAIPLxvyNr6CWKlIFUCnWZQSYY0L9B0PeqW1A2kHlXT0f6q6dtVVdOiutSYOyksLxCQsUZZNSiqmqA54iRHKBMkSYq9J7B/cWHvXWxPHuJY0eULquoyzlfVdY1dmMEKRYxAaHhhDMeLEAqFSOVwfWnWgh5zCMQPnwKJM83mUZ1RVOlVmdlvzgrW17stHF+hKGsKPYGQMaRURoJnArJ4nRcluWmM8vICnZWQBPrxcMTNbI8v9wdY3+YHOszBI89zBIFPoSbI0hQpKUk0siwzZxcKbeh7dF2LYejNnZ72M9vFDXG+2y+wbhdHCDUC+WIYhvB9H0JIyhe5JZVlaVQUhXlE6xHOo2lb/FqdcHt/xGzjw/q5dMhhYT7yBSEEFFWd3fL+/dzS5b9HS1VfrD0wxwDv7DNV9Q2otTYuxnATA2Kx+wk4DIPRBFw++2DO/DmANV/5BCw/OOTWYPDkisNjcb4+A9q7EPMnH/dbAi42IVRavQKjKDJ5m4rA/fU/4OogwJwFga3lVrwCOayIHI6JH0Pns6nK7Pg9dAKujxLLHUH3ESz7IKmf3hzGkhpXcx/K1wLxzGqa5lOHGyeGfYjxQE6t1QvlKx9bIPIj3M1sPP5eI/DO1JOBSQE7ZLdd1/1T5a4fsDsnWDsJlkcCuoGGpn+3aWrqQYHV9gT3FKKuKtTkiHPIzlgX8w9XRrzmFCjK95OrYBPs8RjgD0C1K3H3N+IIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"14\"\n        title=\"14\"\n        src=\"/static/0a4ba6b4ce60509a6d469e1529714259/78d47/14.png\"\n        srcset=\"/static/0a4ba6b4ce60509a6d469e1529714259/56d15/14.png 200w,\n/static/0a4ba6b4ce60509a6d469e1529714259/d9f49/14.png 400w,\n/static/0a4ba6b4ce60509a6d469e1529714259/78d47/14.png 800w,\n/static/0a4ba6b4ce60509a6d469e1529714259/64756/14.png 1200w,\n/static/0a4ba6b4ce60509a6d469e1529714259/42cbc/14.png 1600w,\n/static/0a4ba6b4ce60509a6d469e1529714259/4c1d5/14.png 2138w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>底下是無法存取的情況。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/acd5912fc420f0682088cd6ac3f60faf/99ac4/15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABx0lEQVQoz01Sy27UQBAc2ePxPrx+e8Ze80j4FcQBoQCKIoJ4CcSfcOGAomRxIIQQonwCZz6uqJ61VxxK5enuqe5qj/r0+Qs2wzecnH3FyenG8xnPm/PvON0MOL+4xOWv3/hxde0h34KfI66ub3x8GAbc/vkLlWUFVosF0mSJZD7HYhZjZgzmsUGstf+OwhBRECCOtIfRoc9JLAoD1sZQSuHR4SuoB+s76K3FXt9j3TSwRYF8uUSRJChXqx1XaUpOfa7kt8QlJmdblDAUPDh6A3WPgjWFGqKqa8+WDZxzPu7aFg3PEq/HGjuep5jUzEyEg+N3UHfXPaxcZqEUV1XlxQRyoes6nys4eT02rOtRjGcfYwMThXj++iPUfre1ep8X+4ads2xnuRAmvM3RovA2l+xyTV4gouVnL95CWdehYZeWY1dliZKTZLIbCgtn0oAo8tzzimI5v6eaVPZLVyEFHx9R0HFCx5GrahyfdkRcrIrtnj9Ldjbtd9rxxHLHuXGHLz9ANW3nBZ11Xky6CWpi2puwTDXlxIlwKY6IhqsyOsDT4/e03K69HSmQSzO+w4DvK+Tbm6BDDa23+D8esk5qjdm+w4dPDvEPxSwTTlrboXIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"15\"\n        title=\"15\"\n        src=\"/static/acd5912fc420f0682088cd6ac3f60faf/78d47/15.png\"\n        srcset=\"/static/acd5912fc420f0682088cd6ac3f60faf/56d15/15.png 200w,\n/static/acd5912fc420f0682088cd6ac3f60faf/d9f49/15.png 400w,\n/static/acd5912fc420f0682088cd6ac3f60faf/78d47/15.png 800w,\n/static/acd5912fc420f0682088cd6ac3f60faf/64756/15.png 1200w,\n/static/acd5912fc420f0682088cd6ac3f60faf/42cbc/15.png 1600w,\n/static/acd5912fc420f0682088cd6ac3f60faf/99ac4/15.png 1959w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>最後，我們還是把設定還原到底下這三個狀態。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">bind 127.0.0.1 10.0.0.4\nprotected-mode yes\nrequirepass foobared</code></pre></div>\n<h2>設定 Master 和 Slave</h2>\n<p>目前我們已經裝完了 Master 和 Slave，其中 Master 有簡單的設定一些參數，\n而 Slave 目前還沒設定任何參數；然後 Sentinel 連裝都還沒裝...</p>\n<p>在開始前，我們先回到 Master ，我們可以先下一下這個指令，來查看複寫的資訊。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">redis-cli -h 127.0.0.1 -a foobared  info replication</code></pre></div>\n<p>如下圖，我們可以看到，目前這台是 Master，而連線的 Slave 為 0\n( Connected_Slave:0)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec3bfb39d3701119b9208dfaf1c59c26/8d416/16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAyElEQVQoz+WQuQ7CMBBE1zY4JhICRUAQQvwGLUdBEVFwfA4FEg0ioUBcSaCn5BMH26IIdBA6iqdZra3Z2aXFcoX1JkIUbXE6HJHGCZKzIbZ1+qyvycX2d/sDdvrfO2EY4nK7g8qVKqSUEESgnHR7I1Cr3UHT91Gr11FyXXAhwDi3EGMvmJ5550YzFHUgYzgcz0GNZssaep5nUY4DZgw+SCb0EKODYAqSyrUrK6XstG9W5U/DfjDTykXu2/FsQuKFnxn2g8k/Gj4AUtb04tu95WoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"16\"\n        title=\"16\"\n        src=\"/static/ec3bfb39d3701119b9208dfaf1c59c26/78d47/16.png\"\n        srcset=\"/static/ec3bfb39d3701119b9208dfaf1c59c26/56d15/16.png 200w,\n/static/ec3bfb39d3701119b9208dfaf1c59c26/d9f49/16.png 400w,\n/static/ec3bfb39d3701119b9208dfaf1c59c26/78d47/16.png 800w,\n/static/ec3bfb39d3701119b9208dfaf1c59c26/64756/16.png 1200w,\n/static/ec3bfb39d3701119b9208dfaf1c59c26/42cbc/16.png 1600w,\n/static/ec3bfb39d3701119b9208dfaf1c59c26/8d416/16.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接著，我們也可以觀察一下，預計要變成 Slave 的這台電腦的狀況，我們可以發現，\n目前她還是 Master。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d323549e5749010a9847de08274ac6a0/99ac4/17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAvklEQVQoz9WRzQ7BQBSF73SaMZoIaVKaRjwOHgCteBULCwn9Qap/dhYSr3m0Q4TERmpj8eWczf3uzQwtV2v4QYRtySYIsfFD7A4xkrxAmp9UPntWIE4zHNP8jTjJEER7nC9XUKvdQUMIEFFthqMxyOkPYPd6sCwLhmFA07QnjLEPnb/kHfE4yJsvQF3bUULTNBVSSjX8zWWcc5VT1wMJaagNUjaVqOq1hKTptd/u34SM/0w4mZVCXVS/+iuhixsj2/WxJ4FjfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"17\"\n        title=\"17\"\n        src=\"/static/d323549e5749010a9847de08274ac6a0/78d47/17.png\"\n        srcset=\"/static/d323549e5749010a9847de08274ac6a0/56d15/17.png 200w,\n/static/d323549e5749010a9847de08274ac6a0/d9f49/17.png 400w,\n/static/d323549e5749010a9847de08274ac6a0/78d47/17.png 800w,\n/static/d323549e5749010a9847de08274ac6a0/64756/17.png 1200w,\n/static/d323549e5749010a9847de08274ac6a0/42cbc/17.png 1600w,\n/static/d323549e5749010a9847de08274ac6a0/99ac4/17.png 1959w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>所以目前沒有任何一台 Slave 與我們的 Master 連線 ( 兩台目前都是 Master )，\n所以我們將開始進行 Slave 的設定，我們進入 Slave，並且打開 redis.windows-service.conf 這個檔案，\n並切找到 # slaveof 這行，拿掉註解，修改成 slaveof 10.0.0.4 6379 ( 代表 Master 的 ip 位置和 Port )，\n接著，找到 # masterauth，改成 masterauth foobared ( 代表 Master 的密碼 )。\n另外，Bind 127.0.0.1 也要改成 Bind 127.0.0.1 10.0.0.5，也別忘記把 requirepass foobared 取消註解，\n讓 Slave 也可以透過 10.0.0.5 並且搭配密碼 foobred 來連入喔。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3891667e54739afdb34bef932e48812a/c371b/18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABNElEQVQoz4VSi46DMAzj/79y0mgpfcAGbOsD8JLs2NDuTlSyHGjiOk2rYXoglxkxFWjT4lxrKG1Qq4a4gTEWprVoiHVj4EOPlMufeMSMKqUMXus8I1gLa6jIOXRdh+F6RU4JSRARY8RMef+tdV1RxfgSzLcbvFIIWku8T2Jsa1kWLPLvsyegvZn2qvjjkBM1CSqCddRioyVWdIAh13VdQ2uFtm1RSnkftudlLzhTUn0+SzEL932PaZoEN3I8jqPE9/tdCg8FMyW2pxM8OQmEQve1bi0SuIiZ3R0IvuzzZTsaSghBBsLsvRd2NKQQupdjcnrQcnl/XC4XXGmyzFs8DIMcwFcwUvwt9kswpU+C947cWHHEd8ls+SlZHlIjvBc8bHlrjwsdtbu1Hoi3t8lv8VtoL/gEg+MIPcDXXCEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"18\"\n        title=\"18\"\n        src=\"/static/3891667e54739afdb34bef932e48812a/78d47/18.png\"\n        srcset=\"/static/3891667e54739afdb34bef932e48812a/56d15/18.png 200w,\n/static/3891667e54739afdb34bef932e48812a/d9f49/18.png 400w,\n/static/3891667e54739afdb34bef932e48812a/78d47/18.png 800w,\n/static/3891667e54739afdb34bef932e48812a/64756/18.png 1200w,\n/static/3891667e54739afdb34bef932e48812a/42cbc/18.png 1600w,\n/static/3891667e54739afdb34bef932e48812a/c371b/18.png 1654w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>是低，就是那麼簡單，就完成了，然後我們重開 Slave 後，回到 Master 看一下狀態。\n可以發現，目前 Slave 已經連上了!!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/967ce012ac4e4f8bff3fd47c5971a0de/8d416/19.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAzUlEQVQoz+2QPQ/BQBzG/73SVrXVViL1PvgQVmIwiIH4NhaJRZSIvhrsVt/w8S8GJokaDb88d5e73z13tFytsdnusPH3OAQhwji9E8QJwiR9wPMoOSGIEhyjmPOdbM33fZwvV1DVdlDWVMhEoJz0B2NQr9NF2/PQYhzThFUqMTosXX+MOQ1VhSRJEEJAyDLnO0VFuQtH0wWo5jXQbNRRZ6HrutA0DYIPZxukJ5+ayXxJlsPJHGRUbJjcLEPlJt88VbwKSRRy/91f+EvhDDcwDvXSU+xn4gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"19\"\n        title=\"19\"\n        src=\"/static/967ce012ac4e4f8bff3fd47c5971a0de/78d47/19.png\"\n        srcset=\"/static/967ce012ac4e4f8bff3fd47c5971a0de/56d15/19.png 200w,\n/static/967ce012ac4e4f8bff3fd47c5971a0de/d9f49/19.png 400w,\n/static/967ce012ac4e4f8bff3fd47c5971a0de/78d47/19.png 800w,\n/static/967ce012ac4e4f8bff3fd47c5971a0de/64756/19.png 1200w,\n/static/967ce012ac4e4f8bff3fd47c5971a0de/42cbc/19.png 1600w,\n/static/967ce012ac4e4f8bff3fd47c5971a0de/8d416/19.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>然後回到 Slave 看一下，也可以發現，他從 Master 變成 Slave 了!!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5476e20408e2da358f2681d8e0f905be/8d416/20.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAA7UlEQVQoz6WSwWrCQBRFZzKTOBBIJ8lIkrH2N7qtuCkIbsTPEVwUqo6lxMbYRT/ArV94O5lKUQRBs7jcx1sc7n08Mpu/YWXWWKzWeF8ap4/PEl/1DlX97fx/3u5QVltsqvpMpZUxBj/7A0guY0jRAScEpKWeX15Beo9P6CqFoigghABjDNTz4FlRSp2fz+zE/+QHgQMOx1OQbq6RJgm01pBSwvf9m5M1IRofjCYWmBVQKkViofdW9U6Bue4jzzILVTZhDM55O+BDnCK2VaMoQhiGrnJzr7uBPBDgdhEcD9u6MqGs9btcJLy14jXgL03S9tiqOq/UAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20\"\n        title=\"20\"\n        src=\"/static/5476e20408e2da358f2681d8e0f905be/78d47/20.png\"\n        srcset=\"/static/5476e20408e2da358f2681d8e0f905be/56d15/20.png 200w,\n/static/5476e20408e2da358f2681d8e0f905be/d9f49/20.png 400w,\n/static/5476e20408e2da358f2681d8e0f905be/78d47/20.png 800w,\n/static/5476e20408e2da358f2681d8e0f905be/64756/20.png 1200w,\n/static/5476e20408e2da358f2681d8e0f905be/42cbc/20.png 1600w,\n/static/5476e20408e2da358f2681d8e0f905be/8d416/20.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接下來，我們從 Master 塞一個 HelloWorld ，然後連到 Slave，取得資料看看。\n我們全部都用 Slave 這台來操作，結果可以參考如下圖；所以這樣設定完，兩台 Redis 就會擁有複寫的功能了，\n而且我們可以透過 Master 來讀寫，而 Slave 來進行讀的動作了，不過這邊要特別注意，\nMaster 提供了讀寫，但 Slave 是僅供讀取而已，是不能寫入的...</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86c2e50a88103ee46d19576f8044d50c/8d416/21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAyUlEQVQoz63PuwrCMBiG4T+HtmoNtEFFvBFXxUUQXMS7cXAQtE2rtKiTF+DqFX6GgFAPIJQOL9+SPCS02e6QZjkSk+OQZm7T7Ogy+Qn7JHVbXq4ozheU5+tXhc0Yg9v9AWqHClJwSClARGA2qtl4Mgf1hyNorRHFMZRSIMYghADn/CNR2fc833fgbLkG6d7AgjFiC4ad0L5UwvM8t0EQOPzfy15nposVSEUaqtt1l+t+lVdBYrw29BsUsmGQNw0y0Swo/RYYaw58Auv38+FwzYV4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"21\"\n        title=\"21\"\n        src=\"/static/86c2e50a88103ee46d19576f8044d50c/78d47/21.png\"\n        srcset=\"/static/86c2e50a88103ee46d19576f8044d50c/56d15/21.png 200w,\n/static/86c2e50a88103ee46d19576f8044d50c/d9f49/21.png 400w,\n/static/86c2e50a88103ee46d19576f8044d50c/78d47/21.png 800w,\n/static/86c2e50a88103ee46d19576f8044d50c/64756/21.png 1200w,\n/static/86c2e50a88103ee46d19576f8044d50c/42cbc/21.png 1600w,\n/static/86c2e50a88103ee46d19576f8044d50c/8d416/21.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>所以，到這邊，如果 Master 掛掉了，會自動把 Slave 切換成 Master 嗎!?\n當然不...所以下一個章節，就是第三台機器登場。</p>\n<h2>設定　Sentinel</h2>\n<p>我們完成了 Master 和 Slave 的複寫，接下來，就是要建構 Sentinel，Sentinel 的其中兩個功能，\n就是監控和切換，他會監控 Master 是否死掉，死了之後，就會把 Slave 變成 Master ( 這樣就可以持續寫入 )，\n而原本的 Master 復活後，就會被改成 Slave。</p>\n<p>同樣的，我們到 Windows 版本的 GitHub <a href=\"https://github.com/MSOpenTech/redis/releases\">下載</a>，\n但這次我們下載 zip 檔案，下載回來後，找個地方解壓縮，小弟是直接丟在桌面 ( 不好習慣喔~ )\n這邊不使用 msi 的原因是因為，使用 msi ，他會自動幫我們註冊到 Windows 的服務，\n但我們要啟動 Sentinel ，需要不同的參數，所以我們就不使用 msi 了，\n然果真的覺得 Windows 服務比較威，那可以<a href=\"http://hadb.me/2016/10/23/redis-windows-sentinel/\">參考這邊</a>，註冊進 Windows 服務。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1244a706cd8b88276073397d475bb28a/07e0b/22.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABgklEQVQ4y5VTDXOjIBDN//93N9PO3bSJSU0CGFEEREDRVyQmaXrTTrLO42OXeexzlxWVJdb1OzKxwU5tsZUbFIZBtx3azkKl2cFYjz5M8F9w3o/ofJ/OrPcZVtorlIaAdwzcMqzpP2QkQ34gKDmHMS36vscwDPjZpjRujgSr737XeeguQNrpnF3bLsdjeJoiLvP9erY/2WkmXILxCyGkrAg5QtTV7Z4rwc+Y7XXHzhleHH3vUfAGrDaglUHnwhx8mJCK9p4wOIvjoUR+lPg4CCihcVXwAHKu7gmnMaBSDkwO4HpAGKenMjxU+kaYMI4wboC2I9oo91nCQuhvVb7W8/FifCWs5fIPfewzpTSs60Gj3L/EQZjwFGkiVAthiFI7a2OVh+i02J8UZGvhvU/4valvlvP/JANaR7JGgMd+nHuSJ1Soa4Gy5FGJSpfMr2dW5uLapb3HG5VYSSlxQdM02O52yPd7UMZAKY1gYGxGsfhYbHyKoiiSn5D4bKsqXfSyZfgEfFv2Du3x2FAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"22\"\n        title=\"22\"\n        src=\"/static/1244a706cd8b88276073397d475bb28a/78d47/22.png\"\n        srcset=\"/static/1244a706cd8b88276073397d475bb28a/56d15/22.png 200w,\n/static/1244a706cd8b88276073397d475bb28a/d9f49/22.png 400w,\n/static/1244a706cd8b88276073397d475bb28a/78d47/22.png 800w,\n/static/1244a706cd8b88276073397d475bb28a/64756/22.png 1200w,\n/static/1244a706cd8b88276073397d475bb28a/42cbc/22.png 1600w,\n/static/1244a706cd8b88276073397d475bb28a/07e0b/22.png 1929w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接下來，我們在解開壓縮的那個目錄，增加一個 sentinel.conf 檔案，到時候 Sentinel 的設定就會寫在裡面，如下。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">port 26379\nbind 127.0.0.1 10.0.0.6\nsentinel monitor master1 10.0.0.4 6379 1\nsentinel down-after-milliseconds master1 5000\nsentinel failover-timeout master1 900000\nsentinel parallel-syncs master1 2\nsentinel auth-pass master1 foobared</code></pre></div>\n<ul>\n<li>port : 代表 Sentinel Port 的位置，通常大家都會用 26379</li>\n<li>bind : 這很重要，至少要加上 127.0.0.1，不然會因為通訊的原因，而造成不斷的去嘗試切換 Master 和 Slave，如果有三台 Sentinel ，後面也要加上這台的 IP，真的不想加這行，也可以把安全模式關閉，改成　protected-mode no </li>\n<li>sentinel monitor : 要監控的 Master ip 和 port，其中 master1 是自訂名稱。</li>\n<li>down-after-milliseconds : 如果在幾毫秒內， 没有回應 sentinel ， 那麼 Sentinel 就會將這台標記為下線 SDOWN （ subjectively down )</li>\n<li>failover-timeout : 轉移過程多久沒完成，算失敗。</li>\n<li>parallel-syncs 在轉移過程，有多少台會和 Master 同步資料， 數字越小，完成轉移的時間越長 </li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/366d6708e9934adc9d386e6d6e177b41/b13f9/23.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABl0lEQVQoz5WS627UMBCF8/6PhMQvQCoSErRIBbrQdpuNs7G9iZ37ZeOPSSBtxUWIkY7G8tjnnBk7evFR0bQ1bdsyDCMw8/qL4e2NJi8cNve4sqHpBpp+lDzi6hbf9Cu2/aodBD3RTWwwRuOdWwlDCCjjOGpL4Ty+ajkVJVaQ6ILU5DykmuvdHbs4QWWatuvEULfmqCgs3nvO5zNaa1Si2CdGLiQcjjnaOrLMkufiVtZOiL0rRUxyWa9Ci2juKvTJE1WVo+87cQbaWOL4gQ+fY15e7IgzxxL6eESplKIoVvGubkDOh0cE5jlwnmei3FeM47RezKTNJDlwfXvkzVVMqixiCa2UCMUcBEsXo7S2Mq2x5R8RbWTLtkozTtawP5y4eHVF+m0P08jUD4KeaRgI00SQ8SyuNnfPEU3T+adQIBMH6v6O2093vLu8x/j2Dx6eIoTfK0I4PRZnmcFCHJua9zsjA2/W2jKfX538DdHyuhvhpqdsw+VXy8l3/G9EddOtDp63YKXVfZqT+1r+Zk/X9fIT/o2yLPkOfDsDXd37zIMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"23\"\n        title=\"23\"\n        src=\"/static/366d6708e9934adc9d386e6d6e177b41/78d47/23.png\"\n        srcset=\"/static/366d6708e9934adc9d386e6d6e177b41/56d15/23.png 200w,\n/static/366d6708e9934adc9d386e6d6e177b41/d9f49/23.png 400w,\n/static/366d6708e9934adc9d386e6d6e177b41/78d47/23.png 800w,\n/static/366d6708e9934adc9d386e6d6e177b41/64756/23.png 1200w,\n/static/366d6708e9934adc9d386e6d6e177b41/42cbc/23.png 1600w,\n/static/366d6708e9934adc9d386e6d6e177b41/b13f9/23.png 2557w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>上面完成後，我們還要回到 Master 的機器，設定 redis.windows-service.conf，\n找到 # masterauth，改成 masterauth foobared ( 代表 Master 的密碼 )。\n需要這樣的原因，是因為，到時候 Master 會被切換成 Slave，如果沒有設定 masterauth foobared，\n到時候這台機器會無法和未來的 Master 進行連線。\n( 設定完也不忘記重新啟動 )</p>\n<p>完成後，我們就可以啟動 Sentinel</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">redis-server.exe sentinel.conf --sentinel</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d8831c45665c7bbbe6c0672680f87b43/8d416/24.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABEUlEQVQoz5WRwU6EMBCGS0tboYABjPFNvGq8mJh4MT7NXjyY7K5lN1kDePEBvPqEvzNkIbsioiRfOkwnHzODWDw9Y+0rLNceq5eqi7fVFpXfHLGhXNu8oW5a7OoGr3U7sCO893j/+ISgBz+hCBMEQxzsEb9weXULEZoTKKWgwhBaa8JASoksy3BWlt1ZFAVO6TR0x7V8L6Ua0MZ0wpv7RwhtIygq4MKQpAzHhopYxh8RM51xPZ/Xdw/Hwh6WckFAI7Owf59CHgqVtiMhjzTX1aRQhhqSOuk7O5RxhwznvseTwvL8Ai6O4ZyDSxySJOl2F1MuS1Oke/I874iiaLSC0ch/GYt/krV2fmQh1b/2NSf8Ai9e9hKXSe+kAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"24\"\n        title=\"24\"\n        src=\"/static/d8831c45665c7bbbe6c0672680f87b43/78d47/24.png\"\n        srcset=\"/static/d8831c45665c7bbbe6c0672680f87b43/56d15/24.png 200w,\n/static/d8831c45665c7bbbe6c0672680f87b43/d9f49/24.png 400w,\n/static/d8831c45665c7bbbe6c0672680f87b43/78d47/24.png 800w,\n/static/d8831c45665c7bbbe6c0672680f87b43/64756/24.png 1200w,\n/static/d8831c45665c7bbbe6c0672680f87b43/42cbc/24.png 1600w,\n/static/d8831c45665c7bbbe6c0672680f87b43/8d416/24.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>測試轉移</h2>\n<p>接下來，我們可以測試看看轉移，我們可以先關閉 Master，然後可以從 Sentinel 看到此變化。\n馬上就可以看到，他已經把 Salve 切換到 Master 了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b1353db85f6bf8dc8485241fd1018a4/8d416/25.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABZUlEQVQoz61R207CUBAsPb2SQm+0FExA9CN89ZIYEy8xURP/xRcTEwWKiRLkyQ/w1S8czyxQQF9tMpnZ7Z7ZPXuMh8cnDMcTPA/HeBmVglE5EWaeGJWvwm/TGaazOd5nHwLqRTxHWZb4/PqGoT/8Fw4Oz2Ao24VlWbBtW0CtlIJpmlJEXavV1tB5/qNut9vw63UofYa1J1d3MCzXkwIabZoR1HV9wHGc6j+xakZNY1PXMT46v4HRG+whTRKkaYosywRFUVS5OE4k12q10Gw24fu+NNq86rbh7tqw0+nI4TzPK4MwDIWjKBL+bfbHsD/YFzMx7HYrMyLPcom5K4I60c3jOKrWwAZKLXd4qXeYF10EQYCg0dCFMRqaOYnkNKgJ5hlz4sW0odQz5sPQ8PT6fvvKnILMSVZTy7RLZkwzgrv0PE/gOK4YHl/cwtjp9aVTsjSNdEfyKt7UZE5KExryhWWH5nqHP5kTBWHHeMmvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"25\"\n        title=\"25\"\n        src=\"/static/5b1353db85f6bf8dc8485241fd1018a4/78d47/25.png\"\n        srcset=\"/static/5b1353db85f6bf8dc8485241fd1018a4/56d15/25.png 200w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/d9f49/25.png 400w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/78d47/25.png 800w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/64756/25.png 1200w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/42cbc/25.png 1600w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/8d416/25.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>我們也可以看看原本的 Salve，已經變成 Master 了，而且因為原本的 Master 沒啟動，\n所以現在沒有任何一台 Salve。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b1353db85f6bf8dc8485241fd1018a4/8d416/25.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAABZUlEQVQoz61R207CUBAsPb2SQm+0FExA9CN89ZIYEy8xURP/xRcTEwWKiRLkyQ/w1S8czyxQQF9tMpnZ7Z7ZPXuMh8cnDMcTPA/HeBmVglE5EWaeGJWvwm/TGaazOd5nHwLqRTxHWZb4/PqGoT/8Fw4Oz2Ao24VlWbBtW0CtlIJpmlJEXavV1tB5/qNut9vw63UofYa1J1d3MCzXkwIabZoR1HV9wHGc6j+xakZNY1PXMT46v4HRG+whTRKkaYosywRFUVS5OE4k12q10Gw24fu+NNq86rbh7tqw0+nI4TzPK4MwDIWjKBL+bfbHsD/YFzMx7HYrMyLPcom5K4I60c3jOKrWwAZKLXd4qXeYF10EQYCg0dCFMRqaOYnkNKgJ5hlz4sW0odQz5sPQ8PT6fvvKnILMSVZTy7RLZkwzgrv0PE/gOK4YHl/cwtjp9aVTsjSNdEfyKt7UZE5KExryhWWH5nqHP5kTBWHHeMmvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"25\"\n        title=\"25\"\n        src=\"/static/5b1353db85f6bf8dc8485241fd1018a4/78d47/25.png\"\n        srcset=\"/static/5b1353db85f6bf8dc8485241fd1018a4/56d15/25.png 200w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/d9f49/25.png 400w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/78d47/25.png 800w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/64756/25.png 1200w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/42cbc/25.png 1600w,\n/static/5b1353db85f6bf8dc8485241fd1018a4/8d416/25.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>如果再把 Master 啟動回來，我們可以發現，原本這台的資訊還是 Master ，但沒過多久，\nSentinel 就會把 Master 變成 Salve。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d8f810b99148c5b1cc38c661e5f1339/8d416/27.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAA70lEQVQoz62STU/CQBCGp/tRlZK2tAt1V0z4F1wxHjwYL4R/44WEC7EkRlpaD9y9+g9ftxsQ8Wbr4clM5vDsO5Ol5+UK65cN1vkGr9sCZfWOoqpR7GrXl1X9zbas8FbubD2nmeV5jv3HJygJY/SvLiE9D0TUiensATS5ucXYGOgsQ9TrQXAOjzEwi2cfafojzMEP9YT0fSe8f1qAjDZQcQw9GmGYphBC/DkZtyGaevc4B6lMQymFxMrarsp+CrUZ49qu20gHNmmbhGfCaJA6URiGCIIAUkp3u9ZC7l+4G/iHw3ZemRjv/F1+CcW/Cr8AQrX3GKLmZRsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"27\"\n        title=\"27\"\n        src=\"/static/8d8f810b99148c5b1cc38c661e5f1339/78d47/27.png\"\n        srcset=\"/static/8d8f810b99148c5b1cc38c661e5f1339/56d15/27.png 200w,\n/static/8d8f810b99148c5b1cc38c661e5f1339/d9f49/27.png 400w,\n/static/8d8f810b99148c5b1cc38c661e5f1339/78d47/27.png 800w,\n/static/8d8f810b99148c5b1cc38c661e5f1339/64756/27.png 1200w,\n/static/8d8f810b99148c5b1cc38c661e5f1339/42cbc/27.png 1600w,\n/static/8d8f810b99148c5b1cc38c661e5f1339/8d416/27.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>回到新的 Master ，我們依樣可以看到，和新的 Salve 連線也從新連好了。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/21c08429801d56e4b21ff5623d1a88c7/8d416/28.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAyklEQVQoz+3QwQ7BMBwG8K5l6xYR68xsEeEpXImLRJzEyzhJJMZKZMw4eABXT/ipLcRV5ujwy5e06ff/p2S+WCKMpLJFuJFYrSPs9jGO6Tl3yiXpBYckRZycsvwUK1JKXG93ELcmUOUcuqaBEFJIrz8C6bY7aHkegkYDjhAwDEPh4DxnWVZ2pqmBlFJQxvKk7K2s61nhcDJTGzYD+L4Px6mj7rowTTN7/M1mTA155mA8BalUaxC2DVt5lr0uv0E/CwktFf67f+FvCx8ipfWFhtV0HQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"28\"\n        title=\"28\"\n        src=\"/static/21c08429801d56e4b21ff5623d1a88c7/78d47/28.png\"\n        srcset=\"/static/21c08429801d56e4b21ff5623d1a88c7/56d15/28.png 200w,\n/static/21c08429801d56e4b21ff5623d1a88c7/d9f49/28.png 400w,\n/static/21c08429801d56e4b21ff5623d1a88c7/78d47/28.png 800w,\n/static/21c08429801d56e4b21ff5623d1a88c7/64756/28.png 1200w,\n/static/21c08429801d56e4b21ff5623d1a88c7/42cbc/28.png 1600w,\n/static/21c08429801d56e4b21ff5623d1a88c7/8d416/28.png 1958w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接下來，我們可以看看程式如何搭配。</p>\n<h2>程式連線</h2>\n<p>待補</p>\n<h2>後記</h2>\n<p>待補</p>\n<h2>參考資料</h2>\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/31143072/redis-sentinel-vs-clustering\">http://stackoverflow.com/questions/31143072/redis-sentinel-vs-clustering</a></li>\n<li><a href=\"https://dotblogs.com.tw/supershowwei/2016/02/03/123740\">https://dotblogs.com.tw/supershowwei/2016/02/03/123740</a></li>\n<li><a href=\"http://blog.mkfree.com/posts/5257683d479e1dd72e7c1b4e\">http://blog.mkfree.com/posts/5257683d479e1dd72e7c1b4e</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000002680804\">https://segmentfault.com/a/1190000002680804</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000002685515\">https://segmentfault.com/a/1190000002685515</a></li>\n<li><a href=\"http://mrcto.blog.51cto.com/1923168/1319542\">http://mrcto.blog.51cto.com/1923168/1319542</a></li>\n<li><a href=\"https://dotblogs.com.tw/supershowwei/2016/02/03/123740\">https://dotblogs.com.tw/supershowwei/2016/02/03/123740</a></li>\n<li><a href=\"http://www.jianshu.com/p/51f0cf57df7d\">http://www.jianshu.com/p/51f0cf57df7d</a></li>\n<li><a href=\"https://redis.io/topics/sentinel\">https://redis.io/topics/sentinel</a></li>\n<li><a href=\"http://www.redis.cn/topics/sentinel.html\">http://www.redis.cn/topics/sentinel.html</a></li>\n<li><a href=\"http://www.voidcn.com/blog/fighterandknight/article/p-6338983.html\">http://www.voidcn.com/blog/fighterandknight/article/p-6338983.html</a></li>\n<li><a href=\"http://hadb.me/2016/10/23/redis-windows-sentinel/\">http://hadb.me/2016/10/23/redis-windows-sentinel/</a></li>\n<li><a href=\"http://www.voidcn.com/blog/fighterandknight/article/p-6338983.html\">http://www.voidcn.com/blog/fighterandknight/article/p-6338983.html</a></li>\n<li><a href=\"http://www.redis.cn/topics/sentinel.html\">http://www.redis.cn/topics/sentinel.html</a></li>\n<li><a href=\"http://bbs.redis.cn/forum.php?mod=viewthread&#x26;tid=715\">http://bbs.redis.cn/forum.php?mod=viewthread&#x26;tid=715</a></li>\n<li><a href=\"https://redis.io/topics/sentinel\">https://redis.io/topics/sentinel</a></li>\n<li><a href=\"https://dotblogs.com.tw/supershowwei/2017/02/27/163018\">https://dotblogs.com.tw/supershowwei/2017/02/27/163018</a></li>\n<li><a href=\"https://github.com/StackExchange/StackExchange.Redis\">https://github.com/StackExchange/StackExchange.Redis</a></li>\n<li><a href=\"https://dotblogs.com.tw/supershowwei/2017/02/27/163018\">https://dotblogs.com.tw/supershowwei/2017/02/27/163018</a></li>\n</ul>","excerpt":"前言 首先，這篇要感謝公司的架構師 Harry、好友饅頭和 Jamis，提供了非常的多 Redis 經驗。 其實 Redis 的相關文章已經有非常非常非常多，不光是對岸，甚至國內大家也已經有大量的文章產出了，\n也已經是一個非常成熟的 Open Source…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"ASP.NET Core - 移除在 macOS 上的 .Net Core SDK","tags":["ASP.NET","macOS","ASP.NET Core","Visual Studio Code",".NET Core"]},"fields":{"slug":"/2017/02/12/ASP-NET-Core-Uninstall_Net_SDK/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/ASP-NET-Core-Uninstall_Net_SDK/ASP-NET-Core-Uninstall_Net_SDK.md"},"previous":{"frontmatter":{"path":null,"title":"Azure - 在 Azure 上使用 Azure Container Service 來執行 Kubernetes","tags":["Azure","Container","ACS","Kubernetes","Docker","Linux"]},"fields":{"slug":"/2017/07/19/Azure-Azure_Container_Service_Kubernetes_First/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Azure-Azure_Container_Service_Kubernetes_First/Azure-Azure_Container_Service_Kubernetes_First.md"}}}}