{"componentChunkName":"component---src-templates-page-js","path":"/2017/07/30/Azure-Azure_Container_Service_Kubernetes_First_Create/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Azure - Azure Container Service - Kubernetes 第一次的部署","date":"30 July 2017","author":"Sky Chang","excerpt":null,"tags":["Azure","Container","ACS","Kubernetes","Docker","Linux"],"coverImage":null},"id":"0481934e-43ef-5e03-ab9c-4910fc8d7a37","html":"<h2>警告</h2>\n<p>Azure Container Service 已經成 Azure Kubernetes Service，這篇已經棄用</p>\n<p>新文章請參考<a href=\"http://skychang.github.io/2020/03/21/Azure-Create_Azure_Kubernetes_Service/\">這篇</a></p>\n<h2>前言</h2>\n<p>上一篇我們花了一點時間，透過 Azure 的 Container Service 來搭建了一個 Kubernetes，而這篇，我們會來看看，如何操作 Kubernetes。</p>\n<h2>關於 Kubernetes</h2>\n<p>在開始操作前，我們稍微補上一下，上一篇沒有提到的，Kubernetes。</p>\n<p><a href=\"https://kubernetes.io/\">Kubernetes</a> 其實不是 Microsoft 開發的軟體或服務，他其實是從 Google 發展出來的：而 Kubernetes 發展的目的，就是為了簡化 Container 的管理與部屬：舉例來說，我們可以輕易的將一堆 Container 連線、開幾個 Container 、資源大小等等，全部用設定檔的方式設定好，之後 Kubernetes 就會自動幫忙處理。</p>\n<p>舉例來說，一個簡單的三層式的 Server 架構 ( 雖然 Kubernetes 通常是在處理 MicroService 架構，但這邊就讓我用三層式的 Server 舉例吧 )，如果使用單純的 Dcoker ，我們可能要去處理 Server 與 Server 間如何通訊，可能不好去監控每個容器的狀況，也可能不好規劃資源的大小等等。</p>\n<p>而 Kubernetes 就可以輕鬆地幫我們處理掉這些事情：那為什麼 Microsoft Azure 會有這個服務呢? 那當然是因為現在 Microsoft 走的是 Service 的未來，就算是不同陣營，不同公司的產品，在 Azure 上自然也會支援。所以 Kubernetes 就是 Azure Container Service 支援的其中一個軟體。</p>\n<p>喔，執得一提的是，據說 Kubernetes 之父，目前也在 Microsoft 就職，所以也可以感受到未來發展此產品的決心。</p>\n<p>備註，此篇文章主要來源由<a href=\"https://docs.microsoft.com/zh-tw/azure/container-service/container-service-kubernetes-walkthrough\">這裡</a>為主，再經由自己實際測試與實驗的補充，若有興趣的朋友可以以直接參考官網。</p>\n<h2>安裝 kubectl</h2>\n<p>在開始之前，主要控制 Kubernetes ，還是會透過 Kubernetes 的 Cli 為主，而 Kubernetes 的 Cli 稱為 Kubectl：而在這邊，要安裝 Kubectl ，可以透過以下指令，但以下指令需要先安裝 Azure Cli，還沒安裝的朋友可以透過此<a href=\"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli\">網址</a>安裝。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">az acs kubernetes install-cli </code></pre></div>\n<p>若你是用 MacOS ，還有另外一個選擇，就是透過 Brew 進行安裝，同樣的，如果要透過 Brew 安裝，也需要先安裝 <a href=\"https://brew.sh/index_zh-tw.html\">Brew</a>。</p>\n<p>那還有沒有別的安裝方式，當然有，可以參考官網<a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl/\">這篇</a>，我們也可以透過 curl 來下載安裝，這邊大家可以選擇自己喜歡的安裝方式。</p>\n<p>最後，不管用什麼方法安裝，基本上最後還是需要 Azure Cli ，所以還是乖乖的安裝 Azure Cli 吧....</p>\n<p>( 小弟測試是 MacOS 平台，而以前就已經安裝好 Brew ，所以就透過 Brew 來安裝了 )</p>\n<h2>設定 kubectl</h2>\n<p>完成安裝後，我們要設定 kubectl，畢竟，不能讓 kubectl 可以隨便亂連，這樣是很危險的：所以我們可以透過 az 的指令，將 Kubernetes 的設定檔下載下來，並更新至 kubectl。</p>\n<p>底下指令，resource-group 為你的群組名稱， name 為你的 K8S 名稱，當然，要把[]去掉。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">az acs kubernetes get-credentials --resource-group=[你的資源群組] --name=[你的 K8S 名稱]</code></pre></div>\n<p>下圖紅色框框代表的是 ResourceGroup ( 左上角 )，Container Name ( 右邊 )</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b43054b4783f5c23aeb7dfebb3b71224/89066/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABq0lEQVQoz2VSy5KbMBDkS1JZhEDiIUC8WWMbV8Wp2tte8v9/0pmWwTnk0KXRTM97ou/bDX8uK9pUQ2kNV1VwrkIlb13XAVmWIUmSAwr6LSfQ4nPKeZ4jWpYF27ah67rgPK8XuG6AMQZFUQQSA9KROpMXIqdI0/9BTtStN9wfj+BkrcV83TFc7miaJgRkENrokDFJK8mEdwYJSQTBLrwot0UIlOhElBk+pWJXWJjs5eCce9mP9spQ9etPO5Oe9hCw8Q1c7YLC2Ax+9Uj9iLT2yCUzyQSr8N5jWdcgUzcMw7sLjoa6aJh79EMPpVRQ1Psv2PtvwROuH9FK62yfS5rnGc/nM/xZ+SrBmYSzp45vNE0LirI8AkqmzwU/+hU/2xFKxnFuMI5jlMLjEpWKA58B2Dbld8u9lD1Nk8xQw5oMZTdCTxvSpvu3QZ6N2FnFvu9hllr0rM6eCxIOlxXlxTF0IVVS4ddtw2W9onE1PkoHnZfQxkLJwlzrcd0fSDIT0PYDMjkjyuQY3uE4e/jOI/6IJYO0LCRVtYIGyslb1q+Kjjtkm+c/l4Wc90dQ/gtR6y4AlA03iAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/b43054b4783f5c23aeb7dfebb3b71224/78d47/01.png\"\n        srcset=\"/static/b43054b4783f5c23aeb7dfebb3b71224/56d15/01.png 200w,\n/static/b43054b4783f5c23aeb7dfebb3b71224/d9f49/01.png 400w,\n/static/b43054b4783f5c23aeb7dfebb3b71224/78d47/01.png 800w,\n/static/b43054b4783f5c23aeb7dfebb3b71224/64756/01.png 1200w,\n/static/b43054b4783f5c23aeb7dfebb3b71224/89066/01.png 1440w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>完成之後，可以透過底下指令，來取得目前所有的節點。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl get nodes</code></pre></div>\n<p>從下圖，我們可以發現，我們有一個 Master 節點，和兩個 Agent ：這其實就會對應到上一篇提到的安裝過程選擇的數量，通常 Master 主要是負責管理與維運，所以裡面不會放置我們的 Container ，而 Agent Node 就是提供給我們放置 Container 的地方了，當然，我們也不用自行決定放在哪一個 Agent Node ，Kuberentes 會自行幫我們放置。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0f70f3430e95f12c89f3f4a8a668cd5e/6535c/02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABYklEQVQoz+XQS0sCURgG4DPlwjTKsiQKI5q8zEwXnbFJ0vE2hrgLStpI/RRNgwxsXCTYxkCdolUrCaof9/alLtSEoJYtHj4OnO89L4dVa9coNeswHjqoNls0W6iYXZTMdxRbryibbyh2PnD73MVTu4yXxwJM2jEKl2hUbtA2DNTuGijV73FFmFWJwyKFwQkKpsR9MH4Xc+EMWEAHE6JgkkYzBpuqw7EnYjEgwCercG2KcG744SJsXQBz+/t4LQ0+mcWKloE7kYVDjWPtKIcl/QyLyVMs05xP5LCaPgGvKfBoAbqbokdUQgWoBEemSa9QVI3AdxCDRdZgIzPBQ1gjx7Dr57Cn8pjV87DpF1jQc5ASEoIpH5whCvMq4Px9bBjzBsE8xDtka4eqS0NEsk1ChFp4ZFomPnkQNDj3Asdf6KFF4TuOljhBHrsrj87JgT8YNPv6t9GWvw2c6B8Hjn/qH0M/AZdTaGaH/WMSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"02\"\n        title=\"02\"\n        src=\"/static/0f70f3430e95f12c89f3f4a8a668cd5e/78d47/02.png\"\n        srcset=\"/static/0f70f3430e95f12c89f3f4a8a668cd5e/56d15/02.png 200w,\n/static/0f70f3430e95f12c89f3f4a8a668cd5e/d9f49/02.png 400w,\n/static/0f70f3430e95f12c89f3f4a8a668cd5e/78d47/02.png 800w,\n/static/0f70f3430e95f12c89f3f4a8a668cd5e/6535c/02.png 802w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>開啟 UI</h2>\n<p>透過 kubectl ，我們也可以建立 Proxy ，讓我們可以透過通道來連線到 Kubernetes UI ( 對於指令白痴的小弟我，極為重要啊！！ )，我們可以透過 Kubectl Proxy 連建立通道，如下指令。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl proxy</code></pre></div>\n<p>若順利，則會提示位置資訊 \" Starting to serve on 127.0.0.1:8001 \"</p>\n<p>這時候，我們就可以開啟瀏覽器，連線到 127.0.0.1:8001/ui 了。 ( 請注意，有 /ui 喔！)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c54c6a55ef39769ccef8d33252ff784/89066/03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8UlEQVQoz1VS247TMBDNXyIeQHSXi3jjLxAvi7a7iAe+h9cVSEWCNGmb5tpcmjj3i53DjENhcXRkOzM+c+bYxvVtindfznh9n+H5TYqrjxFe3Z1xtS6xWgu8WBcaK8KzmwxPP4R48t7H6jbHy3uhcX0n8PZziTefchiee0QQ+MjSBFVZoKwEMEsoTKAFHo+hb1AUAnnZoe4kml4toHU3gGIFjMPRg2luEYQB8vQMMzniodnja23ioT3gZxdg07qw+hMdyGEdYnzfS8L4BxO+7QZsjgpemMEIggC+7yNNU9R1jaKt4LQJ/O6MfXXCrjlh38ZwGuqgrlCIGmkxIBMj4rxDUvR6n9cSYRTDcBwHYRgiz3NkWQYhBNQwQQ4jZD/qNUYFTArjOGKaRpr7fxg6Qg8lJy3KcF0XTJpmpLCq6cDi3eWTSupiZVmiqipIKSmHPFZK+8qzUovXnGd4ngd7ZyOJE5JOpMOgDeakeZ51AdP8hR+bDbZb8posYmsugwuw8v8IoyjSG1EKUqQIM9Q8a6Ws4OCG8IMISRJrS5iEizEWhYtajhl8IUwaxzE9mRJypoRHr4WTLWuHrWXpPG697/u/8Qsxj67rlkthcMunjJ5G06JuJ2qDLoaMHsgC27apbVPP7Dm3zG2yUiZnIi7M/38DzTzqYHnlICkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"03\"\n        title=\"03\"\n        src=\"/static/1c54c6a55ef39769ccef8d33252ff784/78d47/03.png\"\n        srcset=\"/static/1c54c6a55ef39769ccef8d33252ff784/56d15/03.png 200w,\n/static/1c54c6a55ef39769ccef8d33252ff784/d9f49/03.png 400w,\n/static/1c54c6a55ef39769ccef8d33252ff784/78d47/03.png 800w,\n/static/1c54c6a55ef39769ccef8d33252ff784/64756/03.png 1200w,\n/static/1c54c6a55ef39769ccef8d33252ff784/89066/03.png 1440w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>部署 NGINX 容器</h2>\n<p>接著，我們可以先試著部署 NGINX 容器試試看，NGINX 是一個非常不錯的 Web Server，下一篇，我們再來部署 .NET Core 的應用。</p>\n<p>我們這邊使用 kubectl run 這個指令， 後面接的 nginx 是名稱，可以自行定義，我們可以透過這個名稱，來了解我們部署了什麼東西上去，後面的 image 則是要使用什麼影像檔，這邊，我們直接使用 Docker Hub 的 nginx 影像檔來進行部署</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl run nginx --image nginx</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/055e470077fa57f1096c9bcda089425f/6535c/04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACCUlEQVQoz63R60tTcRjA8ZMrUwTFZm7OeZm5i0539Ox2dqbmwZmpk9oQofKWQgS9KKY1IcJ/oIjon6jeBL2MjNrYvOxi+g99+7lNiiZF0YsPz+/68Pyen3SU/cjXQopi8RvFw0OOjo9J7ebYSe/yOb3Hl8wBqb0C2b1dctlP7Gd2SKXSZDJZCoUi+UKBg1yeXD5fipIcX6RvZh7HdEyIl8grSVzLT7HfSeJY3OLK0jbj6/e4teRjflnHMxunW5/BJnRevY5Zm6AtHKFNiyA1+8do8o3S6B2lSTC4AxiDOpLTW9bnQ3IoNCojIso0DIWp94SQegaReuVq5rEpOieiWPVZYQaTmFtjD7Dd3sIyn8Acf0Rz7DHO2AKRqA1t2k2DdwTDoIphIIjk8padFtAcGMc0MYf12g3aJgV9itaFTbqSH7Am3mFJvMWy+Z6eJ2/Y3ujk1UYDEd2NqV+ly+OnY7DMKvTJAaQW8W6LqLBdMIsq2/VpWmIPMa6+5PLKc1rvvsC49pretWesr3Zwf9nC5LiKayiEWwkyoKhlPg3NJ1pRK4eoHw5TN6RRJ2tcFD2qDc5yIRilVo1Sr81xXr3JJXWEbtWJyS9j6A9S4ximxqn8ZFg8WUGSxEYVu6dCrjgZn6yLD7J7yxdPe/erszd8Z/ByzqWUVJ9X/pTwbyk/4v9LWEn62378Q+LvfJyOMY5D/JIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"04\"\n        title=\"04\"\n        src=\"/static/055e470077fa57f1096c9bcda089425f/78d47/04.png\"\n        srcset=\"/static/055e470077fa57f1096c9bcda089425f/56d15/04.png 200w,\n/static/055e470077fa57f1096c9bcda089425f/d9f49/04.png 400w,\n/static/055e470077fa57f1096c9bcda089425f/78d47/04.png 800w,\n/static/055e470077fa57f1096c9bcda089425f/6535c/04.png 802w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>另外，這邊補充一下，在 Container 的世界裡面，我們使用的幾乎都是 image ，並不會把 Container 實體傳上去，通常我們都是會把 image 傳到例如公開的 Docker Hub ，或是私有的 Azure Container Registry，而在執行環境上，再透過網路把 image 下載下來，並運行 Container。</p>\n<p>接下來，我們可以使用 get 來查看目前的狀況，而這邊出現一個新的名詞，稱為 pods，其實在 Kubernetes 裡面，最小為稱之為 Pods，這個下一章會再介紹，我們現在只要知道，我們 run 了一個 Pods，而透過底下指令，可以取得所有 Pods 的狀態。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl get pods</code></pre></div>\n<p>而這邊，其實小弟更喜歡用 Watch 來監控，透過 Watch 他會自動更新目前 Pods 的狀況：但 Watch 也是需要額外安裝的，在 MacOS 底下，可以直接使用 Brew 來安裝 Watch。</p>\n<p>我們可以使用底下指令，持續監看。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">watch kubectl get pods</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c61be3148d5ee547b98aaa54051be70/6535c/05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQoz62Qy07CQBSGp1Vhoy9gRBHqBQQJFMGEBLw1AhLjy7puh42lzbQSeJ/fc0oTS1CpSRdfznW+zIxQ8h22Z0P5Cr7vY7FY4nM+hzvz4FEtp1M4UsJ2HELiw3URhiFUEEApRaxiENfCsN5QHIxxPBiieDdC+XGCM+sVhz2LeiMU+kMUaHbUf45y42kCg3ZKDy84ic8wXJ/ejyEOmj3sVG+wV+tg96oDrWIiV+9CnDexTzPu52pd6NX2qm80IErXEGWmEccEeqUdCVnGcK5dmpFYp5xFgmqGd7UtCHHRwgaxYKOXnK3R+o4/L6wv8s1+lyWFZjohPz8jYbz8p+zfwjRkLkxIM5Xx12z/n5SQJ1+/xReXJnM7UuoorAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"05\"\n        title=\"05\"\n        src=\"/static/6c61be3148d5ee547b98aaa54051be70/78d47/05.png\"\n        srcset=\"/static/6c61be3148d5ee547b98aaa54051be70/56d15/05.png 200w,\n/static/6c61be3148d5ee547b98aaa54051be70/d9f49/05.png 400w,\n/static/6c61be3148d5ee547b98aaa54051be70/78d47/05.png 800w,\n/static/6c61be3148d5ee547b98aaa54051be70/6535c/05.png 802w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>連線 NGINX 容器</h2>\n<p>雖然建立完成，但這個 Container 其實是還沒有對外公開 ip ，所以我們下一步驟，需要透過指令的方式，公開這台 Container 的服務。</p>\n<p>底下比較特殊的是 type ，這邊 type 要選擇 LoadBalancer ，主要是因為在 Azure ， Azure 有自己的 LoadBalance，所以這邊的 Type 要為 LoadBalancer ，才能和 Azure 的 LoadBalanc 對樣。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl expose deployments nginx --port=80 --type=LoadBalancer</code></pre></div>\n<p>執行開放會需要一點時間，我們可以透過 get svc 來取得目前的開啟狀態。\n( 在 Kubernetes ，Service 指的是控制連入聯出等行為的服務，未來會再介紹 )</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl get svc</code></pre></div>\n<p>同樣的，我們也可以透過 watch 來持續監控。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">watch kubectl get svc</code></pre></div>\n<p>如下圖，我們可以看到，ip 已經建立完成，這時候我們就可以透過此 ip 來連入 Web Server。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/463abc56b9244d6b2217d7924bfd3676/6535c/06.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABK0lEQVQoz+WRW0/CQBCFFw0BfFIwMeGFm6FeegEKFApCVURBE36tz4USIrTd9icdpw2NjUKCiW8+fDknOzNnNruML95h2iZch8N2HHieB4d0s7GxWq2wsCx8rNcw53NYyyVcl8P3fXDq45xv8cK5wLPKaIbiYIKiMUHl4RUl4uLuGee9J2T1EfLkC/dT5PtjFIwphPEMl49vKFNfYfgSzpWoHs6SsrPmAMc3rZCsZiAttqG2+9B0A4LcRK6m47Q1BKvWkZY7YEIDrCzRTWRC2WqME0VH8rYdkiGfkTQojQ5EtQuJNFfrIlPrIUXnSVHDES1OXDf3woLN4daAyFdjBE1RPeJK/UbjS38WVSRi7A7YF6juDvw9/zAwFnrYox8YJkS//BehlJGSOvgEUEd1PtyYGigAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"06\"\n        title=\"06\"\n        src=\"/static/463abc56b9244d6b2217d7924bfd3676/78d47/06.png\"\n        srcset=\"/static/463abc56b9244d6b2217d7924bfd3676/56d15/06.png 200w,\n/static/463abc56b9244d6b2217d7924bfd3676/d9f49/06.png 400w,\n/static/463abc56b9244d6b2217d7924bfd3676/78d47/06.png 800w,\n/static/463abc56b9244d6b2217d7924bfd3676/6535c/06.png 802w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>如下，已經可以連入。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2be2b7d19e1847a86a83eed98efee8fd/89066/07.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAAn0lEQVQoz62SzQrCMBCE8/6v10ZM/6CHiAdjpVUPJrvTJkWJ0mqxHRiWXXY/5rACkZg5VOcc8jwPrusaSu3RdS2IHKx9vPaeNZaYAjITyqJEmqSQUiJJdtD6CGMuaJr2HyCHZJnKUFUFDvoMc7rifiMMAWdhX4HzR7w84dSS75lGyOh36OKEsePZL4nP47XeHoiNJYiGV7A2PPMae4Zn9b2jFU1R5b4mAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"07\"\n        title=\"07\"\n        src=\"/static/2be2b7d19e1847a86a83eed98efee8fd/78d47/07.png\"\n        srcset=\"/static/2be2b7d19e1847a86a83eed98efee8fd/56d15/07.png 200w,\n/static/2be2b7d19e1847a86a83eed98efee8fd/d9f49/07.png 400w,\n/static/2be2b7d19e1847a86a83eed98efee8fd/78d47/07.png 800w,\n/static/2be2b7d19e1847a86a83eed98efee8fd/64756/07.png 1200w,\n/static/2be2b7d19e1847a86a83eed98efee8fd/89066/07.png 1440w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>刪除 NGINX Pods 和 Service</h2>\n<p>最後，我們可以透過底下指令，將 pod 和 service 刪除。</p>\n<p>刪除 pod 要取得完整的 pod 名稱。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl delete pod nginx-2371676037-3x9pd</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl delete service nginx</code></pre></div>\n<p>到這邊，基本的部署試玩就告一段亂。</p>\n<h2>後記</h2>\n<p>雖然這邊有很多細節還沒談到，但我們透過簡單的指令，已經可以感受到 Kubernetes ，快速的控制容器，建立與刪除，等強大的功能，後續，就讓我們繼續玩下去。</p>\n<h2>參考資料</h2>\n<ul>\n<li><a href=\"https://kubernetes.io/docs/home/\">https://kubernetes.io/docs/home/</a></li>\n<li><a href=\"https://docs.microsoft.com/zh-tw/azure/container-service/container-service-kubernetes-walkthrough\">https://docs.microsoft.com/zh-tw/azure/container-service/container-service-kubernetes-walkthrough</a></li>\n<li><a href=\"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli\">https://docs.microsoft.com/en-us/cli/azure/install-azure-cli</a></li>\n<li><a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl/\">https://kubernetes.io/docs/tasks/tools/install-kubectl/</a></li>\n<li><a href=\"https://kubernetes-v1-4.github.io/docs/user-guide/kubectl/kubectl_delete/\">https://kubernetes-v1-4.github.io/docs/user-guide/kubectl/kubectl_delete/</a></li>\n</ul>","excerpt":"警告 Azure Container Service 已經成 Azure Kubernetes Service，這篇已經棄用 新文章請參考這篇 前言 上一篇我們花了一點時間，透過 Azure 的 Container Service 來搭建了一個 Kubernetes…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Azure - 在 Azure 上使用 Azure Container Service 來執行 Kubernetes","tags":["Azure","Container","ACS","Kubernetes","Docker","Linux"]},"fields":{"slug":"/2017/07/19/Azure-Azure_Container_Service_Kubernetes_First/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Azure-Azure_Container_Service_Kubernetes_First/Azure-Azure_Container_Service_Kubernetes_First.md"},"previous":{"frontmatter":{"path":null,"title":"Azure - Azure Container Instances 初體驗","tags":["Azure","Container","ACI","Docker","Linux"]},"fields":{"slug":"/2017/07/31/Azure-Azure_Container_Instance_Overview/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Azure-Azure_Container_Instance_Overview/Azure-Azure_Container_Instance_Overview.md"}}}}