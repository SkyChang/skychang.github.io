{"componentChunkName":"component---src-templates-page-js","path":"/2016/04/22/Angular2-Env_Setup_3/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Angular2 - 與 Webpack 整合環境設定 - 3","date":"22 April 2016","author":"Sky Chang","excerpt":null,"tags":["JavaScript","Angular2","Webpack","TypeScript"],"coverImage":null},"id":"6dcb71af-d351-5fc4-ba3a-7a4a08679561","html":"<h2>前言</h2>\n<p>前篇我們已經可以透過 webpack + Angular2 跑出 Hot Reload ，但其實我們還有許多事情要繼續整合處理，\n例如我們希望可以透過 npm start 進行打包 ( webpack-dev-server 是不會產出實體檔案的.. )\n或是能分開 webpack.config 的設定等等，所以，這篇我們會繼續針對這些繼續設定下去。</p>\n<h2>注意事項</h2>\n<ul>\n<li>此文章的版本為 angular2 beta 15 ，未來應該也不會跟著版本更新...請看的朋友注意</li>\n<li>裡面 Webpack 版本為 1.x , 2.x 可能會有幅度變動，請直接參考 <a href=\"https://github.com/angularclass/angular2-webpack-starter\">angular2-webpack-stater</a></li>\n<li>此文章壟長，且未必能 100% 成功 ( 因 Package 相依性、Webpack 版本、angular2 版本 可能會造成差異 )</li>\n<li>有興趣的朋友，可以直接參考 <a href=\"https://github.com/angularclass/angular2-webpack-starter\">angular2-webpack-stater</a> Source Code</li>\n<li>文章內容的所有 Soucre 來源為 <a href=\"https://github.com/angularclass/angular2-webpack-starter\">angular2-webpack-stater</a> ，小弟只是針對內容進行解析紀錄</li>\n<li>文章開頭會以 <a href=\"https://angular.io/docs/ts/latest/quickstart.html\">Quickstart</a> 為起始</li>\n<li>官方 Source Code 裡面有很多的註解，但本篇文章，因為篇幅關係，小弟會把註解拿掉</li>\n</ul>\n<h2>分離 webpack.config.js</h2>\n<p>在原始的 source code 裡面，大神是將 webpack.config.js 進行分離，分別有 </p>\n<ul>\n<li>webpack.common.js - 負責共用的設定</li>\n<li>webpack.dev.js - 負責開發用的設定</li>\n<li>webpack.prod.js -  負責正式環境的設定</li>\n<li>webpack.test.js - 負責測試環境的設定</li>\n</ul>\n<p>而我們這邊，會先來看看，如何拆出 webpack.common.js 和 webpack.dev.js。</p>\n<h3>安裝 webpack-merge</h3>\n<p>基本上，webpack 沒有提供這種合併多個 config 的功能，所以我們要透過 <a href=\"https://www.npmjs.com/package/webpack-merge\">webpack-merge package</a> 來達到此需求。</p>\n<p>同樣的，我們直接看 package.json ，這樣大家才可以得知，目前這篇文章的所有 package 版本與目前安裝狀況。</p>\n<p>這邊我們多增加了 \"webpack-merge\": \"^0.8.4\" 。</p>\n<p>完整 package.json</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"angular2-quickstart\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc &amp;&amp; concurrently \\\"npm run tsc:w\\\" \\\"npm run lite\\\" \"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"tsc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"tsc:w\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc -w\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lite\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lite-server\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"postinstall\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings install\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"angular2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.0.0-beta.15\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"core-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es6-shim\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.35.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es7-reflect-metadata\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.6.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rxjs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5.0.0-beta.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"zone.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.6.10\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"typescript\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.8.10\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"^0.7.12\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.13.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-dev-server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.14.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"copy-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"html-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.15.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"awesome-typescript-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.16.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"source-map-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.1.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"json-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.5.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"raw-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.5.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"angular2-hmr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.5.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-merge\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.8.4\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>完成後，執行 npm install 安裝。</p>\n<h3>分離 webpack.config.js</h3>\n<p>接下來，其實沒甚麼技巧可言，大家可以依據自己的需求，將常共用的 webpack.config 移到 webpack.common.js 裡面，\n但我們這邊依照大神的 source 來做這件事情。</p>\n<p>首先我們先把 webpack.config.js 拷貝一份到 config 目錄底下，並且改名為 webpack.common.js 如下圖:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 218px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ce3f04842c0c70c49b15d573d4c62f1/82dd2/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 166%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD8ElEQVRIx5VWW1PiSBjld+zUzGIuhJB0LkBIQFR0BEQChHDXGWvG2qp92v//ePZ0I44XVHw41aGT/vp857tRKDkBRC1GLTlB+7yHducSpu1BLwsYtuDqqudDUXAdF61WG91uF53TC2TpCHbJQvHvInRNg2mYhHEwCrpuolg8glEqo9aIETUTREkTQbUGEVah0aBmlp7hiHu6vIjPxgsU1CZfJsLD6nqI3/Mp1tfXyC+7yLuXCHQdIW8OdWO78ts6PRDEzuhTFIrcbJZt/FurYtVq4Z/zM2yaTfzunOGu3cbdyQnu+XzP/V9np/jZPsYmquGX7yn2rwx+5c2nVgm3YYhxmuIuz3CbL7DJMmS9HvLBAIurAeYpQebL0Qj94wT3vlAuvjJokV3kB/jvooPbqI5J2ULuVLiWMa3YCpldVpgQ8t1SuBgTR/sYekIgjJrojyaI6d5fDNCXI53Q8KWoqd/Si29GiTAVvjKQ37i30/85Q6sMp+IiDAJEUYzA81FnhOOogThJkDQSCMdR6VPigacw9jL0PNTrZEi9xtMcF98vcdW9QpqOkWYTZNkMzbgBTTNeHd6HQonht+0KfOpoGNtDmqar3NxBf8O9vQYF8+/45BTd/hWE6yoD+z48xJgyuL3d3LKkjj4lkKwPNbDXoKznOGlhtloiHQ5Yw/qjwc8aLsgDklGl4sCjjtVqldFufHjwrYseGbaO2+gNhpiMxxgN08fgyPe7VWdda/r77B+bw1OmEq7rwWNOClfAEz4q1NhxfQR8tt7RWBmUtzs0cNVj/g2HmE9nOO9coNsb4sf6BjPm581qrX6Pr1MWga9Yv2lQ3maxH4bsf1JDl6xqrJZQ9kTKobHRSvbmgycfuqwzoW3bwTVvX87n6LIXZpMRRnmOJEqgsa5fGnjXZZmHpmnBIRuPfS5m/YaMeIU1Lt8Zn4myyS5yRAaCgqejHPN5hgX74WySc8704TIYckwcnIePOSi2UZX6yT0ZKKXbJ5O7IJtCI25iuVgio2aL5RodtvxisfiQe38aw0HNYfuRhcAPEQQho1xXbBVrMpbrpxjKfPK8iNotkE8nWK1WSsPhOGP+zXBy3GJ1GJ+r5TLnisOuLN0TsjrYceSeZT3X8CCXVS2znCaTTGE0nOLH3U+Mshzj8RStuP5mVbzJUM4VWbMyQLIvCl4g9ZR5uYv0oY32gaGHzXqzjfJihf4gRcb5O+RMtm2beap/WHIvolxip/YVQzkSZKRlDUsdfT9U+kovZDZ8zJD6CL+KnOw2N2vM8jmmnHSDfh8D/mOY5jMV+SnndpnD/0ODOxekVmXqJzWUzyUyKhPyD5HjCFVBh0T5f/yu787oVrtMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/3ce3f04842c0c70c49b15d573d4c62f1/82dd2/01.png\"\n        srcset=\"/static/3ce3f04842c0c70c49b15d573d4c62f1/56d15/01.png 200w,\n/static/3ce3f04842c0c70c49b15d573d4c62f1/82dd2/01.png 218w\"\n        sizes=\"(max-width: 218px) 100vw, 218px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>因為是 common ，所以我們移除 </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> DefinePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack/lib/DefinePlugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>既然 DefinePlugin require 移除了，那 plugins 底下的 DefinePlugin 自然也移除了</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'process.env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'NODE_ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>接下來，也把 tslint 和 devServer 移除</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"> tslint<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    emitErrors<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    failOnHint<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    resourcePath<span class=\"token operator\">:</span> <span class=\"token string\">'src'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  \n  devServer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    host<span class=\"token operator\">:</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span>\n    historyApiFallback<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    watchOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      aggregateTimeout<span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n      poll<span class=\"token operator\">:</span> <span class=\"token number\">1000</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>P.S 如果大家有去看 Source ，會發現有一個 Metadata 如下兩個 source code ，\n神人作者對於 Metadata 其實有兩個用途，一個是拿來輸出到網頁上，例如 title .\n另外一個是拿來使用設定環境變數；基本上輸出 title 的部分，我就會直接拿掉了。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/*\n * Webpack Constants\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">METADATA</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'Angular2 Webpack Starter by @gdi2290 from @AngularClass'</span><span class=\"token punctuation\">,</span>\n  baseUrl<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token comment\">/*\n   * Static metadata for index.html\n   *\n   * See: (custom attribute)\n   */</span>\n  metadata<span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>完整的 webpack.common.js</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n * @author: @AngularClass\n */</span>\n\n<span class=\"token keyword\">const</span> webpack <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> helpers <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./helpers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n * Webpack Plugins\n */</span>\n<span class=\"token keyword\">const</span> CopyWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> HtmlWebpackPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ForkCheckerPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'awesome-typescript-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>ForkCheckerPlugin<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n * Webpack configuration\n *\n * See: http://webpack.github.io/docs/configuration.html#cli\n */</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  debug<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  devtool<span class=\"token operator\">:</span> <span class=\"token string\">'cheap-module-eval-source-map'</span><span class=\"token punctuation\">,</span>\n  entry<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token string\">'polyfills'</span><span class=\"token operator\">:</span> <span class=\"token string\">'./src/polyfills.ts'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//'vendor': './src/vendor.ts',</span>\n    <span class=\"token string\">'main'</span><span class=\"token operator\">:</span> <span class=\"token string\">'./src/app/main.ts'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    filename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].bundle.js'</span><span class=\"token punctuation\">,</span>\n    sourceMapFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].map'</span><span class=\"token punctuation\">,</span>\n    chunkFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[id].chunk.js'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  resolve<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    extensions<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.js'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    root<span class=\"token operator\">:</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    modulesDirectories<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'node_modules'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  \n  module<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    preLoaders<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.js$/</span><span class=\"token punctuation\">,</span>\n        loader<span class=\"token operator\">:</span> <span class=\"token string\">'source-map-loader'</span><span class=\"token punctuation\">,</span>\n        exclude<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token comment\">// these packages have problems with their sourcemaps</span>\n          helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'node_modules/rxjs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'node_modules/@angular2-material'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n    loaders<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.ts$/</span><span class=\"token punctuation\">,</span>\n        loader<span class=\"token operator\">:</span> <span class=\"token string\">'awesome-typescript-loader'</span><span class=\"token punctuation\">,</span>\n        exclude<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token regex\">/\\.(spec|e2e)\\.ts$/</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.json$/</span><span class=\"token punctuation\">,</span>\n        loader<span class=\"token operator\">:</span> <span class=\"token string\">'json-loader'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.css$/</span><span class=\"token punctuation\">,</span>\n        loader<span class=\"token operator\">:</span> <span class=\"token string\">'raw-loader'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.html$/</span><span class=\"token punctuation\">,</span>\n        loader<span class=\"token operator\">:</span> <span class=\"token string\">'raw-loader'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">//exclude: [helpers.root('src/index.html')]</span>\n        exclude<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'src/app/index.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">ForkCheckerPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>optimize<span class=\"token punctuation\">.</span>OccurenceOrderPlugin</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>optimize<span class=\"token punctuation\">.</span>CommonsChunkPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'polyfills'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vendor'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">CopyWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">from</span><span class=\"token operator\">:</span> <span class=\"token string\">'src/assets'</span><span class=\"token punctuation\">,</span>\n      to<span class=\"token operator\">:</span> <span class=\"token string\">'assets'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">HtmlWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      template<span class=\"token operator\">:</span> <span class=\"token string\">'src/index.html'</span><span class=\"token punctuation\">,</span>\n      chunksSortMode<span class=\"token operator\">:</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">packageSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'polyfills'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vendor'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'main'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  \n  node<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    global<span class=\"token operator\">:</span> <span class=\"token string\">'window'</span><span class=\"token punctuation\">,</span>\n    crypto<span class=\"token operator\">:</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">,</span>\n    process<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    module<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    clearImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    setImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>那接下來，我們就要調整原始的 webpack.config.js</p>\n<h3>調整 webpack.config.js</h3>\n<p>我們改成如下，首先，我們會引用 webpack-merga；另外，我們這邊開始啟用 ENV , HRM , METADATA 環境的變數。</p>\n<p>P.S 在原本的 Source Code 裡面，有使用到 webpackMerge(commonConfig.metadata, 整合 commonConfig 的 metadata，\n但是在原本的 Source Code 裡面，MetaData 的定義 ，主要是用來顯示於 index 上。\n基本上這是不需要的，所以 webpack.config.js 的這邊這段，我就移除了 webpackMerge 。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">METADATA</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'Angular2 Webpack Starter by @gdi2290 from @AngularClass'</span><span class=\"token punctuation\">,</span>\n  baseUrl<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>另外，要特別注意 require 的路徑，因為路徑換了，所以要加上 config</p>\n<p>P.S 或許大家有注意到，node，debug, devtool, output 都有重複..\n為什麼需要重複，其實小弟我沒有在去做額外的嘗試，但 source 是有保留的。</p>\n<p>完整的 webpack.config.js </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n * @author: @AngularClass\n */</span>\n\n<span class=\"token keyword\">const</span> helpers <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./config/helpers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> webpackMerge <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-merge'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// used to merge webpack configs</span>\n<span class=\"token keyword\">const</span> commonConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./config/webpack.common.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// the settings that are common to prod and dev</span>\n\n<span class=\"token comment\">/**\n * Webpack Plugins\n */</span>\n<span class=\"token keyword\">const</span> DefinePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack/lib/DefinePlugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Webpack Constants\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">ENV</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">=</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HMR</span> <span class=\"token operator\">=</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">hasProcessFlag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">METADATA</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  host<span class=\"token operator\">:</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">ENV</span><span class=\"token operator\">:</span> <span class=\"token constant\">ENV</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">HMR</span><span class=\"token operator\">:</span> <span class=\"token constant\">HMR</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Webpack configuration\n *\n * See: http://webpack.github.io/docs/configuration.html#cli\n */</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">webpackMerge</span><span class=\"token punctuation\">(</span>commonConfig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n  metadata<span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">,</span>\n\n  debug<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n  devtool<span class=\"token operator\">:</span> <span class=\"token string\">'cheap-module-eval-source-map'</span><span class=\"token punctuation\">,</span>\n\n  output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    filename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].bundle.js'</span><span class=\"token punctuation\">,</span>\n    sourceMapFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].map'</span><span class=\"token punctuation\">,</span>\n    chunkFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[id].chunk.js'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HMR</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'process.env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'NODE_ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HMR</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  tslint<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    emitErrors<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    failOnHint<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    resourcePath<span class=\"token operator\">:</span> <span class=\"token string\">'src'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  devServer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    port<span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span>port<span class=\"token punctuation\">,</span>\n    host<span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span>host<span class=\"token punctuation\">,</span>\n    historyApiFallback<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    watchOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      aggregateTimeout<span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n      poll<span class=\"token operator\">:</span> <span class=\"token number\">1000</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  \n  node<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    global<span class=\"token operator\">:</span> <span class=\"token string\">'window'</span><span class=\"token punctuation\">,</span>\n    crypto<span class=\"token operator\">:</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">,</span>\n    process<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    module<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    clearImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    setImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>最後，我們還希望做一件事情，調整一下，npm 的 scripts，讓我們能更輕鬆地執行測試環境。</p>\n<h2>調整 package.json</h2>\n<p>我們重新調整了 npm scripts 裡面的項目，我們把 tsc、tsc:w、lite 拿掉，\n因為這幾個都整合到 webpack，或是不使用了...\n而增加了 server 的區段，未來我們就可以使用 </p>\n<ul>\n<li>npm run server:dev 來啟動開發環境 ( 不包含 hot reload )</li>\n<li>npm run server:dev:hmr 來啟動開發環境 ( 包含 hot reload )</li>\n<li>npm run server:prod 來啟動正式環境 </li>\n</ul>\n<p>( npm run server:prod 現階段會無法使用，這篇文章的最後，會裝上 http-server 就可以正常運作了 )</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"angular2-quickstart\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc &amp;&amp; concurrently \\\"npm run tsc:w\\\" \\\"npm run lite\\\" \"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"postinstall\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings install\"</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run server:dev\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack-dev-server --config webpack.config.js --inline --progress --profile --colors --watch --display-error-details --display-cached --content-base src/\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:dev:hmr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run server:dev -- --hot\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http-server dist --cors\"</span>\n    \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"angular2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.0.0-beta.15\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"core-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es6-shim\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.35.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es7-reflect-metadata\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.6.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rxjs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5.0.0-beta.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"zone.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.6.10\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"typescript\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.8.10\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"^0.7.12\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.13.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-dev-server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.14.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"copy-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"html-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.15.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"awesome-typescript-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.16.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"source-map-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.1.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"json-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.5.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"raw-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.5.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"angular2-hmr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.5.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-merge\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.8.4\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>完成後就可以 npm run server:dev:hmr 試試看。</p>\n<h2>增加 webpack.dev.js</h2>\n<p>到這邊，已經越來越方便了，但我們正式環境，可能會有一組設定檔，或是其他環境有其他的設定檔，\n所以我們希望把 webpack.config.js 也放到 config 目錄底下。</p>\n<p>所以我們就將 webpack.config.js 移到 config 目錄底下，並且改名為 webpack.dev.js</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 213px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc1df77e5edc94e83262856d33728d7a/53f68/02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 119%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADJUlEQVQ4y5VVS2/TQBC2OMANWoEKFLWJn3GeThw7TWLHzsuxE5LGTdIXLRyRuKOKG+JSIThx50ZRf+bH7DapgtSqyeHL7k48n8c7880IiqIil8ujWDKxt1dFq9mGZZqQya6qGoeytH8IgiIr2KvW4fktRNEAvaCPYRRhZzcBmf5jWIdUYD+iKEEi5HMFlC0Llm2jbJZRKBjI5nL3kt1lF5hR01KQJBmu42M6m+Ho+BBR2MdgMIDjOEjMo2XPMLD9goytClvnEG4PigYtlYZhFFGi+0xnsrDKNvL5AoyiyW0MhlHitnQ6w32WyTihJkvQFHprMgG/0cDp8QzH0wkOKdJZHCPsdhAPR4j7fUziIeLREAfjIdxKmXyS3JdzzCFsuu/A0bhZXzbPsNU8xwbtt7wzvPDO8ap1jmf1E2w4J3haO8Zzsm26p7j1XYLwePAFTwhC8Bn5T7/w/sc1Ti7/YnJ5jem3P2hd/MbJ9ysMv16h+PEnHoUXYD73Qdg223hD2LF7EKtULlYXcjWEQkjYAaS9HnbKHci1iM5dvC61wHy2S3dDSKsyKmUTQRDiw+kRSkYe4u4OVDHJoYgJqJI4X+nOZBGadD8oyymomo6UnoaezkJN6fNSYPYUZV7n2VTprKwAIUUOtl1Fu9XB+GCCeDJBs0mZHY1xQPv48BCzgylFbkCaq+ZBpbC36xRhjlRhFEs3tUaqKRBJgeqSnXVdX0l+PELLrsBrtugeAy7DhYYXymBYVsaDETLSLHUc1nVEUUQyKd7puHKEpmmh1W5jNp1in9QxmczoMw0sdL52t8mQbpk+Xcfluq3V6vTJMhKJJHYJkrR6C+OEyaSMuuOhS1H2+xFCqkmW9U4vRBT0qCkUV8rwLaEkqdSmPHheg4gdhGGEJjVc1/PgULTsbuV1CNnD1VoNvu/zzh10e5R1n2wufK+JTDr130hYidCyKmhQRHUiceoNjMb7qLs+v9dsRl+XUIVdqcB1XSJxacbUeOYbTp3W8npD6mamyHDcBo5IZgHdX0xS6wYR3oY9PgJY6axcNosHmRpYQbNS4UNrfmb7VVXC8A9FOuVXbc5kSgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"02\"\n        title=\"02\"\n        src=\"/static/bc1df77e5edc94e83262856d33728d7a/53f68/02.png\"\n        srcset=\"/static/bc1df77e5edc94e83262856d33728d7a/56d15/02.png 200w,\n/static/bc1df77e5edc94e83262856d33728d7a/53f68/02.png 213w\"\n        sizes=\"(max-width: 213px) 100vw, 213px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>因為目錄改變了，所以要調整一下 require 的路徑，把 config 拿掉。</p>\n<p>完整 webpack.dev.js 如下</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n * @author: @AngularClass\n */</span>\n\n<span class=\"token keyword\">const</span> helpers <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./helpers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> webpackMerge <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-merge'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// used to merge webpack configs</span>\n<span class=\"token keyword\">const</span> commonConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./webpack.common.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// the settings that are common to prod and dev</span>\n\n<span class=\"token comment\">/**\n * Webpack Plugins\n */</span>\n<span class=\"token keyword\">const</span> DefinePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack/lib/DefinePlugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Webpack Constants\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">ENV</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">=</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HMR</span> <span class=\"token operator\">=</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">hasProcessFlag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">METADATA</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  host<span class=\"token operator\">:</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">ENV</span><span class=\"token operator\">:</span> <span class=\"token constant\">ENV</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">HMR</span><span class=\"token operator\">:</span> <span class=\"token constant\">HMR</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Webpack configuration\n *\n * See: http://webpack.github.io/docs/configuration.html#cli\n */</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">webpackMerge</span><span class=\"token punctuation\">(</span>commonConfig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n  metadata<span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">,</span>\n\n  debug<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n  devtool<span class=\"token operator\">:</span> <span class=\"token string\">'cheap-module-eval-source-map'</span><span class=\"token punctuation\">,</span>\n\n  output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    filename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].bundle.js'</span><span class=\"token punctuation\">,</span>\n    sourceMapFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].map'</span><span class=\"token punctuation\">,</span>\n    chunkFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[id].chunk.js'</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HMR</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'process.env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'NODE_ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HMR</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  tslint<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    emitErrors<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    failOnHint<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    resourcePath<span class=\"token operator\">:</span> <span class=\"token string\">'src'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  devServer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    port<span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span>port<span class=\"token punctuation\">,</span>\n    host<span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span>host<span class=\"token punctuation\">,</span>\n    historyApiFallback<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    watchOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      aggregateTimeout<span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n      poll<span class=\"token operator\">:</span> <span class=\"token number\">1000</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  \n  node<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    global<span class=\"token operator\">:</span> <span class=\"token string\">'window'</span><span class=\"token punctuation\">,</span>\n    crypto<span class=\"token operator\">:</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">,</span>\n    process<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    module<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    clearImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    setImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>調整 package.json</h2>\n<p>我們就在 server:dev --config 改成 config/webpack.dev.js</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"angular2-quickstart\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc &amp;&amp; concurrently \\\"npm run tsc:w\\\" \\\"npm run lite\\\" \"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"postinstall\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings install\"</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run server:dev\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack-dev-server --config config/webpack.dev.js --inline --progress --profile --colors --watch --display-error-details --display-cached --content-base src/\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:dev:hmr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run server:dev -- --hot\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http-server dist --cors\"</span>\n    \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"angular2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.0.0-beta.15\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"core-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es6-shim\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.35.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es7-reflect-metadata\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.6.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rxjs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5.0.0-beta.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"zone.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.6.10\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"typescript\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.8.10\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"^0.7.12\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.13.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-dev-server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.14.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"copy-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"html-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.15.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"awesome-typescript-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.16.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"source-map-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.1.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"json-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.5.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"raw-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.5.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"angular2-hmr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.5.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-merge\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.8.4\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>完成後，可以在 npm run server:dev:hmr 來測試看看</p>\n<h2>增加編譯環境</h2>\n<p>接下來，我們要準備增加 build 的設定，我們希望透過</p>\n<ul>\n<li>npm run build:dev 編譯出 dev 環境的檔案</li>\n<li>npm run build:prod 編譯出 正式環境的檔案</li>\n</ul>\n<h3>修改 package.json</h3>\n<p>所以我們先修改 package.json，這邊增加了 build 的相關設定，比較需要注意的是，prebuild:dev 和 prebuild:prod 與裡面。</p>\n<p>prebuild:dev 代表著，執行 build:dev 之前，他會先跑 prebuild:dev ，而 prebuild:dev 裡面的 npm run clean:dist\n其實就是要清除舊的檔案資訊，而 clean:dist 就是 clean 那個區段的設定，目的就是刪除 dist 目錄的所有檔案。</p>\n<p>而他主要是用到了 <a href=\"https://github.com/isaacs/rimraf\">rimraf</a> 這個 package ，所以底下的 package 也要再加上 \"rimraf\": \"^2.5.2\" 。\n並且在 scripts 裡面也加上 rimraf ，不然 npm run rimraf 會錯誤。</p>\n<p>另外，等下的 webpack.prod.js 會使遇到以下 plugin ，所以我們也一併裝上</p>\n<ul>\n<li><a href=\"https://github.com/webpack/compression-webpack-plugin\">compression-webpack-plugin</a></li>\n<li><a href=\"https://www.npmjs.com/package/webpack-md5-hash\">webpack-md5-hash</a>,<a href=\"\">原因</a><a href=\"https://github.com/webpack/webpack/issues/1315\">https://github.com/webpack/webpack/issues/1315</a></li>\n<li><a href=\"https://www.npmjs.com/package/http-server\">http-server</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"angular2-quickstart\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc &amp;&amp; concurrently \\\"npm run tsc:w\\\" \\\"npm run lite\\\" \"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rimraf\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"rimraf\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"postinstall\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typings install\"</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token property\">\"clean\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm cache clean &amp;&amp; npm run rimraf -- node_modules doc typings coverage dist\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"clean:dist\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run rimraf -- dist\"</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run build:dev\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"prebuild:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run clean:dist\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"build:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --config config/webpack.dev.js --progress --profile --colors --display-error-details --display-cached\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"prebuild:prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run clean:dist\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"build:prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --config config/webpack.prod.js  --progress --profile --colors --display-error-details --display-cached --bail\"</span><span class=\"token punctuation\">,</span>\n    \n    <span class=\"token property\">\"server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run server:dev\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack-dev-server --config config/webpack.dev.js --inline --progress --profile --colors --watch --display-error-details --display-cached --content-base src/\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:dev:hmr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run server:dev -- --hot\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"server:prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http-server dist --cors\"</span>\n    \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"angular2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.0.0-beta.15\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"core-js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es6-shim\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.35.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"es7-reflect-metadata\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.6.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rxjs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5.0.0-beta.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"zone.js\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.6.10\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"typescript\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.8.10\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"typings\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"^0.7.12\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.13.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-dev-server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.14.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"copy-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"html-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.15.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"awesome-typescript-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.16.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"source-map-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.1.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"json-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.5.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"raw-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.5.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"angular2-hmr\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.5.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-merge\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.8.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rimraf\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.5.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"compression-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.3.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"webpack-md5-hash\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.0.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"http-server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.9.0\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>完成後，先用 npm install 裝一下 rimraf</p>\n<p>P.S 原始文件的 clean 其實還有其他設定，但似乎用不到，所以我就先移除了。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n <span class=\"token property\">\"clean\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm cache clean &amp;&amp; npm run rimraf -- node_modules doc typings coverage dist\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"clean:dist\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run rimraf -- dist\"</span><span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"preclean:install\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run clean\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"clean:install\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm set progress=false &amp;&amp; npm install\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"preclean:start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run clean\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"clean:start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm start\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>加上 webpack.prod.js 檔案</h3>\n<p>最後，我們於 config 加上 webpack.prod.js 上。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n * @author: @AngularClass\n */</span>\n\n<span class=\"token keyword\">const</span> helpers <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./helpers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> webpackMerge <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-merge'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// used to merge webpack configs</span>\n<span class=\"token keyword\">const</span> commonConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./webpack.common.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// the settings that are common to prod and dev</span>\n\n<span class=\"token comment\">/**\n * Webpack Plugins\n */</span>\n<span class=\"token keyword\">const</span> ProvidePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack/lib/ProvidePlugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> DefinePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack/lib/DefinePlugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> DedupePlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack/lib/optimize/DedupePlugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> UglifyJsPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack/lib/optimize/UglifyJsPlugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> CompressionPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'compression-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> WebpackMd5Hash <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-md5-hash'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Webpack Constants\n */</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">ENV</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span> <span class=\"token operator\">=</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">HOST</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">HOST</span> <span class=\"token operator\">||</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">||</span> <span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">METADATA</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  host<span class=\"token operator\">:</span> <span class=\"token constant\">HOST</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token operator\">:</span> <span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">ENV</span><span class=\"token operator\">:</span> <span class=\"token constant\">ENV</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">HMR</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">webpackMerge</span><span class=\"token punctuation\">(</span>commonConfig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\n  debug<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  devtool<span class=\"token operator\">:</span> <span class=\"token string\">'source-map'</span><span class=\"token punctuation\">,</span>\n  output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> helpers<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    filename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].[chunkhash].bundle.js'</span><span class=\"token punctuation\">,</span>\n    sourceMapFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[name].[chunkhash].bundle.map'</span><span class=\"token punctuation\">,</span>\n    chunkFilename<span class=\"token operator\">:</span> <span class=\"token string\">'[id].[chunkhash].chunk.js'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebpackMd5Hash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">DedupePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HMR</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'process.env'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'NODE_ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ENV</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'HMR'</span><span class=\"token operator\">:</span> <span class=\"token constant\">METADATA</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HMR</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">UglifyJsPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// beautify: true, //debug</span>\n      <span class=\"token comment\">// mangle: false, //debug</span>\n      <span class=\"token comment\">// dead_code: false, //debug</span>\n      <span class=\"token comment\">// unused: false, //debug</span>\n      <span class=\"token comment\">// deadCode: false, //debug</span>\n      <span class=\"token comment\">// compress: {</span>\n      <span class=\"token comment\">//   screw_ie8: true,</span>\n      <span class=\"token comment\">//   keep_fnames: true,</span>\n      <span class=\"token comment\">//   drop_debugger: false,</span>\n      <span class=\"token comment\">//   dead_code: false,</span>\n      <span class=\"token comment\">//   unused: false</span>\n      <span class=\"token comment\">// }, // debug</span>\n      <span class=\"token comment\">// comments: true, //debug</span>\n\n      beautify<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//prod</span>\n\n      mangle<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        screw_ie8 <span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        keep_fnames<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//prod</span>\n\n      compress<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        screw_ie8<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//prod</span>\n\n      comments<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token comment\">//prod</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">CompressionPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      regExp<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.css$|\\.html$|\\.js$|\\.map$/</span><span class=\"token punctuation\">,</span>\n      threshold<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  tslint<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    emitErrors<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    failOnHint<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    resourcePath<span class=\"token operator\">:</span> <span class=\"token string\">'src'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  htmlLoader<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    minimize<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    removeAttributeQuotes<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    caseSensitive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    customAttrSurround<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token regex\">/#/</span><span class=\"token punctuation\">,</span> <span class=\"token regex\">/(?:)/</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token regex\">/\\*/</span><span class=\"token punctuation\">,</span> <span class=\"token regex\">/(?:)/</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token regex\">/\\[?\\(?/</span><span class=\"token punctuation\">,</span> <span class=\"token regex\">/(?:)/</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    customAttrAssign<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token regex\">/\\)?\\]?=/</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  node<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    global<span class=\"token operator\">:</span> <span class=\"token string\">'window'</span><span class=\"token punctuation\">,</span>\n    crypto<span class=\"token operator\">:</span> <span class=\"token string\">'empty'</span><span class=\"token punctuation\">,</span>\n    process<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    module<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    clearImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    setImmediate<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>加上後，我們就可以 npm run build:prod 來產生正式的檔案 ( 會放在 dist 下 )</p>\n<p>然後就可以使用 npm run server:prod 來啟動 Server</p>\n<h2>參考資料</h2>\n<ul>\n<li><a href=\"https://angular.io/docs/ts/latest/quickstart.html\">https://angular.io/docs/ts/latest/quickstart.html</a></li>\n<li><a href=\"https://github.com/angularclass/angular2-webpack-starter\">https://github.com/angularclass/angular2-webpack-starter</a></li>\n<li>[https://github.com/angular/angular/issues/5755]((<a href=\"https://github.com/angular/angular/issues/5755\">https://github.com/angular/angular/issues/5755</a>)</li>\n<li><a href=\"https://github.com/typings/typings\">https://github.com/typings/typings</a></li>\n<li><a href=\"http://www.typescriptlang.org/docs/handbook/tsconfig.json.html\">http://www.typescriptlang.org/docs/handbook/tsconfig.json.html</a></li>\n<li><a href=\"https://github.com/s-panferov/awesome-typescript-loader\">https://github.com/s-panferov/awesome-typescript-loader</a></li>\n<li><a href=\"https://github.com/ampedandwired/html-webpack-plugin\">https://github.com/ampedandwired/html-webpack-plugin</a></li>\n</ul>","excerpt":"前言 前篇我們已經可以透過 webpack + Angular2 跑出 Hot Reload ，但其實我們還有許多事情要繼續整合處理，\n例如我們希望可以透過 npm start 進行打包 ( webpack-dev-server…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Angular2 - 與 Webpack 整合環境設定 - 2","tags":["JavaScript","Angular2","Webpack","TypeScript"]},"fields":{"slug":"/2016/04/21/Angular2-Env_Setup_2/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Angular2-Env_Setup_2/Angular2-Env_Setup_2.md"},"previous":{"frontmatter":{"path":null,"title":"Hexo - 使用 Travis CI 自動佈署 Blog","tags":["Node.js","Hexo","Github","Travis CI"]},"fields":{"slug":"/2017/01/01/Hexo-Use_Travis_CI_Auto_Deploy_Blog/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Hexo-Use_Travis_CI_Auto_Deploy_Blog/Hexo-Use_Travis_CI_Auto_Deploy_Blog.md"}}}}