{"componentChunkName":"component---src-templates-page-js","path":"/2014/06/04/Azure-Azure-File/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Azure -  Azure File","date":"04 June 2014","author":"Sky Chang","excerpt":null,"tags":["Azure"],"coverImage":null},"id":"fca7a97c-55b6-54e4-8588-ac0e7277291b","html":"<p>如前面幾篇文章所述，這次北美TechED，根本就是技術大爆走，ASP.NET一堆新玩意，而Azure也冒出一堆之前完全沒聽過的東西…而今天我們就要來看看小弟很期待的一個Azure新的東東，也申請了很久，才終於申請下來的新玩意。</p>\n<p>這是Storage家族的一個新成員，就如同其名一樣，它的功能就是存File !! ( 迷之聲 : Storage Blob和Drive也都是存File阿… )，但這個東西的取向和Blob完全不同，Blob比較偏像定位於Paas層級的應用，可以讓我們使用Cloud Service或是Web Site時，有另外一個快速讓應用程式存放檔案的地方…</p>\n<p>而Drive，在以前，就通常都是用在Iaas層級，讓我們的VM，多一顆硬碟…</p>\n<p>那Azure File呢!?…基本上Azure File出現後，幾乎就是在打Drive的臉了…( Orz… )，Azure File簡單的說，就是支援SMB 2.1協定的檔案存放區；是低，發現了嗎!?，也就是說，我們可以輕易地將VM透過網路芳鄰來連線Azure File (抖抖)，而未來，相信支援SMB 3.0後，我們就可以輕鬆的遠端增加硬碟了… ( 嗯，感覺就像昂貴的OneDrive… )</p>\n<p>而Azure File的出現，也提供了我好友之前問我的一個問題，\"我要怎樣讓Azure多台的VM的檔案Sync與備份\"…</p>\n<p>是的，以前Drive沒辦法做到這點，因為Drive同時間，只能掛在一台VM下；而Blob又要經過軟體的處理，也很麻煩，而現在Azure File就可以讓多個VM掛上他拉!!!! ( 讚 )</p>\n<p>當然，現階段Azure File 畢竟是SMB 2.1，而且還是Preview，所以可能有些應用程式，也沒辦法裝在Azure File上，還是必須透過Drive；但未來如果出了SMB 3.0，後勢可看好阿!!!</p>\n<p>最後，關於Azure File，如果大家想要深入了解，可以參考<a href=\"http://www.dotblogs.com.tw/regionbbs/archive/2014/05/20/azure.files.overview.aspx\">小朱前輩的這篇文章</a>，而如果想看小弟喇賽文XDD，那也可以繼續讀下去啦~~</p>\n<p>要使用Azure File，不意外，他當然就是被歸類在儲存體裡面，所以我們要建立一個新的…而畢竟現在是Preview，所以之前建立的儲存體，小弟看了一下，是沒有包含Azure File的。</p>\n<p><a href=\"http://lh4.ggpht.com/-gPbzzywyLes/U43z-5f3NiI/AAAAAAAAI8Y/COeAi30fE_s/s1600-h/image%25255B3%25255D.png\"><img src=\"http://lh3.ggpht.com/-O2vpGEitWu4/U430APRde4I/AAAAAAAAI8g/UuYCYbrZXQU/image_thumb%25255B1%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>完成後，就可以看到檔案了…</p>\n<p><a href=\"http://lh4.ggpht.com/-Z5jWhdaPJrk/U430BBXmXuI/AAAAAAAAI8o/wHKzvS5qGo8/s1600-h/image%25255B8%25255D.png\"><img src=\"http://lh3.ggpht.com/-GPYEp95oea0/U430B2YeezI/AAAAAAAAI8w/SoxtVQMuJIw/image_thumb%25255B4%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>是的，這樣就建立完成了喔!!</p>\n<p>接下來，我們就要用指令的方式，來建立一個準備要存放檔案的地方，而這邊，畢竟是Preview…所以官方這邊也只提供了兩種方式來建立，一個是使用PowerShell，一個是Api…基本上，並不是每個人都會無聊去裝Visual Studio，所以我們這邊還是使用PowerShell來進行建立；而相信以後正式推出後，會更加方便。</p>\n<p>首先要先<a href=\"http://go.microsoft.com/fwlink/?LinkID=398183\">下載</a>這個官方提供的檔案，下載完後，先不要急著解壓縮，我們要先解除封鎖。</p>\n<p><a href=\"http://lh3.ggpht.com/-MzpE_g6P_SM/U430C6MyCrI/AAAAAAAAI84/dKWI57EUqTk/s1600-h/image%25255B17%25255D.png\"><img src=\"http://lh5.ggpht.com/-x70e8eaF6rs/U430D1DgZzI/AAAAAAAAI9A/KOykGmj_uWQ/image_thumb%25255B9%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>完成之後，我們再解壓縮，小弟是直接解壓縮到C目錄下。</p>\n<p>然後打開PowerShell並輸入以下指令，如下圖，我們要把官方準備好的module載入到PowerShell裡面去。</p>\n<blockquote>\n<pre>import-module .\\AzureStorageFile.psd1</pre>\n</blockquote>\n<p><a href=\"http://lh5.ggpht.com/-J_IUNq28ZYI/U430FHHzHYI/AAAAAAAAI9I/5TEzMJ7nsFQ/s1600-h/image%25255B21%25255D.png\"><img src=\"http://lh4.ggpht.com/-boJIyd02lxU/U430GQaJEpI/AAAAAAAAI9Q/YvwnGWN_Rx8/image_thumb%25255B11%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>完成之後，接下來輸入以下指令 ( 以下是兩行喔… )，其中share name是名稱，而account name則是這個Azure Storage的名稱，而同樣的Azure Storage有key，就是填入到account key了…可以參考下圖。</p>\n<blockquote>\n<pre>$ctx=New-AzureStorageContext &lt;account name&gt; &lt;account key&gt;</pre>\n<pre>$s = New-AzureStorageShare &lt;share name&gt; -Context $ctx</pre>\n</blockquote>\n<p>如下，這樣就完成了設定。</p>\n<p><a href=\"http://lh4.ggpht.com/-yUFsQfUj9KE/U430HU8ZU2I/AAAAAAAAI9Y/sLnHX7LZgAU/s1600-h/image%25255B25%25255D.png\"><img src=\"http://lh5.ggpht.com/-1NlFwkwioXQ/U430IeMGM9I/AAAAAAAAI9g/zZV1sb4E3as/image_thumb%25255B13%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>接下來，我們要使用Azure的VM進行連線，但不要從Azure管理介面下載連線檔案，我們使用Windows內建的遠端桌面，並且設定如下；透過此方法，我們就可以將Local的磁碟機map到vm上去，到時候要複製檔案也比較方便。</p>\n<p><a href=\"http://lh3.ggpht.com/-Eo0IGZ48410/U430JGX5cmI/AAAAAAAAI9o/SBEgfaf6PRM/s1600-h/image%25255B40%25255D.png\"><img src=\"http://lh5.ggpht.com/-tEBKrV1CrSA/U430KgLJbYI/AAAAAAAAI9w/VbK0mOJJqUk/image_thumb%25255B22%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>連線進去後，我們要讓我們的vm去map Azure File。</p>\n<p><a href=\"http://lh5.ggpht.com/-1v_KQB67-5U/U430LrzpDSI/AAAAAAAAI94/n3-vMm4BgSY/s1600-h/image%25255B30%25255D.png\"><img src=\"http://lh3.ggpht.com/-GYt6huzHzHg/U430M6N-lHI/AAAAAAAAI-A/brKWk1RLXrM/image_thumb%25255B16%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>這邊要輸入網址，其中storagename就是Azure Storage的名稱，而sharename則是剛剛建立時取的名稱；另外Connect using different credentials記得打勾喔…因為我們要使用Azure Storage的驗證，按下確定之後，要輸入帳號，帳號就是Azure Storage的名稱，而PW則是Azure Storage的金鑰。</p>\n<p><a href=\"http://lh6.ggpht.com/-6d7ILEFIgaY/U430NkvGm7I/AAAAAAAAI-I/Fd8j8upCSbE/s1600-h/image%25255B35%25255D.png\"><img src=\"http://lh4.ggpht.com/-4QzNenVuf5w/U430OtmUHuI/AAAAAAAAI-Q/hQ-7sF3qQ_Y/image_thumb%25255B19%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<p>完成之後，除了Azure File外，我們也把Local給掛上去了，這樣要處理檔案就更加方便了。</p>\n<p><a href=\"http://lh5.ggpht.com/-dsgmHa3FjSY/U430PimBp6I/AAAAAAAAI-Y/vPCzT4eJSvo/s1600-h/image%25255B44%25255D.png\"><img src=\"http://lh4.ggpht.com/-olynLSa4eA8/U430QqmIuZI/AAAAAAAAI-g/sk8oPZQz6Qc/image_thumb%25255B24%25255D.png?imgmax=800\" alt=\"image\" title=\"image\"></a></p>\n<h4>參考文章</h4>\n<ul>\n<li><a href=\"http://www.dotblogs.com.tw/regionbbs/archive/2014/05/20/azure.files.overview.aspx\" title=\"http://www.dotblogs.com.tw/regionbbs/archive/2014/05/20/azure.files.overview.aspx\">http://www.dotblogs.com.tw/regionbbs/archive/2014/05/20/azure.files.overview.aspx</a></li>\n<li><a href=\"http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx\" title=\"http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx\">http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx</a></li>\n</ul>","excerpt":"如前面幾篇文章所述，這次北美TechED，根本就是技術大爆走，ASP.NET一堆新玩意，而Azure也冒出一堆之前完全沒聽過的東西…而今天我們就要來看看小弟很期待的一個Azure新的東東，也申請了很久，才終於申請下來的新玩意。 這是Storage…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"PowerShell -  移除import-module所選擇的永不執行或是永遠執行","tags":["PowerShell"]},"fields":{"slug":"/2014/06/03/PowerShell-移除import-module所選擇的永不執行或是永遠執行/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/PowerShell-移除import-module所選擇的永不執行或是永遠執行.md"},"previous":{"frontmatter":{"path":null,"title":"Visual Studio - Visual Studio 14 CTP 1 隨便玩","tags":["ASP.NET MVC","Visual Studio"]},"fields":{"slug":"/2014/06/04/Visual-Studio-Visual-Studio-14-CTP-1-隨便玩/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/Visual-Studio-Visual-Studio-14-CTP-1-隨便玩.md"}}}}