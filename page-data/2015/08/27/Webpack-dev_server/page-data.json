{"componentChunkName":"component---src-templates-page-js","path":"/2015/08/27/Webpack-dev_server/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Webpack - 使用 Webpack Dev Server 進行開發","date":"27 August 2015","author":"Sky Chang","excerpt":null,"tags":["JavaScript","Webpack","CSS","HTML"],"coverImage":null},"id":"654a446e-2597-5fac-b8f8-a0670a9efc41","html":"<h2>webpack 與 Live Loading</h2>\n<p>前面介紹了許多基本的操作，也使用了 watch 來監控檔案的變化，但，人懶是沒有極限的，雖然它會自動幫我們重新綁定，但每次還要按一下瀏覽器的重整，還是粉麻煩阿!!!，所以這一篇，來介紹一下 webpack-dev-server。</p>\n<h2>webpack-dev-server</h2>\n<p>webpack-dev-server 是一個非常小的 Node.js Express server，他使用了 webpack-dev-middleware 來服務 webpack 的綑綁功能，而 webpack-dev-server 背後使用了 socket.IO ，所以當發生事件的時候，Server 會去通知 Client 端坐一些事情；至於甚麼事情，當然就是自動地將瀏覽器重整了~~</p>\n<p>簡單的說，就是當改了檔案，發生重新綑綁事件，並且完成綑綁動作後，就會通知瀏覽器，執行重整瀏覽器的功能，這樣子，開發人員就完全不用按下重整按鈕，打完程式碼，馬上就可以看畫面結果，達到懶人的極致!!但要注意，使用 webpack-dev-server 是用於開發階段，他產生出的 bundel.js 是放在 memory 裡面的，所以要上正式環境，還是要執行一下 webpack ，基本上 webpack-dev-server 是用於測試環境的，不是拿來用於編譯的喔! </p>\n<p>而要使用 webpack-dev-server 之前，當然還是先使用 npm 裝一下吧~~ 同樣的，要裝在global 或是專案底下，就看大家覺得哪一個比較好用，小弟這邊還是先以裝在專案底下為範例說明。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install webpack-dev-server -g</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install webpack-dev-server -D</code></pre></div>\n<h2>執行 webpack-dev-server</h2>\n<p>安裝完成後，我們就可以簡單執行一下，如下指令， --content-base 代表的是 Web Server 運行起來的根目錄，應該會在哪個資料夾下，所以我們這邊設定，根目錄為 wwwroot 資料夾。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\\node_modules\\.bin\\webpack-dev-server --content-base wwwroot</code></pre></div>\n<p>執行的結果如下，我們可以看到，預設的網址位置為<a href=\"http://localhost:8080/webpack-dev-server\">http://localhost:8080/webpack-dev-server</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a792948a12ff5b006b7ea4872ac88be/1d5a8/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABaUlEQVQ4y+2QXUvjQBiFJ5OkNDFJm7RJam1jakMTYf3ob5VCNbTC1o1Irb1aWNgf9+y0KBj0QlgvvPDiMC9n3vMwZ8TVvKS8uWaxWLBcLqmqitXqjl+bR6qnNav1I/fbNdV2s/d+PmyV/5e79W+qzR/KxS3X8zmz2YyyLBHjkxPiOCY5ThhnY/r9PnGvhxcENJ0DmgeOko3QDYQQz9rNUkl/5Qk8z0MUk4I8L0iTlOFgiGVZaELDkDqW2aRhmOhSommiFn7RzpdS7ucwDBFx0aNz2KKTBrSiFn7k0wgbtAdtgsxHM+S7oDpU25/dbhfhBR5Hg0OKHwWT0wl5kZNmI1V/RJi7WKmN7TbQXBU26hBd198C/bZPMkw4PztnOp1yeXFJNs4YHQ/pjzrYExPNVwGpQK9q72C2bb8FBurzdxeu6+I4zl5SLUuplvQ65EOVX579P6oBTdP8XKBhGN/ALwSMouhzgUmS8A9dkGOu5IqqaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/3a792948a12ff5b006b7ea4872ac88be/78d47/01.png\"\n        srcset=\"/static/3a792948a12ff5b006b7ea4872ac88be/56d15/01.png 200w,\n/static/3a792948a12ff5b006b7ea4872ac88be/d9f49/01.png 400w,\n/static/3a792948a12ff5b006b7ea4872ac88be/78d47/01.png 800w,\n/static/3a792948a12ff5b006b7ea4872ac88be/1d5a8/01.png 979w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>我們就可以使用瀏覽器看一下結果，基本上畫面是出來了，但 js 沒效果!? 找不到 !?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/149023873d7a35ed8b1e6586ae8a856a/bbbf7/02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAxUlEQVQoz8WR2QrCMBBF8/9/YmrSiuCL4kJb27rV+FzoYv+iyzUdiRTxSQMGDndyw1ySCfOjBdabBYJwhePJR3zYIjnuoG4xlNojvYY4X3zSNA1wUyGuKqIzqrW31xmHcIYoWYJx6YELCUe6mLoeKTdof2AixKt25FP5SIc+MZtDahgsL9Z1HZqmQdu2VmB931Oy0Z9vaMKsBlqd4d8DxzP/BP3yt4yDjGf/yXVd4517VaHSDGr2ZVmSNybLMiLPcxRFQd4DqfeURJ6/Z+wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"02\"\n        title=\"02\"\n        src=\"/static/149023873d7a35ed8b1e6586ae8a856a/78d47/02.png\"\n        srcset=\"/static/149023873d7a35ed8b1e6586ae8a856a/56d15/02.png 200w,\n/static/149023873d7a35ed8b1e6586ae8a856a/d9f49/02.png 400w,\n/static/149023873d7a35ed8b1e6586ae8a856a/78d47/02.png 800w,\n/static/149023873d7a35ed8b1e6586ae8a856a/64756/02.png 1200w,\n/static/149023873d7a35ed8b1e6586ae8a856a/bbbf7/02.png 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Inline mode</h2>\n<p>甚麼是 Inline mode ，根據官方的文件指出，當我們監控的 js 等檔案，變動的時候，它會自動的重新編譯，並且將編譯好的檔案，存一份到記憶體中，而網頁 include 進來的 js ，不是去抓實體存放在硬碟的 js 檔案，而是抓取記憶體的 js 檔案，所以這代表的幾件事情，一個是實體的 js 實際上是不會被編譯到的，所以後續要用於正式環境上，還是要執行 webpack 來綑綁；第二件事情，既然他存放在 memory ，那實際上，到底存在 memory 上的 js 檔案，會對應到哪個 url 呢?? 畢竟是在記憶體裡面阿!? 這就帶出了我們上面的那個指令 --content-base ，預設的情況下，webpack-dev-server 會將存在記憶體的 js 對應到我們使用 content-base 的那個目錄下。</p>\n<p>所以換言之，為什麼我們剛剛執行的畫面，js 找不到!? 我們回到 index.html 的 script 標籤看一下；是低，因為我們的 script 的 src 指向的是 app/bundle.js。</p>\n<p>'''html\n<script src=\"app/bundle.js\"></script>\n'''</p>\n<p>但實際上，他對應的 bundle.js 卻是在 wwwroot 底下...所以這時候，我們就要去調整一下 webpack-config.js ，我們就可以透過 publicPath 來建立虛擬的 url ，所以我們這邊建立的虛擬對外路徑為 /app 。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    entry<span class=\"token operator\">:</span> <span class=\"token string\">\"./wwwroot/app/enter.js\"</span><span class=\"token punctuation\">,</span>    \n    output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> __dirname <span class=\"token operator\">+</span> <span class=\"token string\">\"/wwwroot/app/\"</span><span class=\"token punctuation\">,</span>\n        publicPath<span class=\"token operator\">:</span> <span class=\"token string\">\"/app\"</span><span class=\"token punctuation\">,</span>\n        filename<span class=\"token operator\">:</span> <span class=\"token string\">\"bundle.js\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    module<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        loaders<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span> test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.css$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token operator\">:</span> <span class=\"token string\">\"style!css\"</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>加上去後，重新 run webpack-dev-server ，js 就可以順利運作了。</p>\n<h2>Live Loading</h2>\n<p>這時候，如果我們去改了一下 js 的檔案，你會發現 webpack-dev-server 會自動 watch，並且執行編譯，而且編譯完成後，畫面會閃一下，自動的 Live Loading喔!!連重整瀏覽器都不用了，達到了懶人的極致~~</p>\n<p>最後，我們可以看到下圖，webpack-dev-server 底下的 index ，就是目前瀏覽器的這頁，而這頁也是動態產生的，如果去看一下這頁的source，可以發現，它其實是去讀取 <strong>webpack<em>dev</em>server</strong> 底下的 live.bundle.js喔。</p>\n<p>所以簡單的說，原生的 index.html ，裡面使用了 app/bundle.js，透過 webpack-dev-server 後，它會幫我們產生一個虛擬的目錄 webpack-dev-server ，而會把 index.html 的內容複製一份到 webpack-dev-server 目錄底下，並且置換掉 scrpit 標籤的\nsrc ，也就是 app/bundle.js，改成 <strong>webpack<em>dev</em>server</strong>/live.bundle.js ，而 live.bundle.js 裡面的東西，就是我們上面設定 publicPath 的內容。</p>\n<p> 所以這代表的是，app/bundle.js 底下的東西，都不會在 webpack-dev-server 進行編譯。</p>\n<p> 另外，就算我們實際上 app/bundle.js 底下有真實的 js ，但實際上，它抓的 js 還是 <strong>webpack<em>dev</em>server</strong>/live.bundle.js 底下的 js，完全不會和 app/bundle.js 有所衝突。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c0547e321654fd6b720ed18b408db139/bbbf7/03.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABgElEQVQoz62S107DMBSG/f6vABJDIHgTkOCKjUqaZjTNdGI3cZz5c+xSiRsQCBJ9Oh5n/gk7vbjEwdEZDk/OcXj8d1hVlvjPhwmRo20l6rq0KCXQNNXOEorudLdFqz9BZ3uMn7GazqXkYEniw/MWCAMHYbjCer1CECzJuvZs478hi0OIYgP5wZaasMgcJY8pzrH+y+UrmBSCNhHSvIAQVLFWVG1Cr3t0SkOnGZq4gM44rXcMeiBGTP0MWW0RRRuk5GfiGS9yJElCHRQoXBdjEqOPI3Si+lKn2bzzbNdCCkqWoiyNZFvS0HfAX18gHAfO7Q348xP4wz3EOvzRR6jrGovFgsZd2sQsfLiDd32F6OnR0qxciMAnjYR1rqrK0jSN3WdZZgMNZrKCJmvblmTS6LoOzKXMDlUIPA+J7yOgbtfULecceZ4jpSATbAIN+2R7Pic0lo3ThHEcMX+MMJI20y/+u2EY0Pc9JspjdGWKRlFK2ZG+Qn1zZ+QQJI+U0kryDkkuOJZtcqMDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"03\"\n        title=\"03\"\n        src=\"/static/c0547e321654fd6b720ed18b408db139/78d47/03.png\"\n        srcset=\"/static/c0547e321654fd6b720ed18b408db139/56d15/03.png 200w,\n/static/c0547e321654fd6b720ed18b408db139/d9f49/03.png 400w,\n/static/c0547e321654fd6b720ed18b408db139/78d47/03.png 800w,\n/static/c0547e321654fd6b720ed18b408db139/64756/03.png 1200w,\n/static/c0547e321654fd6b720ed18b408db139/bbbf7/03.png 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>( 備註 : 官方文件很多東西沒寫得很清楚，以上內容是小弟自行實驗和揣測，如有錯誤，請多包涵 )</p>\n<h2>另外一種實現 Live Loading</h2>\n<p>除此之外，官方也提供了另外一種方式實現 Live Loading，我們可以在 index.html 加上這段 script </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8080/webpack-dev-server.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>如下；這個時候，我們就可以直接使用 <a href=\"http://localhost:8080\">http://localhost:8080</a> 來訪問我們的網頁，一樣也會有 Live Loading 的效果。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Content-Type<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/html; charset=utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Test2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>btn<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>按我<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://localhost:8080/webpack-dev-server.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>app/bundle.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>結果如下圖，我們可以發現，沒有原本複雜的目錄結構了，但要注意的是，app/bundle.js 依舊是透過 webpack-dev-server 編譯出來的，並不是真實的 bundle.js 。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc3ca2fdbc48bb08f2149f2f0551a053/bbbf7/04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABSklEQVQoz62SyU7DUAxFn7rhJ/hYFp2Q+DeWCIk2rRoyvynzfLEjEgmVsqGWjp7jxPfZVxGe94CqWgFYYRz/j1DqkRJBgvdBGPMMbfaQagcZr2GSDWSyhpRbKLWF1jtk2QuK/JqcMNRr7R5RvIHnPUGcjwl8N4f0CgSvRyRvHj4dhSBskMQdiQF5CTTNNW0LRFGL08nA9yu4bgERnz8QHt5hAxee61CzBYYe49CiHxoMxDhSJ7pf6FGWGU2ZIE0VXVJMiy9hsxQljZNGBjWdPQl3XUeCI26FMQaO4yAMwyn/Iai0graGvMlRFAXKqqI/oKIpygWuc63v+wmt9SQmpSR7Mghr7VRM0xRxHONwPOByuSAIAvLFX+DnucYC3DP3NWRoXdcTovpOeDW+sSWn+eTgVW8xDMMCfz+f4pY3f/k2v+Mh2AYegnOOLy/12lXx+y41AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"04\"\n        title=\"04\"\n        src=\"/static/cc3ca2fdbc48bb08f2149f2f0551a053/78d47/04.png\"\n        srcset=\"/static/cc3ca2fdbc48bb08f2149f2f0551a053/56d15/04.png 200w,\n/static/cc3ca2fdbc48bb08f2149f2f0551a053/d9f49/04.png 400w,\n/static/cc3ca2fdbc48bb08f2149f2f0551a053/78d47/04.png 800w,\n/static/cc3ca2fdbc48bb08f2149f2f0551a053/64756/04.png 1200w,\n/static/cc3ca2fdbc48bb08f2149f2f0551a053/bbbf7/04.png 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>( 備註 : 官方文件很多東西沒寫得很清楚，以上內容是小弟自行實驗和揣測，如有錯誤，請多包涵 )</p>\n<h2>最終版的 Live Loading</h2>\n<p>上面的方式看起來很優，但是要增加一個 script 還是很麻煩，有時候要部屬到正式環境，還是要去做一下調整，所以終極懶人版，大家可以改成如下，我們去修改 webpack.config.js 檔案。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// entry: \"./wwwroot/app/enter.js\",   </span>\n    entry<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'webpack-dev-server/client?http://localhost:8080'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'./wwwroot/app/enter.js'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        path<span class=\"token operator\">:</span> __dirname <span class=\"token operator\">+</span> <span class=\"token string\">\"/wwwroot/app/\"</span><span class=\"token punctuation\">,</span>\n        publicPath<span class=\"token operator\">:</span> <span class=\"token string\">\"/app\"</span><span class=\"token punctuation\">,</span>\n        filename<span class=\"token operator\">:</span> <span class=\"token string\">\"bundle.js\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    module<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        loaders<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span> test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.css$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token operator\">:</span> <span class=\"token string\">\"style!css\"</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>其實這也是 React Hot Loader 的作法，簡單的說，就是把原本所需要載入的 js 檔案，也一併綑綁起來，這樣子，就可以不用管 script 了。</p>\n<p>基本上，到這邊，Live Loding 的架構就完成了。</p>\n<p>當然，我們一樣可以把 webpack-dev-server 的指令塞到 package.json 裡面，這些都是一樣的。</p>\n<h2>webpack-dev-server 的幾種應用</h2>\n<p>最後，針對 webpack-dev-server 底下，我們在介紹一下有幾種配合的可能。</p>\n<p>一種可能是直接透過 webpack-dev-server 當作我們的 web server 來進行開發，這種情況最單純，尤其是純粹只開發前端。</p>\n<p>但還有另外一種可能，當我們使用 IIS Express 或是其他的 web server 當作我們的開發環境時，畢竟，要使用 webpack-dev-server 這台 web server 一定看不懂 cshtml 或是 aspx 等等後端的東西，那這個時候，就可以採用另外一個方式，將 webpack-dev-server 當作資源伺服器，簡單的說，我們讓 cshtml 裡面的 script 標籤來參考到 webpack-dev-server 所提供的 bundel.js 檔案，但開發完後，要切換成真正的 script 就是了。</p>\n<p>最後一種，情況如第二種情形，但我們透過 webpack-dev-server 的 proxy 功能，來映射到 IIS Express 的 ip 位置上，這個部分，後續再進行介紹。</p>\n<h2>參考資料</h2>\n<ul>\n<li><a href=\"http://www.jianshu.com/p/8adf4c2bfa51\">http://www.jianshu.com/p/8adf4c2bfa51</a></li>\n<li><a href=\"https://leanpub.com/survivejs_webpack/read\">https://leanpub.com/survivejs_webpack/read</a></li>\n<li><a href=\"http://webpack.github.io/docs/\">http://webpack.github.io/docs/</a></li>\n<li><a href=\"http://segmentfault.com/a/1190000002551952\">http://segmentfault.com/a/1190000002551952</a></li>\n<li><a href=\"https://github.com/petehunt/webpack-howto\">https://github.com/petehunt/webpack-howto</a></li>\n<li><a href=\"http://segmentfault.com/a/1190000002552008\">http://segmentfault.com/a/1190000002552008</a></li>\n<li><a href=\"https://medium.com/html-test/webpack-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B-585f2bc952b9\">https://medium.com/html-test/webpack-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B-585f2bc952b9</a></li>\n</ul>","excerpt":"webpack 與 Live Loading 前面介紹了許多基本的操作，也使用了 watch 來監控檔案的變化，但，人懶是沒有極限的，雖然它會自動幫我們重新綁定，但每次還要按一下瀏覽器的重整，還是粉麻煩阿!!!，所以這一篇，來介紹一下 webpack-dev-server…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"Webpack - 使用 Webpack 載入 CSS 與設定檔","tags":["JavaScript","Webpack","CSS","HTML"]},"fields":{"slug":"/2015/08/26/Webpack-CSS_Loader_and_config/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Webpack-CSS_Loader_and_config/Webpack-CSS_Loader_and_config.md"},"previous":{"frontmatter":{"path":null,"title":"Hexo - 安裝 Hexo","tags":["Node.js","Hexo","Github"]},"fields":{"slug":"/2015/10/06/Hexo-Install_Hexo/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/Hexo-Install_Hexo/Hexo-Install_Hexo.md"}}}}