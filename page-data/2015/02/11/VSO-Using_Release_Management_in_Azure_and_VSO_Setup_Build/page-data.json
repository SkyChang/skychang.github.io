{"componentChunkName":"component---src-templates-page-js","path":"/2015/02/11/VSO-Using_Release_Management_in_Azure_and_VSO_Setup_Build/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"VSO - 使用 Release Management 搭配 Azure 和 Visual Studio Online PS 與組建設定篇","date":"11 February 2015","author":"Sky Chang","excerpt":null,"tags":["Azure","VSO","Release Management","PowerShell"],"coverImage":null},"id":"19a269ac-30a9-526b-876e-9a558bebce56","html":"<h2>Agent-Less</h2>\n<p>在開始設定編譯的相關東西之前，有個東西必須先讓大家知道，如果大家有玩過Release Management與地端的Server搭配的話，大家可能會有印象，以前都必須要在目標Server裝上Release Management Agent；而裝了Agent的Server，就可以通知Release Management Server一些相關的資訊，例如，目標Server是否還活著。</p>\n<p>處此之外，裝了Agent的Server，還會不停的問Release Management Server，是否有新的佈署，我是否要和Release Management的DB，去下載一些工具，來進行佈署。</p>\n<p>OK，到上面為止，那是之前的版本 ( 未來也通用 )，但Release Management的下一個版本，開始支援另外一個模式，那就是Agent-Less模式。</p>\n<p>這個模式的特色，就是不用再目標的Server裝上Agent，而是直接透過Release Management Server將PowerShell送去目標Server，然後再由Release Management Server遠端的遙控目標Server來執行此PowerShell ( 透過Remote PowerShell )；這也是為什麼，一開始的Azure VM要裝Release Management套件，那裏面其實就是去安裝PowerShell和開啟遠端執行功能。</p>\n<p>所以，換言之，如果是使用Agent-Less模式，那原本MS準備好的XCOPY等...Tool也完全都不能用了...也因此，如果有玩過Release Managment在地端的朋友們，可能就會發現，工具選單完全不見了，只剩下動作選單....</p>\n<h2>準備PowerShell</h2>\n<p>因為要使用Azure，就只能使用Agent-Less模式，所以我們這邊要準備PowerShell，大家可以去這裡<a href=\"http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-components-postattachments/00-10-57-12-05/RMWebAppDeployment.zip\">下載</a>，這個PowerShell的出處來自於<a href=\"http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/12/deploying-and-testing-web-applications-using-release-management.aspx\">微軟的Blog</a>。</p>\n<p>那這些PowerShell預計要做哪些事情哩??</p>\n<ul>\n<li>將Powershell DSC module安裝到目標Server</li>\n<li>佈署編譯好的最後版本到目標Server</li>\n<li>設定目標Server Web Site的存取權限</li>\n<li>跑自動化測試 ( 此篇文章未提，請讀者自行測試。 )</li>\n</ul>\n<p>另外，要執行這些PowerShell，需要以下條件。</p>\n<ul>\n<li>必須擁有<a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=40855\">WMF 4.0</a> 在目標Server ( 透過Azure的擴充套件，我們已經安裝過了。 )</li>\n<li>目標Server必須要有vstest.console.exe 才能進行自動化測試，( PowerShell使用 vstest runner 來替代 mstest), 並且將資訊回傳給VSO或TFS，如要安裝 vstest runner 可以到 <a href=\"http://go.microsoft.com/?linkid=9832003\">Visual Studio Test Agent</a> 和 <a href=\"http://go.microsoft.com/?linkid=9832116&#x26;clcid=0x409\">Team Explorer</a> SKUs 到目標Server . ( 此篇文章未提，請讀者自行測試。)</li>\n</ul>\n<p>當下載完成後，請注意!!，下載下來的PowerShell其實有點問題，第一個問題是路徑問題，這個問題我們後面會進行解決，第二個問題是xWebAdministration會找不到的問題，關於第二個問題，請去這裡<a href=\"https://gallery.technet.microsoft.com/scriptcenter/xWebAdministration-Module-3c8bb6be\">下載新版的xWebAdministration</a>。</p>\n<p>目前此篇完成的版本，是使用xWebAdministration 2015/01/06的版本。</p>\n<p>當下載完成之後，我們先把微軟Blog下載的那包檔案解壓縮，然後進入到\"APP\" => \"Deploy\" => \"Modules\"，並把xWebAdministration刪掉，然後我們再把下載下來的xWebAdministration整包移到剛剛刪除的那個目錄下，如下圖。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/140b52133b2255ccad88caa1e298f2a0/bbbf7/00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACfklEQVQ4y3WTbW/TSBSF/f9/C0IChFa7QLW0UaESIHU/NKSN2ybEjePXscee8WueveM0XaiWKx2Nfe0598y9Z7wX72a8/fgZ/3rB/PuC5dLH929ZfL9iPp/jy7vL3SyXkve5ktzs0wWz2YzT01NOTk6m9ezsjPPzc7y87rkPC1JVkmnLLpO1tGRpQLgLUUqRpAlBlBMlGf24px/2/F/s93s8ayoqXZCs7shXK6K7e9Rmg64NuqqpKi2kuaAgy3K0LqmrirZt6B4x9B3j0E/PnjE1wTakrTXljx+kN3OK2yXFYjFV7URM04HtBtpBNkquGUDbjtK0gu5JoaSF0LbcrTcM40jf9RRRKNqFIN9xffEavf4bE/xJ6X9DLe5pH87Jr96w/fKS+PIV6eVr6tu/sOEH4m9/OEJLnseM0pthHHDvLpqm5P3FV9b/fELHK8o0Ig1jrNpJkQVVElCnD9RuzR5oypAs3OD1vSUKlzilTlrXHY7QW0WRR8QyiGyzRZcVph8osoIiVZhuxDQ99SN03WLaXgg7magoGGRyozt230+EY1eh1QO2qbHS5zwIyIIN2a2PyXNaKdy2rewbqGr5xxpKXeG1rSF9JHRhjaGxDUan6MynUNmh4TJJm+4wacoomx2RIzzaZRLhbNM0jVijIkli1qv7ySqx0tQT4Z3Y5UBopbfjb7z38+odP2jx4m4bTD2s2oHGKFR8TZrG0/eyLMUF3dPm38E7PjwPpzBLNuKAfDqaM/M4DEddP2t0FSY8ET6v6iKJt0SRG8phSJ0Y2125Qc79H2SQ+wP9sYT3vB9PhOGKcH1JpaQNdYQtt6hErmX8K2q1odGhYMsuWvMvyiwus+KtrpYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"00\"\n        title=\"00\"\n        src=\"/static/140b52133b2255ccad88caa1e298f2a0/78d47/00.png\"\n        srcset=\"/static/140b52133b2255ccad88caa1e298f2a0/56d15/00.png 200w,\n/static/140b52133b2255ccad88caa1e298f2a0/d9f49/00.png 400w,\n/static/140b52133b2255ccad88caa1e298f2a0/78d47/00.png 800w,\n/static/140b52133b2255ccad88caa1e298f2a0/64756/00.png 1200w,\n/static/140b52133b2255ccad88caa1e298f2a0/bbbf7/00.png 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>將檔案放置專案</h2>\n<p>接下來，我們把APP底下的Deploy，整個複製到你要佈署的專案裡面去，如下圖；會這樣做的原因，是因為，Release Management Server只能透過編譯出來的檔案，來傳送到目標Server；也因此，我們把PowerShell放到專案裡面，以利後續透過VSO Build的時候，能順利的讓Release Management Server抓到。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 265px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d30d6192259fc131c2663f8026d427f/28773/01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 227.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/2d30d6192259fc131c2663f8026d427f/28773/01.png\"\n        srcset=\"/static/2d30d6192259fc131c2663f8026d427f/56d15/01.png 200w,\n/static/2d30d6192259fc131c2663f8026d427f/28773/01.png 265w\"\n        sizes=\"(max-width: 265px) 100vw, 265px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>另外，本篇文章目前沒提到測試的部分，但如果有興趣的朋友，可以將測試的PowerShell，如下圖，放到測試的專案裡面去。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0909d0a984a41efd8dcd786a26a40d53/1dbb4/02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACEUlEQVQ4y5VSy24TQRD0h3PjDEQYLnwGEignOOSAEh7CQbbjINuRndje9T7mubM7M+uiZ9YxDiAQI5Vmt9VdVd09vTevH+PifR/s8inywTMUgyfIzk+xfHeB/PwMctQ/wgusP52guHy+/38ZY2Lcx+bsBINXj9B7++ELvs4YrDGodAMlDbgwSLc5BFfQylCshqS4FBqKEGJN7ek7pbhGYyzcDrhbDdGT2wmk0igYi3dVN8iZBGMcWV5QTKEUCqskh24agoWuDAzlzebfsdok9E2ixiO7/YZemUxQNTtyJyAEA+OCVBW5lORyS7eAqioIEhSLBXSaoiZiQx0FYkWCQgo0DijW5FCkQ3Cew1lSNRJaUzHnSNcbsKIALzqXtdbI5nMIckTdwXtPRJ1wVdEYyOHt7DN6DRsj3UypqMJuF1IBS47YdIpyNoNZLkFKMd4SqrqO7gIckYaa1jtYD7DkqiPM0hsUBSNV1xFSS36P1tpYdEDbot3j/rStj7fKrjvCbTKnVs0hQdDc/FFB8H3v/vj8FOpyZSTkYyxuRjRHeUjMsgzOuQdFDwl2v8SPCC2/Rr69i8+E0SbDbMqy/I3w7zgizNdXyAoR5xZIwvaMMfivsyeMM1TZEFN6oLWp41ICaUVb/hcsLSuIBzhnu9mntOVyM8JylYbeDoIhKTxYTu8xLOhPaPYdBeKWCBPlMZ58xA9mheLwpgQNIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"02\"\n        title=\"02\"\n        src=\"/static/0909d0a984a41efd8dcd786a26a40d53/78d47/02.png\"\n        srcset=\"/static/0909d0a984a41efd8dcd786a26a40d53/56d15/02.png 200w,\n/static/0909d0a984a41efd8dcd786a26a40d53/d9f49/02.png 400w,\n/static/0909d0a984a41efd8dcd786a26a40d53/78d47/02.png 800w,\n/static/0909d0a984a41efd8dcd786a26a40d53/1dbb4/02.png 852w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>設定組建</h2>\n<p>接下來，我們透過Visual Studio來建立一個新的\"組建定義\"。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/788bf391d0339aa8e610d9e54ab6d957/9b76f/04.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABhElEQVQ4y82S2VaDMBRF+YxOUCjVMgRCaYEwdbJdWqflg///K8ebWDqw1Prggw9nkZBzd05yoz0+vaKuV1gsVqiXG1TlAnleoaqWKIpKjWezVCnLCqSpUONcFOStsd7sqHZN3hol1Wo8zjBPBAQZxPIefJqA84gMJQZ9HbpuwDBMmKaFycSB43iI4wQxQaNojpBPMaO5oM0S4mhClPC8AIxxBEEE12VU5Cqg7/uwrBG63d4BPMRwaCmf74eqppGcS2kyqgRKk5RHQE677h/2YD5Dp9NFr9fHYKAryQ2CYHoM0JZKKMnND5fgLoEykYOFHNbIplSmgkq4aV4C22AtTfMjkJFCFmKXJHjbbtU3Iajr+bDtsUp3czP5EnQEni8wJoEcd5Tu/fkFmzSFTfdm0L1JmGzMeHz7M7BZbAzyPr2AoygrTFwPHWpIvzdQR5bNaR/5KvCzeyG9tYTgTD0Tx/EP8tQruJrwdOSTqbnXMJyqRCd9D7sAnnetPW7r1wn/Qv8f+AH7Cq14/pynRQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"04\"\n        title=\"04\"\n        src=\"/static/788bf391d0339aa8e610d9e54ab6d957/78d47/04.png\"\n        srcset=\"/static/788bf391d0339aa8e610d9e54ab6d957/56d15/04.png 200w,\n/static/788bf391d0339aa8e610d9e54ab6d957/d9f49/04.png 400w,\n/static/788bf391d0339aa8e610d9e54ab6d957/78d47/04.png 800w,\n/static/788bf391d0339aa8e610d9e54ab6d957/9b76f/04.png 978w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>基本上，組建定義的部分，和一般設定沒甚麼兩樣。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a27c92c0034e05086f9f9a16fa5f753b/bbbf7/05.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACaUlEQVQoz5WSS08TURTH51MgLjBRCp2UKZ12ZtqZaYcC4SEoCQv3Jm4UY4LPSGJM3BkT5VUGsAUSiB/BpVsXLkzkaVGmYIsKYgsK9AEtf89cNaALHyf55dx7z73/c869l2uob4Qq+aCrOhRFQyCgQ1WD8CsqJMkPn09meL0y/HIAuhaCRig0tn0wWAePx0dnVciyH5xktEDqvAjt3CU0NrWiPhxGuL4Jmm4gZDRApwP2OKCGGIrfThiCQbEAJdYImcRFUWaiXM99E5OvCph6nsKTZ3N4+iKBmbiFhTcJzC1amCd/FHt9Nr4EK/kBfZFR8IIIr0+B2+2BqgXBRaMx7H7dQjqzhbX0DrbzJeztE8Uj7P9KvrAP28Ynp8B7SUyUwPM8tS6CM80RFszl8/huBzg4+DPFYpHtfDwZg1sS0EjvYBh1dP/U8uBghAV3s7m/Cv0uGJsYh1f2IRQ0IFJ1glBrCw6xYJYEWX3/Izg2AU+tCF0PsnaFGvehYC5fwL9aqVRiPhobg8slULth9rUEwXPYcmZzC9s7u3The0SBeTuJjT3/Oc7m8tihfbaZw6MoKzsGp5OHw+FgnhuImCyYTK1ienYO78gvWQlGcvU9EssrbG0jncH6pw36DZv4TNivb46QYPlxOHkXTlVWodrpogofPmCC68kE4tMvkbLiWFmcx3KcxN8uIElYr2fY+nrSQuZjCptrqyhmvyA21I8T5WWoqXag1llJVIHTLtxD550o2m9F0Hq9/wcDOH1jAM1Xe9HU/Qgt1/rQdnMQHT3DOHvbZHuau3uhnL+LirYuVLR3obLjCk6euYxvnRq6b22/EYYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"05\"\n        title=\"05\"\n        src=\"/static/a27c92c0034e05086f9f9a16fa5f753b/78d47/05.png\"\n        srcset=\"/static/a27c92c0034e05086f9f9a16fa5f753b/56d15/05.png 200w,\n/static/a27c92c0034e05086f9f9a16fa5f753b/d9f49/05.png 400w,\n/static/a27c92c0034e05086f9f9a16fa5f753b/78d47/05.png 800w,\n/static/a27c92c0034e05086f9f9a16fa5f753b/64756/05.png 1200w,\n/static/a27c92c0034e05086f9f9a16fa5f753b/bbbf7/05.png 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>接著，我們要打開PowerShell，來解決上面提到的第一個問題。</p>\n<p>我們可以看到InstallModules.ps1這個檔案裏面，他預設的Modules路徑為\"$applicationPath\\Deploy\\Modules\"，其實這是錯誤的，雖然我們可以從下圖看到，Modules的確在Deploy底下，但實際上，我們佈署這個PowerShell到目標Server的時候，是不會包含Deploy的，也就是說，我們只會把Modules設個目錄放到目標Server，而非Deploy這個目錄。</p>\n<p>所以，我們要改成如下圖，並且把Deploy拿掉。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3b5611189f9a071286276b6f93c36f5e/bbbf7/54.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACgElEQVQoz11S2W7UQBA0IMgDvGQTQOz6Gt9ee73rc2zvHQ4RIkEUUEKkvCOhSAhEks8vyt4gIR5KPdMeV1d1t7LZvkUuW1TzDWSzRNMs0LZLyLpFWdYoCtkjzyVq2WCxWKPh9y43n6/691laQlbkqGooCz46X7e4ev8Oy3qOqpRomznytEDVkWUF8ixHOtthmqTIGIu8gqSQPC93he+LK4u6RhV6qJMIceBjzLNjC1jCgE1YpgFHmDybcIWAbRg4HOzzu6DaVY+6XSEtWtRUq+RlhZeaBtXQ4AcCvhcQDkLfge0ICBKqqgpdUzFSNbwaDfHw0QMMBgO2qMFmc4RkksCybCqsoExnGTTbYkLHZEKicIxqEqENIkh3DDkeI3MdpI6DyLahkXxvbw8HB4coiwzb9Qqu68G2+YZtUsJoAoPsnmUgojpb2BBGp4y2Dbuv7Lsupp6HwvcRGjqeP3uKFySsipT9lvDDiG5cCppCieIEmrBIotKyA8d3oekqbY5ocYfhaAfB1gTE/pPHGO0PsMhnON4skVFUxIJxTMIxLzoJOysyHCJxR4hpNfOnELqARoK/GPGNaZpoOHlJNTWnfXV6hsvjD3hTN8iykoRUaNguDF2Hb2kwOZzOtmNZ0Jn7Fx2pxfxq/RqNnGMrS3wh2Zb7V6U597CBEkQk5Ap4gpPUNQxVnVB7dFMd9cq6qPfRoJvF6ghZ0XAvYzR1BUFBJkWkncJp4ME3VYSc8v8I7tGfhQZHHzLq2DQ1ylmKYhphIzPEXLOEa5ZGIRT39Aei85sek6+3mFzcIiaSyzve75j/3cf44gb+2U8En3+h+8c8+Q795BruR+LTNWxG4/gb/gDg0G3tFxhlXQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"54\"\n        title=\"54\"\n        src=\"/static/3b5611189f9a071286276b6f93c36f5e/78d47/54.png\"\n        srcset=\"/static/3b5611189f9a071286276b6f93c36f5e/56d15/54.png 200w,\n/static/3b5611189f9a071286276b6f93c36f5e/d9f49/54.png 400w,\n/static/3b5611189f9a071286276b6f93c36f5e/78d47/54.png 800w,\n/static/3b5611189f9a071286276b6f93c36f5e/64756/54.png 1200w,\n/static/3b5611189f9a071286276b6f93c36f5e/bbbf7/54.png 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>最後，別忘記簽入剛剛加進去的Deply目錄底下的所有東西，和剛剛修改好的InstallModules.ps1。</p>\n<h2>參考資料</h2>\n<ul>\n<li><a href=\"http://www.visualstudio.com/get-started/manage-your-release-vs\">http://www.visualstudio.com/get-started/manage-your-release-vs</a></li>\n<li><a href=\"http://www.visualstudio.com/get-started/deploy-with-agents-vs\">http://www.visualstudio.com/get-started/deploy-with-agents-vs</a></li>\n<li><a href=\"http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/11/using-release-management-vso-service-to-manage-releases.aspx\">http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/11/using-release-management-vso-service-to-manage-releases.aspx</a></li>\n<li><a href=\"http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/12/deploying-and-testing-web-applications-using-release-management.aspx\">http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/12/deploying-and-testing-web-applications-using-release-management.aspx</a></li>\n</ul>","excerpt":"Agent-Less 在開始設定編譯的相關東西之前，有個東西必須先讓大家知道，如果大家有玩過Release Management與地端的Server搭配的話，大家可能會有印象，以前都必須要在目標Server裝上Release Management Agent；而裝了Agent…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"VSO - 使用 Release Management 搭配 Azure 和 Visual Studio Online 環境設定篇","tags":["Azure","VSO","Release Management"]},"fields":{"slug":"/2015/02/11/VSO-Using_Release_Management_in_Azure_and_VSO_Setup_Environments/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/VSO-Using_Release_Management_in_Azure_and_VSO_Setup_Environments/VSO-Using_Release_Management_in_Azure_and_VSO_Setup_Environments.md"},"previous":{"frontmatter":{"path":null,"title":"VSO - 使用 Release Management 搭配 Azure 和 Visual Studio Online 元件與範本設定篇","tags":["Azure","VSO","Release Management"]},"fields":{"slug":"/2015/02/11/VSO-Using_Release_Management_in_Azure_and_VSO_Setup_Components/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/VSO-Using_Release_Management_in_Azure_and_VSO_Setup_Components/VSO-Using_Release_Management_in_Azure_and_VSO_Setup_Components.md"}}}}