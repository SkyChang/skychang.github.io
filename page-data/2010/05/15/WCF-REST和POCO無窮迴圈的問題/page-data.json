{"componentChunkName":"component---src-templates-page-js","path":"/2010/05/15/WCF-REST和POCO無窮迴圈的問題/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"WCF-REST和POCO無窮迴圈的問題","date":"15 May 2010","author":"Sky Chang","excerpt":null,"tags":["Entity Framework","WCF"],"coverImage":null},"id":"fe42145a-497d-5f48-9aeb-24b31348172c","html":"<p>這陣子在寫REST配合上EF4和POCO</p>\n<p>Lazy Loading的不支援這已經不用講了....</p>\n<p>同樣的Proxy也一樣必須關掉，</p>\n<p>但還是碰上一個問題，</p>\n<p>明明在除錯模式看的時候，物件裡面的值也都有，是正常的，</p>\n<p>但實際上，打開的網頁就是一片空白。</p>\n<p>後來終於找到相關網站如下</p>\n<p><a href=\"http://nikhilthaker86.wordpress.com/tag/wcf-rest/\">http://nikhilthaker86.wordpress.com/tag/wcf-rest/</a></p>\n<p>翻譯後大約的意思是( 翻錯了不要打我- -)</p>\n<p>因為在呼叫的時候，會變成Customer 取得 Orders，</p>\n<p>然後Orders裡面又取得Customer 然後，Customer又取得Orders</p>\n<p>變成無窮迴圈取得，使得序列化沒辦法產生出來。</p>\n<p>目前找到的方法是使用</p>\n<p>[IgnoreDataMember]</p>\n<p>這個參數是將此屬性不要序列化，</p>\n<p>但同樣也有些問題，如果將Customer的Orders屬性關掉的話，</p>\n<p>就變成，可以從Orders取得Customer屬性，但卻無法從Customer取得Orders</p>\n<p>P.S 解決著個問題，大概一口氣看了我這輩子最多的英文文章吧= =</p>\n<pre class=\"brush: csharp\">[IgnoreDataMember]\npublic virtual ICollection&lt;Orders&gt; Orders\n{\n  get\n  {\n    if (_orders == null)\n    {\n      var newCollection = new FixupCollection&lt;Orders&gt;();\n      newCollection.CollectionChanged += FixupOrders;\n      _orders = newCollection;\n    }\n  return _orders;\n  }\n  set\n  {\n    if (!ReferenceEquals(_orders, value))\n    {\n      var previousValue = _orders as FixupCollection&lt;Orders&gt;;\n      if (previousValue != null)\n      {\n        previousValue.CollectionChanged -= FixupOrders;\n      }\n      _orders = value;\n      var newValue = value as FixupCollection&lt;Orders&gt;;\n      if (newValue != null)\n      {\n        newValue.CollectionChanged += FixupOrders;\n      }\n    }\n  }\n}\n\nprivate ICollection&lt;Orders&gt; _orders;\n</pre>","excerpt":"這陣子在寫REST配合上EF4和POCO Lazy Loading的不支援這已經不用講了.... 同樣的Proxy也一樣必須關掉， 但還是碰上一個問題， 明明在除錯模式看的時候，物件裡面的值也都有，是正常的， 但實際上，打開的網頁就是一片空白。 後來終於找到相關網站如下 http…"}},"pageContext":{"type":"posts","next":{"frontmatter":{"path":null,"title":"SQL Manager express 防止儲存變更","tags":["SQL Server"]},"fields":{"slug":"/2010/05/07/SQL-Manager-express-防止儲存變更/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/SQL-Manager-express-防止儲存變更.md"},"previous":{"frontmatter":{"path":null,"title":"ODBC的備份轉移","tags":["ODBC","SQL Server"]},"fields":{"slug":"/2010/06/03/ODBC的備份轉移/"},"fileAbsolutePath":"/home/runner/work/blog.sanc.idv.tw/blog.sanc.idv.tw/src/posts/blog.sanc.idv.tw/ODBC的備份轉移.md"}}}}